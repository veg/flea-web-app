
<table class="table table-hover table-condensed nostretch sequence-viewer" id="sequence-viewer">
{{#sticky-element}}
  <thead id="sequence-viewer_top">
    <tr>
    <th class="seq-cell">ref. coord.<br>
      <div>
      <button title="Select positive sites" type="button" class="btn btn-default btn-sm" {{action "selectPositiveClicked"}}><i class="fa fa-plus"></i></button>
      <button title="Clear sites" type="button" class="btn btn-default btn-sm" {{action "clearPositions"}}><i class="fa fa-remove"></i></button>
      </div>
    </th>

    {{#each refHTML as |elt|}}

    <th class="{{elt._class}}"
          data-coord="{{elt.dataCoord}}"
          {{action "togglePosition" elt.dataCoord}}>
      {{{elt.html}}}

  </th>
    {{/each}}

    <th class="seq-cell col"></th>
    <th class="seq-cell col"></th>
      </tr>

    {{#if markPositive}}
    <tr class="positivePositions">
      <th class="seq-cell row"></th>
      {{{combinedSelectionString}}}
      <td class="seq-cell"></td>
      <td class="seq-cell"></td>
    </tr>
    {{/if}}


    {{#if reference}}
    <tr>

      <th class="seq-cell row">Reference</th>
      {{amino-acid reference}}
      <td class="seq-cell"></td>
      <td class="seq-cell"></td>

    </tr>
    {{/if}}
<tr>
      <th class="seq-cell row">MRCA</th>
      {{amino-acid mrca}}
      <td class="seq-cell"></td>
      <td class="seq-cell"></td>
    </tr>

  </thead>
{{/sticky-element}}
<div id="sequence-viewer_bottom" >
<tbody>
  <tr>
    <td>-----------</td>
  </tr>
    {{#each groupedAndSelected as |obj|}}


    {{#if markPositive}}
    <tr class="positivePositions">
      <th class="row">{{obj.group.label}}</th>
      {{{obj.pos}}}
      <td class="seq-cell"></td>
      <td class="seq-cell"></td>
    </tr>
    {{/if}}


          {{#each obj.group.sequences as |seq|}}
          <tr>
            <!--
              Chat to Rob about this does obj.group.label have a purpose??
              for now, i assumed not can fix it in future if needs be
              {{#if markPositive}}
                <td class="seq-cell notopborder"></td>
              {{else}}
                <td class="seq-cell">{{obj.group.label}}</td>
              {{/if}}
            -->
            <th class="row notopborder"></th>
          {{amino-acid seq.sequence ranges=seq.highlights mask=seq.mask}}
          <td class="seq-cell pad">{{#bootstrap-popover title="" dataContent=seq.html placement="right"}}
          {{seq.copyNumber}}
          {{/bootstrap-popover}}</td>
          <td class="seq-cell pad">{{format-percent seq.percent}}%</td>
         </tr>
          {{/each}}
      <!-- <td class="seq-cell">
        <ul>
          {{#each obj.group.sequences as |seq|}}
          <li>
            {{#bootstrap-popover title="" dataContent=seq.html placement="right"}}
            {{seq.copyNumber}}
            {{/bootstrap-popover}}
          </li>
          {{/each}}
        </ul>
      </td>
      <td class="seq-cell">
        <ul>
          {{#each obj.group.sequences as |seq|}}
          <li>{{format-percent seq.percent}}%</li>
          {{/each}}
        </ul>
      </td> -->
    {{/each}}
  </tbody>
</div>
</table>
