define("flea-app/adapters/dates",["exports","ember","../config/environment","ic-ajax","../utils/utils"],function(e,t,s,n,a){"use strict";e["default"]=t["default"].Object.extend({find:function(e){var t=s["default"].baseURL+"data/"+e+"/dates";return n["default"](t).then(function(e){var t={};for(var s in e)if(e.hasOwnProperty(s)){var n=a.parse_date(s);t[n]=e[s]}return t})}})}),define("flea-app/adapters/frequencies",["exports","ember","../config/environment","ic-ajax","../models/frequency-object"],function(e,t,s,n,a){"use strict";e["default"]=t["default"].Object.extend({find:function(e){var t=s["default"].baseURL+"data/"+e+"/frequencies";return n["default"](t).then(function(e){return a["default"].create({data:e})})}})}),define("flea-app/adapters/neutralization",["exports","ember","../config/environment","ic-ajax"],function(e,t,s,n){"use strict";e["default"]=t["default"].Object.extend({find:function(e){var t=s["default"].baseURL+"data/"+e+"/neutralization";return n["default"](t).then(function(e){return e})}})}),define("flea-app/adapters/rates",["exports","ember","../config/environment","ic-ajax","../utils/utils"],function(exports,Ember,config,request,utils){"use strict";function positive_selection_positions(e){return e.map(function(e,t){return[t,e[2]]}).filter(function(e){return e[1]>=.95}).map(function(e){return e[0]})}var RateInfo=Ember["default"].Object.extend({date:null,rates:null}),RatesObject=Ember["default"].Object.extend({data:[],sortedRates:function(){var e=this.get("data"),t=e.filter(function(e){return"Combined"!==e.date}),s=e.filter(function(e){return"Combined"===e.date});return t.sort(function(e,t){return e.date-t.date}),t.splice(0,0,s[0]),t}.property("data.@each"),positiveSelection:function(){var e=this.get("sortedRates");return e.map(function(e){return positive_selection_positions(e.rates)})}.property("sortedRates")});exports["default"]=Ember["default"].Object.extend({find:function(session_id){var url=config["default"].baseURL+"data/"+session_id+"/rates";return request["default"](url).then(function(result){var new_result=[];for(var name in result)if(result.hasOwnProperty(name)){var d=name,array=eval(result[name]);"Combined"!==name&&(d=utils.parse_date(name)),new_result.push(RateInfo.create({date:d,rates:array}))}return RatesObject.create({data:new_result})})}})}),define("flea-app/adapters/sequences",["exports","ember","../config/environment","ic-ajax","../utils/utils"],function(e,t,s,n,a){"use strict";function r(e){var t=o.exec(e);return t?parseInt(t[1]):1}function i(e,s,n,i){return null!==s&&(s=a.parse_date(s)),t["default"].Object.create({id:e,date:s,copyNumber:r(e),sequence:n,type:i,selected:!0})}e["default"]=t["default"].Object.extend({find:function(e){var t=s["default"].baseURL+"data/"+e+"/sequences";return n["default"](t).then(function(e){var t=[];for(var s in e)if(e.hasOwnProperty(s))if("MRCA"!==s)if("Combined"!==s){var n=s,a=e[s];for(var r in a)if(a.hasOwnProperty(r)){var o=a[r];for(var l in o)if(o.hasOwnProperty(l)){var u=o[l],c=i(l,n,u,r);t.push(c)}}}else{var h=e[s];for(var d in h)if(h.hasOwnProperty(d)){var p=h[d],f=i(d,null,p,"Combined");t.push(f)}}else t.push(i("mrca",null,e[s],"MRCA"));return t})}});var o=/_([0-9]+)$/}),define("flea-app/adapters/structure",["exports","ember","../config/environment","ic-ajax"],function(e,t,s,n){"use strict";e["default"]=t["default"].Object.extend({find:function(){var e=s["default"].baseURL+"assets/env_structure.pdb";return n["default"](e).then(function(e){var t=pv.io.pdb(e);return t})}})}),define("flea-app/adapters/trajectory",["exports","ember","../config/environment","ic-ajax","../utils/utils"],function(e,t,s,n,a){"use strict";e["default"]=t["default"].Object.extend({find:function(e){var t=s["default"].baseURL+"data/"+e+"/rates_pheno";return n["default"](t).then(function(e){return e.forEach(function(e){e.Date=a.parse_date(String(e.Date));for(var t in e)"Segment"!==t&&"Date"!==t&&(e[t]=+e[t])}),e})}})}),define("flea-app/adapters/trees",["exports","ember","../config/environment","ic-ajax","../utils/utils"],function(e,t,s,n,a){"use strict";function r(e,s,n,r){return"Combined"!==e&&(e=a.parse_date(e)),t["default"].Object.create({date:e,region:s,distance:n,tree:r})}e["default"]=t["default"].Object.extend({find:function(e){var t=s["default"].baseURL+"data/"+e+"/trees";return n["default"](t).then(function(e){var t=[];for(var s in e)if(e.hasOwnProperty(s))for(var n in e[s])if(e[s].hasOwnProperty(n))for(var a in e[s][n])e[s][n].hasOwnProperty(a)&&t.push(r(s,n,a,e[s][n][a]));return t})}})}),define("flea-app/adapters/turnover",["exports","ember","../config/environment","ic-ajax","../utils/utils"],function(e,t,s,n,a){"use strict";var r=t["default"].Object.extend({date:null,turnover:null}),i=t["default"].Object.extend({data:[],readCounts:[],sortedTurnover:function(){var e=this.get("data");return e.sort(function(e,t){return e.date-t.date}),e}.property("data")});e["default"]=t["default"].Object.extend({find:function(e){var t=s["default"].baseURL+"data/"+e+"/turnover";return n["default"](t).then(function(e){var t=[],s=e.readCount;delete e.readCount;for(var n in e)t.push(r.create({date:a.parse_date(n),turnover:e[n]}));return i.create({data:t,readCounts:s})})}})}),define("flea-app/app",["exports","ember","ember/resolver","ember/load-initializers","./config/environment"],function(e,t,s,n,a){"use strict";t["default"].MODEL_FACTORY_INJECTIONS=!0;var r=t["default"].Application.extend({modulePrefix:a["default"].modulePrefix,podModulePrefix:a["default"].podModulePrefix,Resolver:s["default"]});n["default"](r,a["default"].modulePrefix),e["default"]=r}),define("flea-app/components/alignment-overview",["exports","ember","../utils/utils"],function(e,t,s){"use strict";e["default"]=t["default"].Component.extend({tagName:"svg",classNames:["alignment-overview"],labelHeight:10,mainHeight:30,axisHeight:20,attributeBindings:["width","height"],alnRanges:null,alnLen:1,selectedPositions:null,predefinedRegions:null,alnToRefCoords:null,tick:100,shiftKey:!1,width:t["default"].computed.alias("alnLen"),height:function(){return this.get("labelHeight")+this.get("mainHeight")+this.get("axisHeight")}.property("labelHeight","mainHeight","axisHeight"),didInsertElement:function(){this.transformMain(),this.drawLabels(),this.drawTrack(),this.drawInsertions(),this.drawPositive(),this.drawSelected(),this.drawRanges(),this.drawAxis(),this.makeBrush();var e=this,t=function(){e.set("shiftKey",d3.event.shiftKey)};d3.select(window).on("keydown",t),d3.select(window).on("keyup",t)},drawLabels:function(){var e=this.get("refToAlnCoords"),t=this.get("predefinedRegions"),n=d3.select("#"+this.get("elementId")).select(".labels"),a=this.get("labelHeight"),r=a/2,i=this,o=function(e){var t=[e.start,e.stop];i.get("shiftKey")?i.sendAction("addRange",t):i.sendAction("setRanges",[t])},l=n.selectAll("text").data(t,function(e){return e.name});l.enter().append("text").style("text-anchor","middle").style("dominant-baseline","middle").attr("x",function(t){return s.transformIndex(t.start,e,!1)+(s.transformIndex(t.stop,e,!0)-s.transformIndex(t.start,e,!1))/2}).attr("y",function(){return r}).text(function(e){return e.name}).attr("font-family","sans-serif").attr("font-size","8px"),l.exit().remove();var u=n.selectAll("rect").data(t,function(e){return e.name});u.enter().append("rect").on("click",o).style("cursor","pointer").attr("x",function(t){return s.transformIndex(t.start,e,!1)}).attr("y",function(){return 0}).attr("width",function(t){return s.transformIndex(t.stop,e,!0)-s.transformIndex(t.start,e,!1)-1}).attr("height",function(){return a}).attr("stroke-width",1).attr("stroke","black").attr("fill-opacity",0),u.exit().remove()}.observes("predefinedRegions","labelHeight","refToAlnCoords"),transformMain:function(){d3.select("#"+this.get("elementId")).select(".main").attr("transform","translate(0,"+this.get("labelHeight")+")")}.observes("labelHeight"),closedRanges:function(){return this.get("alnRanges").map(function(e){return[e[0],e[1]-1]})}.property("alnRanges"),x:function(){return d3.scale.linear().domain([0,this.get("width")]).range([0,this.get("width")])}.property("width"),makeBrush:function(){var e=this,t=this.get("alnToRefCoords"),n=d3.select("#"+this.get("elementId")).select(".main").select(".brush"),a=this.get("x"),r=d3.svg.brush(),i=function(){var a=r.extent(),i=a.map(function(e){return d3.round(e,0)}),o=[s.transformIndex(i[0],t,!1),s.transformIndex(i[1],t,!1)+1];e.get("shiftKey")?e.sendAction("addRange",o):e.sendAction("setRanges",[o]),r.clear(),n.call(r)};r.x(a).on("brushend",i),n.call(r).selectAll("rect").attr("height",this.get("mainHeight"))}.observes("x","mainHeight","alnToRefCoords"),drawTrack:function(){var e=this.get("width"),t=this.get("mainHeight"),s=d3.select("#"+this.get("elementId")).select(".main").select(".track"),n=[[0,t/2,e,t/2],[0,t/3,0,2*t/3],[e-1,t/3,e-1,2*t/3]],a=s.selectAll("lines").data(n).enter().append("line");a.attr("x1",function(e){return e[0]}).attr("y1",function(e){return e[1]}).attr("x2",function(e){return e[2]}).attr("y2",function(e){return e[3]}).attr("stroke-width",1).attr("stroke","black")}.observes("width","mainHeight"),drawAxis:function(){var e=this.get("refToAlnCoords"),t=this.get("alnToRefCoords"),n=this.get("tick"),a=Math.max(Math.floor(t[t.length-1]/n),0),r=_.range(1,a+1).map(function(e){return s.zeroIndex(e*n)}),i=r.map(function(t){return s.transformIndex(t,e,!1)}),o=this.get("x"),l=d3.svg.axis().scale(o).orient("bottom").tickValues(i).tickFormat(function(e){return s.oneIndex(s.transformIndex(e,t,!1))}),u=d3.select("#"+this.get("elementId")).select(".axis");u.attr("class","x axis").attr("transform","translate(0,"+(this.get("labelHeight")+this.get("mainHeight"))+")").call(l)}.observes("width","mainHeight","labelHeight"),insertions:function(){for(var e=this.get("alnToRefCoords"),t=[],s=!1,n=-1,a=-1,r=e.length,i=1;i<e.length;i++)s||e[i-1]!==e[i]?s&&e[i-1]!==e[i]?(a=i-1,s=!1,t.push([n,a])):s&&i+1===r&&(a=i,s=!1,t.push([n,a])):(s=!0,n=i);return t}.property("alnToRefCoords"),drawInsertions:function(){var e=d3.select("#"+this.get("elementId")).select(".main").select(".insertions"),t=this.get("insertions"),s=this.get("mainHeight")/2,n=e.selectAll("line").data(t,function(e){return String(e)});n.enter().append("line").attr("x1",function(e){return e[0]}).attr("y1",function(){return s}).attr("x2",function(e){return e[1]}).attr("y2",function(){return s}).attr("stroke-width",3).attr("stroke","black"),n.exit().remove()}.observes("insertions","mainHeight"),drawPositive:function(){var e=[];this.get("markPositive")&&(e=this.get("positiveSelection")[0]);var t=this.get("mainHeight"),s=d3.select("#"+this.get("elementId")).select(".main").select(".positive"),n=s.selectAll("line").data(e,function(e){return e});n.enter().append("line").attr("x1",function(e){return e}).attr("y1",function(){return t/3}).attr("x2",function(e){return e}).attr("y2",function(){return 2*t/3}).attr("stroke-width",1).attr("stroke","green"),n.exit().remove()}.observes("markPositive","positiveSelection","mainHeight"),drawSelected:function(){var e=d3.select("#"+this.get("elementId")).select(".main").select(".selected"),t=this.get("mainHeight"),s=this.get("selectedPositions").toArray(),n=e.selectAll("line").data(s,function(e){return e});n.enter().append("line").attr("x1",function(e){return e}).attr("y1",function(){return 0}).attr("x2",function(e){return e}).attr("y2",function(){return t}).attr("stroke-width",1).attr("stroke","red"),n.exit().remove()}.observes("selectedPositions.[]","mainHeight"),drawRanges:function(){var e=function(){var e=d3.round(+d3.event.dx,0),t=+this.getAttribute("width"),s=+this.getAttribute("x")+e;s>=0&&i>=s+t+1&&d3.select(this).attr("x",s)},t=function(){var e=+this.getAttribute("idx"),t=+this.getAttribute("x"),s=+this.getAttribute("width"),n=[t,t+s+1];r.sendAction("updateRange",e,n)},s=d3.select("#"+this.get("elementId")).select(".main").select(".ranges"),n=this.get("mainHeight"),a=this.get("closedRanges"),r=this,i=this.get("width"),o=d3.behavior.drag().on("drag",e).on("dragend",t),l=s.selectAll("rect").data(a,function(e){return String(e)});l.enter().append("rect").attr("x",function(e){return e[0]}).attr("y",function(){return 0}).attr("idx",function(e,t){return t}).attr("width",function(e){return e[1]-e[0]}).attr("height",function(){return n}).attr("stroke-width",1).attr("stroke","blue").style("fill","blue").attr("fill-opacity",.1).call(o).on("click",function(e,t){d3.event.defaultPrevented||r.sendAction("rmRange",t)}),l.exit().remove()}.observes("closedRanges","width","mainHeight")})}),define("flea-app/components/bootstrap-popover",["exports","ember"],function(e,t){"use strict";e["default"]=t["default"].Component.extend({tagName:"a",attributeBindings:["tabindex","dataToggle:data-toggle","dataTrigger:data-trigger","title","dataContent:data-content","placement"],classNames:["popover-link"],tabindex:"0",dataToggle:"popover",dataTrigger:"focus",title:"Title",dataContent:"Content",html:!0,placement:"auto right",didInsertElement:function(){this.$().popover({html:this.get("html"),placement:this.get("placement")})}.observes("dataContent","html","placement")})}),define("flea-app/components/gene-plots",["exports","ember"],function(e,t){"use strict";function s(e,t){var s=[e];return s.pushObjects(t),s}e["default"]=t["default"].Component.extend({tagName:"svg",attributeBindings:["width","height"],addCombined:!0,width:850,heightEach:80,labelHeight:25,margin:{top:20,right:0,bottom:50,left:30},height:function(){var e=this.get("margin");return e.top+e.bottom+this.get("nPlots")*this.get("heightEach")+this.get("labelHeight")}.property("heightEach","margin","nPlots","labelHeight"),didInsertElement:function(){this._updateChart()},innerWidth:function(){var e=this.get("margin");return this.get("width")-e.left-e.right}.property("width","margin"),innerHeight:function(){var e=this.get("margin");return this.get("height")-e.top-e.bottom}.property("height","margin"),innerGroupTransform:function(){var e=this.get("margin");return"translate(%@, %@)".fmt(e.left,e.top)}.property("margin"),onChartChange:function(){"inDOM"===this.state&&this._updateChart()}.observes("name.@each","data1","data2","positions","labels.[]","width","height","heightEach","margin","yMax","labelHeight","addCombined"),yMax:function(){var e=this.get("data1"),t=this.get("data2");return[d3.max(_.flatten(e)),d3.max(_.flatten(t))]}.property("data1","data2"),nPlots:function(){var e=this.get("names.length");return this.get("addCombined")&&(e+=1),e}.property("names.length","addCombined"),_updateChart:function(){var e=function(){x.domain(I.empty()?y.domain():I.extent());for(var e=0;e<w.length;e++)w[e].select("._pos_dS").attr("d",C[e][0]),u&&w[e].select("._pos_dN").attr("d",C[e][1]),w[e].selectAll(".selected_site").attr("cx",b);v.select(".pos.x.axis").call(S)},t=this.get("names"),n=this.get("data1"),a=this.get("data2"),r=this.get("positions"),i=this.get("labels"),o=n[0].length,l=this.get("nPlots"),u=a.length>0;if(this.get("addCombined")&&"Combined"!==t[0]){for(var c=[],h=0;o>h;h++)c.push(0);n=s(c,n),u&&(n=s(c,a)),r.length>0&&(r=s([],r)),t=s("Combined",t)}if(u&&n.length!==a.length)throw"data1 and data2 have different lengths";if(n.length!==t.length)throw"data1 and names have different lengths";for(var d=0;l>d;d++){if(n[d].length!==o)throw"data vector lengths are inconsistent";if(u&&a[d].length!==o)throw"data vector lengths are inconsistent"}var p=this.get("innerWidth"),f=this.get("innerHeight"),g=this.get("heightEach"),m=this.get("url"),b=function(e){return x(e)},v=d3.select("#"+this.get("elementId")).select(".inner");v.selectAll("path").remove(),v.selectAll("g").remove(),v.selectAll("defs").remove(),v.append("defs").append("clipPath").attr("id","clip").append("rect").attr("width",p).attr("height",f),v=v.append("g");for(var x=d3.scale.linear().range([0,p]).domain([1,o]),y=d3.scale.linear().range([0,p]).domain([1,o]),I=d3.svg.brush().x(y).on("brush",e),T=this.get("yMax"),R=d3.scale.linear().range([g,0]).domain([u?-T[1]:0,T[0]]),S=d3.svg.axis().scale(x).orient("bottom"),D=d3.svg.axis().scale(y).orient("top"),w=[],C=[],_=0;_<t.length;_++){var N=v.append("g").attr("transform","translate(0,"+g*_+")"),k=[];k[0]=d3.svg.area().x(function(e,t){return x(t+1)}).y0(function(){return R(0)}).y1(function(e){return R(e)}).interpolate("step"),u&&(k[1]=d3.svg.area().x(function(e,t){return x(t+1)}).y0(function(e){return R(-e)}).y1(function(){return R(0)}).interpolate("step")),C.push(k),N.append("text").attr("transform","translate(0,"+R(0)+") rotate (-90)").attr("y","0").attr("dy","-0.5em").style("text-anchor",u?"middle":"start").text(t[_]),N.append("path").datum(n[_]).attr("class","_pos_dS").attr("clip-path","url("+m+"#clip)").attr("d",k[0]),u&&N.append("path").datum(a[_]).attr("clip-path","url("+m+"#clip)").attr("class","_pos_dN").attr("d",k[1]),0===_?N.append("g").attr("class","x brush").call(I).selectAll("rect").attr("y",-6).attr("height",g+7):w.push(N),r.length>0&&N.selectAll(".selected_site").data(r[_]).enter().append("circle").attr("cx",function(e){return x(e)}).attr("cy",function(){return R(0)}).attr("r",4).attr("class","selected_site").attr("clip-path","url("+m+"#clip)").append("title").text(function(e){return"Codon "+e})}v.append("g").attr("class","pos x_overall axis").call(D).append("text").attr("transform","translate(0,0)").attr("dy","-.4em").attr("dx",".25em").style("text-anchor","start").text("Site");var q=this.get("labelHeight");if(v.append("g").attr("class","pos x axis").attr("transform","translate(0,"+(f-q)+")").call(S).append("text").attr("transform","translate(0,0)").attr("dy","+1.1em").attr("dx",".25em").style("text-anchor","start").text("Site"),i.length>0){var G={x:0,y:f-q+10,spacer:15,margin:5,font:10,x_step:100},P=["#2E66FF","#FFB314"],M=v.append("g").attr("class","gene_legend").attr("x",G.x).attr("y",G.y).attr("transform","translate("+G.x+","+G.y+")");M.selectAll("g").data(i).enter().append("g").each(function(e,t){var s=d3.select(this);s.append("rect").attr("y",G.spacer).attr("x",t*(G.spacer+G.margin+G.x_step)).attr("width",G.spacer).attr("height",G.spacer).style("fill",P[t]),s.append("text").attr("y",2*G.spacer).attr("x",t*(G.spacer+G.margin+G.x_step)+G.spacer+G.font/4).style("fill",P[t]).text(function(e){return e})})}}})}),define("flea-app/components/graph-axis",["exports","ember"],function(e,t){"use strict";e["default"]=t["default"].Component.extend({tagName:"g",classNames:["axis"],attributeBindings:["transform"],scale:null,orient:"bottom",ticks:10,tickValues:null,tickSize:15,tickFormat:null,tickPadding:15,rotate:0,_axis:null,d3Axis:function(){var e=this.get("_axis");return null===e&&(e=d3.svg.axis()),e.scale(this.get("scale")).orient(this.get("orient")).ticks(this.get("ticks")).tickValues(this.get("tickValues")).tickFormat(this.get("tickFormat")).tickSize(this.get("tickSize")).tickPadding(this.get("tickPadding")),this.set("_axis",e),e}.property("scale","orient","ticks","tickValues","tickSize","tickFormat","tickPadding"),didInsertElement:function(){this._updateAxis()},onD3AxisChange:function(){"inDOM"===this.state&&this._updateAxis()}.observes("d3Axis","rotate"),_updateAxis:function(){var e=this.get("d3Axis"),t=d3.select(this.$()[0]).call(e),s=this.get("rotate");0!==s&&t.selectAll("text").style("text-anchor","start").attr("transform","rotate("+s+")").attr("dx","0.5em").attr("dy","0.5em")}})}),define("flea-app/components/multi-select",["exports","ember","ember-cli-multiselect/components/multi-select"],function(e,t,s){"use strict";e["default"]=s["default"]}),define("flea-app/components/phylotree-widget",["exports","ember","../utils/utils"],function(e,t,s){"use strict";e["default"]=t["default"].Component.extend({tagName:"svg",attributeBindings:["width","height"],treeWidget:null,width:800,height:600,tree:null,seq_ids_to_dates:null,do_copy_number:!1,nodeNamer:function(){var e=this.get("seq_ids_to_dates");if(this.get("showDates")){var t=function(t){return s.format_date(e[t.name.toUpperCase()])};return t}return null}.property("seq_ids_to_dates","showDates"),nodeColorizer:function(){var e=this.get("seq_ids_to_dates"),t=d3.scale.category10(),s=function(s,n){s.style("fill",t(e[n.name.toUpperCase()]))};return s}.property("seq_ids_to_dates"),didInsertElement:function(){var e=d3.layout.phylotree("body").size([this.get("height"),this.get("width")]).separation(function(){return 0}).style_nodes(this.get("nodeColorizer")).branch_name(this.get("nodeNamer"));if(e.node_span("equal"),this.get("do_copy_number")){var t=/_([0-9]+)$/;e.node_span(function(e){var s=t.exec(e.name);try{var n=Math.sqrt(parseFloat(s[1]));return n}catch(a){}return null}),e.options({"draw-size-bubbles":!0},!1)}else e.options({"draw-size-bubbles":!1},!1);e.options({selectable:!1},!1),this.set("treeWidget",e),this.update()},update:function(){var e=this.get("tree"),t=d3.select("#"+this.get("elementId")),s=this.get("treeWidget");s(e).svg(t).layout(),this.sort()}.observes("tree","treeWidget"),sort:function(){var e=this.get("sortState");"ascending"===e?this.sortNodes(!0):"descending"===e?this.sortNodes(!1):this.sortOriginal()}.observes("sortState"),sortNodes:function(e){var t=this.get("treeWidget");t.traverse_and_compute(function(e){var t=1;e.children&&e.children.length&&(t+=d3.max(e.children,function(e){return e.count_depth})),e.count_depth=t}),t.resort_children(function(t,s){return(t.count_depth-s.count_depth)*(e?1:-1)})},sortOriginal:function(){this.get("treeWidget").resort_children(function(e,t){return e.original_child_order-t.original_child_order})},space:function(){var e=this.get("spaceState");"neutral"!==e&&("compress"===e?this.compressSpacing():"expand"===e&&this.expandSpacing(),this.set("spaceState","neutral"))}.observes("spaceState"),expandSpacing:function(){var e=this.get("treeWidget");e.spacing_x(e.spacing_x()+1).update(!0)},compressSpacing:function(){var e=this.get("treeWidget");e.spacing_x(e.spacing_x()-1).update(!0)},updateNames:function(){var e=this.get("treeWidget");e.branch_name(this.get("nodeNamer")),e.update(!0)}.observes("nodeNamer")})}),define("flea-app/components/pv-wrapper",["exports","ember"],function(e,t){"use strict";e["default"]=t["default"].Component.extend({shouldLabel:!0,fog:!0,spin:!1,slabModes:["auto","fixed"],slabMode:"auto",slabNear:.1,slabFar:400,structure:null,data:[],viewer:null,geometry:null,updateSpin:function(){this.get("viewer").spin(this.get("spin"))}.observes("spin"),updateFog:function(){this.get("viewer").options("fog",this.get("fog")),this.get("viewer").requestRedraw()}.observes("fog"),updateSlabMode:function(){this.get("viewer").slabMode(this.get("slabMode"),{near:+this.get("slabNear"),far:+this.get("slabFar")}),this.get("viewer").requestRedraw()}.observes("slabMode","slabNear","slabFar"),showSlabControls:function(){return"fixed"===this.get("slabMode")}.property("slabMode"),didInsertElement:function(){var e={width:1e3,height:800,antialias:!0,quality:"medium"},t=pv.Viewer(this.$()[0],e);this.set("viewer",t);var s=this.get("structure");t.fitTo(s);var n=t.cartoon("protein",s);n.colorBy(pv.color.uniform("blue")),this.set("geometry",n),this.updateColors(),this.labelResidues()},updateColors:function(){var e=this.get("geometry"),t=this.get("structure");if(null!==t){var s=this.get("data"),n=0,a=0,r=pv.color.gradient(["white","darkred"]);if(s){n=d3.min(s),a=d3.max(s),-n===a&&(r=pv.color.gradient(["darkblue","white","darkred"]));var i=a-n;s=_.map(s,function(e){return(e-n)/i})}t.eachResidue(function(e){var t=e.num(),n=s[t];n=void 0===n?0:n,e.customData=function(){return n}});var o=pv.color.byResidueProp("customData",r);e.colorBy(o),this.get("viewer").requestRedraw()}}.observes("data.@each","structure","geometry"),labelResidues:function(){var e=this.get("viewer");if(e.rm("label*"),this.get("shouldLabel")){var t=this.get("structure"),s=0,n={fontSize:10,fontColor:"rgba(0, 0, 0, 0.5)"};t.eachResidue(function(t){var a=t.num();if(a%10===0){var r="label_"+s;e.label(r,a,t.atom(0).pos(),n),s+=1}})}this.get("viewer").requestRedraw()}.observes("shouldLabel")})}),define("flea-app/components/range-selector",["exports","ember"],function(e,t){"use strict";e["default"]=t["default"].Component.extend({tagName:"",values:[],names:[],selectedIdx:0,selectedName:function(){return this.get("names")[this.get("selectedIdx")]}.property("names.length","names.@each","selectedIdx"),maxIdx:function(){return this.set("selectedIdx",0),this.get("values.length")-1}.property("values.length")})}),define("flea-app/components/sequence-range-controls",["exports","ember","../utils/utils"],function(e,t,s){"use strict";e["default"]=t["default"].Component.extend({tagName:"",ranges:[],seqLen:1,myRanges:[],rangeText:"",fromController:function(){this.updateFromController()}.on("didInsertElement"),updateFromController:function(){this.set("myRanges",this.get("ranges")),this.makeText()}.observes("ranges"),makeText:function(){var e=this.get("myRanges"),t=e.map(function(e){return s.oneIndex(e[0])+"-"+e[1]}).join(";");this.set("rangeText",t)},parseText:function(){var e=this.get("rangeText"),t=e.split(";").map(function(e){var t=e.split("-");if(2!==t.length)throw"wrong number of ranges";return[+t[0]-1,+t[1]]});this.set("myRanges",t)},toController:function(){var e=this.get("myRanges"),t=+this.get("seqLen");e=e.map(function(e){var s=e[0],n=e[1];return 0>s&&(s=0),n>t&&(n=t),[s,n]}),this.set("myRanges",e),_.all(e.map(function(e){return e[0]<e[1]}))&&(this.set("ranges",e),this.set("myRanges",e))},actions:{moveRanges:function(e){for(var t=this.get("ranges"),s=this.get("seqLen"),n=0;n<t.length;n++){var a=t[n][0],r=t[n][1];a+e>=0&&r+e>=a+e&&s>=r+e&&(t[n][0]=a+e,t[n][1]=r+e)}this.set("myRanges",t),this.toController()},setRange:function(e,t){this.set("myRanges",[[e,t]]),this.makeText(),this.toController()},display:function(){this.parseText(),this.toController()}}})}),define("flea-app/components/sequence-viewer",["exports","ember","../utils/utils"],function(e,t,s){"use strict";e["default"]=t["default"].Component.extend({groupedSequences:{},alnToRef:null,selectedPositions:new t["default"].Set,selectDefault:!1,didInsertElement:function(){this.get("selectDefault")&&0===this.get("selectedPositions.length")&&this.selectAllPositive()},refHTML:function(){for(var e=[],t=-5,n=this.get("alnToRef"),a=this.get("positiveSelection")[0],r=this.get("alnRanges"),i=0;i<r.length;i++){for(var o=r[i][0],l=r[i][1],u=o;l>u;u++){var c=s.oneIndex(n[u]),h="";h=10>c?"  "+c:100>c?" "+c:""+c,t===c&&(h=" - ");var d="hxb2_coord";this.get("selectedPositions").contains(u)&&(d+=" selected_position"),h=h.split("").join("<br/>"),this.get("markPositive")&&(h+="<br/>",h+=a.indexOf(u)>=0?"+":""),e.push({_class:d,dataCoord:u,html:h}),t=c}r.length>1&&i<r.length-1&&e.push({_class:"hxb2_coord seperator",dataCoord:"",html:"|<br/>|<br/>|"})}return e}.property("alnRanges","alnToRef","markPositive","positiveSelection","selectedPositions","selectedPositions.[]"),selectAllPositive:function(){for(var e=this.get("positiveSelection")[0],s=this.get("alnRanges"),n=new t["default"].Set,a=0;a<s.length;a++)for(var r=s[a][0],i=s[a][1],o=0;o<e.length;o++){var l=e[o];if(l>=r&&i>=l&&n.add(l),l>i)break}this.set("selectedPositions",n)},actions:{togglePosition:function(e){e=+e,this.get("selectedPositions").contains(e)?this.get("selectedPositions").remove(e):this.get("selectedPositions").add(e)},clearPositions:function(){this.get("selectedPositions").clear()},selectPositiveClicked:function(){this.selectAllPositive()}}})}),define("flea-app/components/timeseries-plot",["exports","ember"],function(e,t){"use strict";e["default"]=t["default"].Component.extend({tagName:"svg",attributeBindings:["width","height"],width:900,height:300,legendRight:!1,interpolation:"linear",ymin:null,data:[],data2:[],_margin:{top:20,right:50,bottom:60,left:50},margin:function(){var e=this.get("_margin"),t=this.get("seriesNames");if(this.get("legendRight")&&t.length>0){var s=Math.max.apply(null,t.map(function(e){return e.length}));e.right=20+10*s}return e}.property("seriesNames.[]","legendRight"),didInsertElement:function(){this.set("width",this.$().width()),this.set("height",this.$().height()),this._updateChart()},innerWidth:function(){var e=this.get("margin");return this.get("width")-e.left-e.right}.property("width","margin"),innerHeight:function(){var e=this.get("margin");return this.get("height")-e.top-e.bottom}.property("height","margin"),innerGroupTransform:function(){var e=this.get("margin");return"translate(%@, %@)".fmt(e.left,e.top)}.property("margin"),seriesNames:function(){var e=this.get("data"),t=this.get("data2"),s=e.map(function(e){return e.name}),n=t.map(function(e){return e.name});return s.concat(n)}.property("data.[]","data2.[]"),dates:function(){var e=this.get("data"),t=e.map(function(e){return e.values.map(function(e){return e.x})});return t=d3.set(d3.merge(t)).values(),t.map(function(e){return new Date(e)})}.property("data.[]"),xDomain:function(){return d3.extent(this.get("dates"))}.property("dates.[]"),xAxisTransform:function(){return"translate(0, %@)".fmt(this.get("innerHeight"))}.property("innerHeight"),xScale:function(){var e=this.get("xDomain");e=e.map(function(e){return new Date(e)});var t=d3.time.scale().domain(e).range([0,this.get("innerWidth")]);return t}.property("innerWidth","xDomain"),_yScale:function(e){var t=d3.max(e,function(e){return d3.max(e.values,function(e){return e.y})}),s=this.get("ymin");return null===s&&(s=d3.min(e,function(e){return d3.min(e.values,function(e){return e.y})})),d3.scale.linear().range([this.get("innerHeight"),0]).domain([s,t])},yScale:function(){return this._yScale(this.get("data"))}.property("innerHeight","data.[]","ymin"),yScale2:function(){return this._yScale(this.get("data2"))}.property("innerHeight","data2.[]","ymin"),yAxisTransform:function(){return"translate(%@, 0)".fmt(this.get("innerWidth"))}.property("innerHeight"),d3Line:function(){var e=this.get("xScale"),t=this.get("yScale");return d3.svg.line().x(function(t){return e(t.x)}).y(function(e){return t(e.y)}).interpolate(this.get("interpolation"))}.property("xScale","yScale"),d3Line2:function(){var e=this.get("xScale"),t=this.get("yScale2");return d3.svg.line().x(function(t){return e(t.x)}).y(function(e){return t(e.y)}).interpolate(this.get("interpolation"))}.property("xScale","yScale2"),xAxisFormat:function(){return d3.time.format("%B %Y")}.property(),xTickValues:function(){return this.get("dates")}.property("dates"),yAxisFormat:function(){return d3.format(".00")}.property(),colors:function(){var e=d3.scale.category10();return e.domain(this.get("seriesNames")),e}.property("seriesNames"),_updateData:function(e,t,s){var n=d3.select("#"+this.get("elementId")).select(".inner"),a=this.get("colors"),r=n.select(s).selectAll("path").data(e,function(e){return e.name});r.enter().append("path").attr("class","timeseries_line"),r.attr("d",function(e){return t(e.values)}).style("stroke",function(e){return a(e.name)}),r.exit().remove()},_updateChart:function(){this._updateData(this.get("data"),this.get("d3Line"),".lines"),this._updateData(this.get("data2"),this.get("d3Line2"),".lines2"),this._updateLegend()},onChartChange:function(){"inDOM"===this.state&&this._updateChart()}.observes("data","d3Line","seriesNames","xScale","yScale","yScale2"),_updateLegend:function(){var e=this.get("seriesNames"),t=this.get("colors"),s=0,n=25,a=10;this.get("legendRight")&&(s=this.get("innerWidth"),n=10,a=6);var r={x:s,y:0,spacer:n,margin:5,font:a},i=d3.select("#"+this.get("elementId")).select(".inner").select(".legend");i.selectAll("g").remove();var o=i.append("g").attr("class","timeseries_legend").attr("x",r.x).attr("y",r.y).attr("transform","translate("+r.x+","+r.y+")"),l=o.selectAll(".legend_panel");l.data(e,function(e){return e}).enter().append("g").attr("class","legend_panel").each(function(e,s){var n=d3.select(this);n.append("rect").attr("x",r.spacer).attr("y",s*(r.spacer+r.margin)).attr("width",r.spacer).attr("height",r.spacer).style("fill",function(){return t(e)}),n.append("text").attr("x",2*r.spacer+r.font/4).attr("y",(s+1)*(r.spacer+r.margin)-r.margin-r.spacer/2+r.font/2).style("fill",function(){return t(e)}).attr("font-family","monospace").text(function(e){return e
})})}})}),define("flea-app/controllers/session/gene",["exports","ember","../../utils/utils"],function(e,t,s){"use strict";e["default"]=t["default"].Controller.extend({metrics:["dNdS","Turnover","Entropy"],selectedMetric:"dNdS",markPositive:!0,selectedTimepointIdx:0,playing:!1,needs:["application","session"],currentPath:function(){var e=this.get("controllers.application.baseURL"),t=this.get("controllers.application.currentPath"),s=this.get("controllers.session.session_id");return t=t.replace("session",s).replace(".","/"),e+t}.property("controllers.application.baseURL","controllers.application.currentPath","controllers.session.session_id"),labels:function(){var e=this.get("selectedMetric");return"dNdS"===e?["Mean dS","Mean dN"]:[e]}.property("selectedMetric"),getRate:function(e,t){var s=e.map(function(e){return e.rates.map(function(e){return e[t]})});return s},meanDS:function(){var e=this.get("model.rates.sortedRates");return this.getRate(e,0)}.property("model.rates.sortedRates.[].[]"),meanDN:function(){var e=this.get("model.rates.sortedRates");return this.getRate(e,1)}.property("model.rates.sortedRates.[].[]"),entropy:function(){var e=this.get("model.rates.sortedRates");return this.getRate(e,4)}.property("model.rates.sortedRates.[].[]"),turnover:function(){var e=this.get("model.turnover.sortedTurnover");return e.map(function(e){return e.turnover})}.property("model.turnover.sortedTurnover"),addCombined:function(){return"Turnover"===this.get("selectedMetric")}.property("selectedMetric"),data1:function(){var e=this.get("selectedMetric");if("Entropy"===e)return this.get("entropy");if("Turnover"===e)return this.get("turnover");if("dNdS"===e)return this.get("meanDS");throw"Invalid metric"}.property("selectedMetric","turnover","entropy","meanDS"),data2:function(){var e=this.get("selectedMetric");return"dNdS"===e?this.get("meanDN"):[]}.property("selectedMetric","turnover","entropy","meanDN"),structureData:function(){var e=this.get("selectedTimepointIdx");e>=this.get("names.length")&&(e=this.get("names.length")-1);var t=this.get("selectedMetric");if("Entropy"===t)return this.get("entropy")[e];if("Turnover"===t)return this.get("turnover")[e];var s=this.get("meanDN"),n=this.get("meanDS"),a=_.zip(s[e],n[e]),r=Math.log(5),i=Math.log(.2),o=a.map(function(e){var t=Math.log(e[0]/e[1]);return t>r?t=r:i>t&&(t=i),t}),l=this.get("model.frequencies.refToFirstAlnCoords"),u=_.map(l,function(e){return o[e]||0});return u}.property("model.frequencies.refToFirstAlnCoords","meanDN","meanDS","entropy","turnover","selectedTimepointIdx","selectedMetric"),timepoints:function(){var e=this.get("model.rates.sortedRates"),t=e.map(function(e){return e.date});return"Turnover"===this.get("selectedMetric")&&t.splice(0,2),t}.property("model.rates.sortedRates.[].[]","selectedMetric"),names:function(){var e=this.get("timepoints"),t=e.map(function(e){return"Combined"===e?e:(s.isString(e)&&(e=s.parse_date(e)),s.format_date(e))});return t}.property("timepoints.@each"),selectedName:function(){return this.get("names")[this.get("selectedTimepointIdx")]}.property("names","selectedTimepointIdx"),positions:function(){return this.get("markPositive")?this.get("model.rates.positiveSelection"):[]}.property("markPositive","model.rates.positiveSelection"),startPlayback:function(){this.set("timer",this.schedule(this.get("nextTimepoint"))),this.set("playing",!0)},stopPlayback:function(){t["default"].run.cancel(this.get("timer")),this.set("playing",!1)}.observes("selectedMetric"),buttonClass:function(){return this.get("playing")?"fa fa-stop":"fa fa-play"}.property("playing"),interval:function(){return 1e3}.property().readOnly(),schedule:function(e){return t["default"].run.later(this,function(){e.apply(this),this.set("timer",this.schedule(e))},this.get("interval"))},nextTimepoint:function(){var e=(this.get("selectedTimepointIdx")+1)%this.get("timepoints.length");this.set("selectedTimepointIdx",e)},actions:{togglePlayback:function(){this.get("playing")?this.stopPlayback():this.startPlayback()}}})}),define("flea-app/controllers/session/neutralization",["exports","ember","../../utils/utils"],function(e,t,s){"use strict";function n(e){return r(100*e)+"%"}function a(e,t,s){return t in e||(e[t]=s),e[t]}var r=d3.format(".2f");e["default"]=t["default"].Controller.extend({mabNames:function(){var e=this.get("model.neutralization"),t=[];for(var s in e)e.hasOwnProperty(s)&&t.push(s);return t.sort(),t}.property("model.neutralization.@each"),mabFeatures:function(){for(var e=this.get("model.neutralization"),t=this.get("seqIdToDate"),s={},n=this.get("mabNames"),r=0;r<n.length;r++){var i=n[r];if(e.hasOwnProperty(i))for(var o=e[i].predictions,l=a(s,i,{}),u=0;u<o.length;u++){var c=o[u];if(c.id in t)for(var h=t[c.id],d=+c.value,p=a(l,h,{}),f=a(p,"features",[]),g=c.features,m=0;m<g.length;m++)f.push({name:g[m],value:d>0})}}return s}.property("mabName.@each","model.neutralization.@each","seqIdToDate"),sortedDates:function(){var e=this.get("model.dates"),t=[];for(var s in e)e.hasOwnProperty(s)&&t.push(new Date(s));return t.sort(function(e,t){return t>e?-1:1}),t}.property("model.dates.@each"),headerNames:function(){var e=this.get("sortedDates"),t=e.map(function(e){return s.format_date(e)});return t.splice(0,0,"mab"),t}.property("sortedDate.@each"),tableData:function(){var e=d3.interpolateRgb("white","red"),t=this.get("mabFeatures"),a=this.get("sortedDates"),r=[];for(var i in t)if(t.hasOwnProperty(i)){var o=[];o.push({value:i,style:"",html:""});for(var l=0;l<a.length;l++){var u=a[l];if(t[i].hasOwnProperty(u)){var c=t[i][u].features,h=0,d=[],p=[];c.length>0&&(d=c.filter(function(e){return e.value}),p=c.filter(function(e){return!e.value}),h=d.length/(d.length+p.length));var f=c.reduce(function(e,t){return t.name in e||(e[t.name]=[0,0]),t.value?e[t.name][1]+=1:e[t.name][0]+=1,e},{}),g=["feature","susceptible","resistant"],m=[];for(var b in f)f.hasOwnProperty(b)&&m.push([b,f[b][0],f[b][1]]);var v=e(h);o.push({value:n(h),style:"background-color: "+v,html:s.htmlTable(m,g)})}}r.push(o)}return r}.property("mabFeature.@each","sortedDate.@each"),seqIdToDate:function(){var e=this.get("model.sequences");return e.reduce(function(e,t){return e[t.id]=t.date,e},{})}.property("model.sequences.@each")})}),define("flea-app/controllers/session/sequences",["exports","ember","../../utils/utils"],function(e,t,s){"use strict";function n(e){for(var t=0;t<e.length;t++){for(var s=e[t].sequences,n=0,a=0;a<s.length;a++)n+=s[a].copyNumber;for(var r=0;r<s.length;r++)s[r].percent=100*s[r].copyNumber/n}return e}function a(e){var t=_.groupBy(e,function(e){return e.sequence}),s=[];for(var n in t)if(t.hasOwnProperty(n)){for(var a=t[n],r=[],i=0,o=0;o<a.length;o++)r.push(a[o].ids[0]),i+=a[o].copyNumber;s.push({sequence:a[0].sequence,ids:r,copyNumber:i})}return s}function r(e){for(var t=0;t<e.length;t++)for(var n=e[t].sequences,a=0;a<n.length;a++)n[a].html=s.htmlTable1D(n[a].ids,["Sequence ID"]);return e}function i(e,t){for(var n=0;n<e.length;n++)for(var a=e[n].sequences,r=0;r<a.length;r++)a[r].highlights=s.regexRanges(t,a[r].sequence);return e}function o(e,t){for(var s=0;s<e.length;s++)for(var n=e[s].sequences,a=0;a<n.length;a++){var r=n[a];n[a].mask=r.sequence.split("").map(function(e,s){return e===t[s]})}return e}var l="N\\-*[^P^-^|]\\-*[ST]\\-*[^P^-^|]";e["default"]=t["default"].ObjectController.extend({_selectedSequences:[],selectedSequences:"empty",_ranges:[[159,200]],_regexValue:l,regexValue:l,regexDefault:l,_regex:"",markPositive:!0,selectedPositions:new t["default"].Set,regex:function(){var e=this.get("regexValue");if(0===e.length)return".^";try{new RegExp(e,"g"),this.set("_regex",e)}catch(t){}return this.get("_regex")}.property("regexValue"),predefinedRegions:[{name:"V1",start:130,stop:156},{name:"V2",start:156,stop:196},{name:"V3",start:295,stop:330},{name:"V4",start:384,stop:418},{name:"V5",start:460,stop:471},{name:"MPER",start:661,stop:683}],refLen:t["default"].computed.alias("model.frequencies.refToLastAlnCoords.length"),alnLen:t["default"].computed.alias("model.frequencies.alnToRefCoords.length"),filterSequenceTypes:function(e,t){return e.filter(function(e){return e.get("type")===t})},observedSequences:function(){var e=this.get("model.sequences");return this.filterSequenceTypes(e,"Observed")}.property("model.sequences.@each"),mrca:function(){var e=this.get("model.sequences");return this.filterSequenceTypes(e,"MRCA")[0]}.property("model.sequences.@each"),toSlices:function(e,t){return t.map(function(t){return e.slice(t[0],t[1])}).join("|")},mrcaSlice:function(){var e=this.get("mrca"),t=this.get("alnRanges");return this.toSlices(e.sequence,t)}.property("mrca","alnRanges"),groupedSequences:function(){var e=this,t=e.get("selectedSequences");"empty"===t&&(t=this.get("observedSequences"));var l=[],u=this.get("alnRanges"),c=this.get("mrcaSlice"),h=_.groupBy(t,function(e){return e.get("date")}),d=function(t){var s=e.toSlices(t.sequence,u);return{sequence:s,copyNumber:t.copyNumber,ids:[t.id]}};for(var p in h)if(h.hasOwnProperty(p)){var f=h[p].map(d);f=a(f),f.sort(function(e,t){return t.copyNumber-e.copyNumber}),l.push({date:new Date(p),sequences:f})}return l.sort(function(e,t){return e.date-t.date}),l.forEach(function(e){e.date=s.format_date(e.date)}),l=n(l),l=r(l),l=i(l,this.get("regex")),l=o(l,c)}.property("alnRanges","mrcaSlice","selectedSequences.@each","regex"),ranges:function(e,t){arguments.length>1&&this.set("_ranges",t);var s=this.get("_ranges");return s.sort(function(e,t){return e[0]-t[0]}),s}.property("ranges"),alnRanges:function(){var e=this.get("ranges");s.checkRanges(e,this.get("refLen"));var t=this.get("model.frequencies.refToFirstAlnCoords"),n=this.get("model.frequencies.refToLastAlnCoords"),a=e.map(function(e){var a=s.transformIndex(e[0],t,!1),r=s.transformIndex(e[1],n,!0);return[a,r]});return s.checkRanges(a,this.get("alnLen")),a}.property("ranges","model.frequencies.refToFirstAlnCoords","model.frequencies.refToLastAlnCoords"),aaTrajectories:function(){var e=this.get("selectedSequences");"empty"===e&&(e=this.get("observedSequences"));var t=this.get("selectedPositions").toArray().sort(function(e,t){return e-t});if(0===t.length)return[];for(var s={},n={},a=0;a<e.length;a++){var r=e[a],i=t.map(function(e){return r.sequence[e]}).join("");s.hasOwnProperty(i)||(s[i]={}),s[i].hasOwnProperty(r.date)||(s[i][r.date]=0),s[i][r.date]+=r.copyNumber,n.hasOwnProperty(r.date)||(n[r.date]=0),n[r.date]+=r.copyNumber}var o=[];for(var l in s)if(s.hasOwnProperty(l)){var u=[];for(var c in n)if(n.hasOwnProperty(c)){var h=0;s[l].hasOwnProperty(c)&&(h=s[l][c]/n[c]),u.push({x:new Date(c),y:h})}o.push({name:l,values:u})}if(o.length>10){for(var d=[],p=0;p<o.length;p++){var f=o[p],g=_.max(f.values.map(function(e){return e.y}));d.push({name:f.name,max:g})}d.sort(function(e,t){return t.max-e.max});for(var m=_.partition(d.map(function(e){return e.name}),function(e,t){return 9>t}),b=m[0],v=_.partition(o,function(e){return _.includes(b,e.name)}),x=v[0],y=v[1],I=y[0].values,T=1;T<y.length;T++)for(var R=y[T].values,S=0;S<R.length;S++)I[S].y+=R[S].y;x.push({name:"other",values:I}),o=x}return o}.property("selectedPositions.[]","selectedSequences.@each"),actions:{doRegex:function(){this.set("regexValue",this.get("_regexValue"))},resetRegex:function(){this.set("_regexValue",this.get("regexDefault")),this.set("regexValue",this.get("regexDefault"))},finalizeSelection:function(){this.set("selectedSequences",this.get("_selectedSequences"))},updateAlnRange:function(e,t){s.checkRange(t,this.get("alnLen"));var n=(this.get("alnRanges"),this.get("model.frequencies.alnToRefCoords")),a=this.get("ranges"),r=a.slice(0);r[e]=[s.transformIndex(t[0],n,!1),s.transformIndex(t[1],n,!0)],r.sort(function(e,t){return e[0]-t[0]}),this.set("ranges",r)},setRanges:function(e){s.checkRanges(e,this.get("refLen")),this.set("ranges",e)},addRange:function(e){s.checkRange(e,this.get("refLen"));var t=this.get("ranges").slice(0);t.push(e),this.set("ranges",t)},rmRange:function(e){var t=this.get("ranges");this.set("ranges",t.filter(function(t,s){return s!==e}))}}})}),define("flea-app/controllers/session/trajectory",["exports","ember"],function(e,t){"use strict";function s(e,t,s){if(1===s.length)return n(e,t,s[0]);if(1===t.length)return a(e,t[0],s);throw"Must use either single region or single metric"}function n(e,t,s){for(var n=[],a=0;a<t.length;a++){for(var r=t[a],i={name:r},o=[],l=0;l<e.length;l++)if(r===e[l].Segment){var u={x:e[l].Date,y:e[l][s]};o.push(u)}o.sort(function(e,t){return e.x-t.x}),i.values=o,n.push(i)}return n}function a(e,t,s){for(var n=[],a=0;a<s.length;a++){for(var r=s[a],i={name:r},o=[],l=0;l<e.length;l++)if(t===e[l].Segment){var u={x:e[l].Date,y:e[l][r]};o.push(u)}o.sort(function(e,t){return e.x-t.x}),i.values=o,n.push(i)}return n}e["default"]=t["default"].ObjectController.extend({regions:["gp160","signal","c1","v1","v2","c2","v3","c3","v4","c4","v5","c5","fusion","gp41ecto","mper","gp41endo"],selectedRegions:["gp160"],evoMetrics:["ds_divergence","dn_divergence","total_divergence","ds_diversity","dn_diversity","total_diversity"],selectedEvoMetrics:["ds_divergence","dn_divergence","total_divergence","total_diversity"],phenoMetrics:["Length","PNGS","IsoelectricPoint"],selectedPhenoMetrics:["Length","PNGS"],multipleRegions:function(){var e=this.get("selectedEvoMetrics.length")>1||this.get("selectedPhenoMetrics.length")>1;return e?!1:!0}.property("selectedEvoMetrics.length","selectedPhenoMetrics.length"),multipleMetrics:function(){var e=this.get("selectedRegions.length")>1;return e?!1:!0}.property("selectedRegions.length"),evoData:function(){var e=this.get("model"),t=this.get("selectedRegions"),n=this.get("selectedEvoMetrics");return s(e,t,n)}.property("model","selectedRegions.@each","selectedEvoMetrics.@each"),_phenoData:function(e){var t=this.get("model"),n=this.get("selectedRegions"),r=this.get("selectedPhenoMetrics");return n.length>1?s(t,n,r):r.length>1?a(t,n[0],[r[e]]):a(t,n[0],r)},phenoData:function(){var e=this._phenoData(0);return e}.property("model","selectedRegions.@each","selectedPhenoMetrics.@each"),phenoData2:function(){var e=[];return this.get("selectedPhenoMetrics.length")>1&&(e=this._phenoData(1)),e}.property("model","selectedRegions.@each","selectedPhenoMetrics.@each")})}),define("flea-app/controllers/session/trees",["exports","ember","../../utils/utils"],function(e,t,s){"use strict";e["default"]=t["default"].Controller.extend({_selectedGenomicRegion:"",_selectedTimePoint:"",_selectedDistanceMeasure:"",linkeToSelection:!0,showDates:!0,sortState:"ascending",spaceState:0,nestedTrees:function(){for(var e=this.get("model.trees"),t={},n=0;n<e.length;n++){var a=e[n];a.region in t||(t[a.region]={});var r=a.date;"Combined"!==r&&(r=s.format_date(a.date)),r in t[a.region]||(t[a.region][r]={}),a.distance in t[a.region][r]||(t[a.region][r][a.distance]=a.tree)}return t}.property("model.trees.@each"),genomicRegions:function(){var e=this.get("nestedTrees");return Object.keys(e)}.property("nestedTrees"),timePoints:function(){var e=this.get("nestedTrees"),t=this.get("selectedGenomicRegion"),s=Object.keys(e[t]),n=s.indexOf("Combined");return n>0&&s.splice(0,0,s.splice(n,1)[0]),s}.property("nestedTrees","selectedGenomicRegion"),distanceMeasures:function(){var e=this.get("nestedTrees"),t=this.get("selectedGenomicRegion"),s=this.get("selectedTimePoint");return Object.keys(e[t][s])}.property("nestedTrees","selectedGenomicRegion","selectedTimePoint"),handleSelection:function(e,t,s,n){return void 0===n?_.includes(e,this.get(t))||this.set(t,e[0]):_.includes(e,n)?this.set(t,n):this.set(t,e[0]),this.get(t)},selectedGenomicRegion:function(e,t){return this.handleSelection(this.get("genomicRegions"),"_selectedGenomicRegion",e,t)}.property("genomicRegions"),selectedTimePoint:function(e,t){return this.handleSelection(this.get("timePoints"),"_selectedTimePoint",e,t)}.property("timePoints"),selectedDistanceMeasure:function(e,t){return this.handleSelection(this.get("distanceMeasures"),"_selectedDistanceMeasure",e,t)}.property("distanceMeasures"),tree:function(){var e=this.get("selectedGenomicRegion"),t=this.get("selectedTimePoint"),s=this.get("selectedDistanceMeasure"),n=this.get("nestedTrees")[e][t][s];return n}.property("nestedTrees","selectedGenomicRegion","selectedTimePoints","selectedDistanceMeasure"),seqIdToDate:function(){var e=this.get("model.sequences");return e.reduce(function(e,t){return e[t.id]=t.date,e},{})}.property("model.sequences.@each"),actions:{setSortState:function(e){this.set("sortState",e)},setSpaceState:function(e){this.set("spaceState",e)}}})}),define("flea-app/helpers/amino-acid",["exports","ember"],function(e,t){"use strict";e["default"]=t["default"].Handlebars.makeBoundHelper(function(e,s,n){var a=e.split("").map(Handlebars.Utils.escapeExpression),r=0,i=a.map(function(e,t){var a="";r<s.length&&t===s[r][0]&&(a+="<span class = 'pngs'>"),e=e.toUpperCase();var i="";return"|"===e?i='"seperator"':(i="aa aa"+e,n&&n[t]&&(i+=" match","-"!==e&&(e=".")),i='"'+i+'"'),a+="<span class="+i+">"+e+"</span>",r<s.length&&t===s[r][1]&&(a+="</span>",r++),a});return new t["default"].Handlebars.SafeString(i.join(""))})}),define("flea-app/helpers/format-percent",["exports","ember"],function(e,t){"use strict";var s=d3.format(">5.2f");e["default"]=t["default"].Handlebars.makeBoundHelper(function(e){var n=Handlebars.Utils.escapeExpression(e);return new t["default"].Handlebars.SafeString(s(n))})}),define("flea-app/helpers/get-name",["exports","ember","ember-cli-multiselect/helpers/get-name"],function(e,t,s){"use strict";e["default"]=s["default"]}),define("flea-app/initializers/export-application-global",["exports","ember","../config/environment"],function(e,t,s){"use strict";function n(e,n){var a=t["default"].String.classify(s["default"].modulePrefix);s["default"].exportApplicationGlobal&&(window[a]=n)}e.initialize=n,e["default"]={name:"export-application-global",initialize:n}}),define("flea-app/initializers/inject-store",["exports","flea-app/models/store"],function(e,t){"use strict";e["default"]={name:"inject-store",initialize:function(e,s){s.register("store:main",t["default"]),s.inject("route","store","store:main"),s.inject("controller","store","store:main")}}}),define("flea-app/models/frequency-object",["exports","ember","../utils/utils"],function(e,t,s){"use strict";e["default"]=t["default"].Object.extend({data:[],alnToRefCoords:function(){var e=this.get("data"),t=[];for(var n in e)e.hasOwnProperty(n)&&t.push([s.zeroIndex(parseInt(n)),s.zeroIndex(parseInt(e[n].HXB2))]);return t.sort(function(e,t){return e[0]-t[0]}),t.map(function(e){return e[1]})}.property("data.@each"),refToFirstAlnCoords:function(){for(var e=this.get("alnToRefCoords"),t=e[e.length-1]+1,s=new Array(t),n=0,a=0;a<s.length;a++){for(;e[n]<a;)n+=1;s[a]=n}return s}.property("alnToRefCoords"),refToLastAlnCoords:function(){for(var e=this.get("alnToRefCoords"),t=e[e.length-1]+1,s=new Array(t),n=0,a=0;a<s.length;a++){for(;e[n]<=a&&e[n+1]<=a;)n+=1;s[a]=n}return s}.property("alnToRefCoords")})}),define("flea-app/models/store",["exports","ember"],function(e,t){"use strict";var s={};e["default"]=t["default"].Object.extend({find:function(e,t){var n=t+e;if(s[n])return s[n];var a=this.container.lookup("adapter:"+e);return a.find(t).then(function(e){return s[n]=e,e})}})}),define("flea-app/router",["exports","ember","./config/environment"],function(e,t,s){"use strict";var n=t["default"].Router.extend({location:s["default"].locationType,baseURL:s["default"].baseURL,rootURL:"/"});n.map(function(){this.route("session",{path:"/:session_id"},function(){this.route("trajectory",{path:"/trajectory"}),this.route("gene",{path:"/gene"}),this.route("sequences",{path:"/sequences"}),this.route("trees",{path:"/trees"}),this.route("neutralization",{path:"/neutralization"})})}),e["default"]=n}),define("flea-app/routes/application",["exports","ember"],function(e,t){"use strict";e["default"]=t["default"].Route.extend({setupController:function(e,t){this._super(e,t),e.set("baseURL",this.router.get("baseURL")),e.set("rootURL",this.router.get("rootURL"))}})}),define("flea-app/routes/session",["exports","ember"],function(e,t){"use strict";e["default"]=t["default"].Route.extend({model:function(e){return{session_id:e.session_id}}})}),define("flea-app/routes/session/gene",["exports","ember"],function(e,t){"use strict";e["default"]=t["default"].Route.extend({model:function(){var e=this.modelFor("session").session_id;return t["default"].RSVP.hash({rates:this.store.find("rates",e),structure:this.store.find("structure",e),frequencies:this.store.find("frequencies",e),turnover:this.store.find("turnover",e)})}})}),define("flea-app/routes/session/index",["exports","ember"],function(e,t){"use strict";e["default"]=t["default"].Route.extend({redirect:function(){this.transitionTo("session.trajectory")}})}),define("flea-app/routes/session/neutralization",["exports","ember"],function(e,t){"use strict";e["default"]=t["default"].Route.extend({model:function(){var e=this.modelFor("session").session_id;return t["default"].RSVP.hash({neutralization:this.store.find("neutralization",e),sequences:this.store.find("sequences",e),dates:this.store.find("dates",e)})}})}),define("flea-app/routes/session/sequences",["exports","ember"],function(e,t){"use strict";e["default"]=t["default"].Route.extend({model:function(){var e=this.modelFor("session").session_id;return t["default"].RSVP.hash({sequences:this.store.find("sequences",e),frequencies:this.store.find("frequencies",e),rates:this.store.find("rates",e)})}})}),define("flea-app/routes/session/trajectory",["exports","ember"],function(e,t){"use strict";e["default"]=t["default"].Route.extend({model:function(){var e=this.modelFor("session").session_id;return this.store.find("trajectory",e)}})}),define("flea-app/routes/session/trees",["exports","ember"],function(e,t){"use strict";e["default"]=t["default"].Route.extend({model:function(){var e=this.modelFor("session").session_id;return t["default"].RSVP.hash({trees:this.store.find("trees",e),sequences:this.store.find("sequences",e)})}})}),define("flea-app/templates/application",["exports","ember"],function(e,t){"use strict";e["default"]=t["default"].Handlebars.template(function(e,s,n,a,r){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,t["default"].Handlebars.helpers),r=r||{};var i;i=n._triageMustache.call(s,"outlet",{hash:{},hashTypes:{},hashContexts:{},contexts:[s],types:["ID"],data:r}),r.buffer.push(i||0===i?i:"")})}),define("flea-app/templates/components/alignment-overview",["exports","ember"],function(e,t){"use strict";e["default"]=t["default"].Handlebars.template(function(e,s,n,a,r){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,t["default"].Handlebars.helpers),r=r||{},r.buffer.push('<g class="labels"></g>\n<g class="main">\n   <g class="track"></g>\n   <g class="insertions"></g>\n   <g class="selected"></g>\n   <g class="positive"></g>\n   <g class="brush"></g>\n   <g class="ranges"></g>\n</g>\n<g class="axis"></g>\n')})}),define("flea-app/templates/components/color-table",["exports","ember"],function(e,t){"use strict";e["default"]=t["default"].Handlebars.template(function(e,s,n,a,r){function i(e,t){var s,a="";return t.buffer.push("\n      <td>"),s=n._triageMustache.call(e,"h",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("</td>\n      "),a}function o(e,t){var s,a="";return t.buffer.push("\n    <tr>\n      "),s=n.each.call(e,"elt","in","row",{hash:{},hashTypes:{},hashContexts:{},inverse:p.noop,fn:p.program(4,l,t),contexts:[e,e,e],types:["ID","ID","ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\n    </tr>\n    "),a}function l(e,t){var s,a,r,i="";return t.buffer.push("\n      <td "),t.buffer.push(d(n["bind-attr"].call(e,{hash:{style:"elt.style"},hashTypes:{style:"ID"},hashContexts:{style:e},contexts:[],types:[],data:t}))),t.buffer.push(">\n        "),a=n["bootstrap-popover"]||e&&e["bootstrap-popover"],r={hash:{title:"",dataContent:"elt.html"},hashTypes:{title:"STRING",dataContent:"ID"},hashContexts:{title:e,dataContent:e},inverse:p.noop,fn:p.program(5,u,t),contexts:[],types:[],data:t},s=a?a.call(e,r):f.call(e,"bootstrap-popover",r),(s||0===s)&&t.buffer.push(s),t.buffer.push("\n      </td>\n    "),i}function u(e,t){var s,a="";return t.buffer.push("\n        "),s=n._triageMustache.call(e,"elt.value",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\n        "),a}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,t["default"].Handlebars.helpers),r=r||{};var c,h="",d=this.escapeExpression,p=this,f=n.helperMissing;return r.buffer.push('<table class="table table-hover table-condensed">\n  <thead>\n    <tr>\n      '),c=n.each.call(s,"h","in","header",{hash:{},hashTypes:{},hashContexts:{},inverse:p.noop,fn:p.program(1,i,r),contexts:[s,s,s],types:["ID","ID","ID"],data:r}),(c||0===c)&&r.buffer.push(c),r.buffer.push("\n    </tr>\n  </thead>\n  <tbody>\n    "),c=n.each.call(s,"row","in","data",{hash:{},hashTypes:{},hashContexts:{},inverse:p.noop,fn:p.program(3,o,r),contexts:[s,s,s],types:["ID","ID","ID"],data:r}),(c||0===c)&&r.buffer.push(c),r.buffer.push("\n</table>\n"),h})}),define("flea-app/templates/components/gene-plots",["exports","ember"],function(e,t){"use strict";e["default"]=t["default"].Handlebars.template(function(e,s,n,a,r){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,t["default"].Handlebars.helpers),r=r||{};var i="",o=this.escapeExpression;return r.buffer.push("<g "),r.buffer.push(o(n["bind-attr"].call(s,{hash:{transform:"innerGroupTransform",height:"height"},hashTypes:{transform:"STRING",height:"STRING"},hashContexts:{transform:s,height:s},contexts:[],types:[],data:r}))),r.buffer.push(' class="inner">\n</g>'),i})}),define("flea-app/templates/components/multi-select",["exports","ember"],function(e,t){"use strict";e["default"]=t["default"].Handlebars.template(function(e,s,n,a,r){function i(e,t){var s,a="";return t.buffer.push("Loading "),s=n._triageMustache.call(e,"name",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("..."),a}function o(e,t){var s,a="";return t.buffer.push("\n    "),s=n._triageMustache.call(e,"name",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),s=n["if"].call(e,"showRecordNum",{hash:{},hashTypes:{},hashContexts:{},inverse:m.noop,fn:m.program(4,l,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),a}function l(e,t){var s,a="";return t.buffer.push(" ("),s=n._triageMustache.call(e,"selectedRecordsNum",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push(")"),a}function u(e,t){var s,a,r,i="";return t.buffer.push('\n  <form role="form">\n    <div class="combo-box form-group">\n      '),t.buffer.push(v((a=n.input||e&&e.input,r={hash:{type:"text","class":"form-control",value:"searchText",placeholder:"Type to search",autofocus:"autofocus"},hashTypes:{type:"STRING","class":"STRING",value:"ID",placeholder:"STRING",autofocus:"STRING"},hashContexts:{type:e,"class":e,value:e,placeholder:e,autofocus:e},contexts:[],types:[],data:t},a?a.call(e,r):b.call(e,"input",r)))),t.buffer.push('\n      <br/>\n      <div class="toolbar">\n          <button '),t.buffer.push(v(n.action.call(e,"selectAll",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t}))),t.buffer.push(' type="button" class="btn btn-default">Select All</button>\n          <button '),t.buffer.push(v(n.action.call(e,"deselectAll",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t}))),t.buffer.push(' type="button" class="btn btn-default">De-select All</button>\n      </div>\n      <br/>\n\n      '),s=n["if"].call(e,"noRecords",{hash:{},hashTypes:{},hashContexts:{},inverse:m.program(9,h,t),fn:m.program(7,c,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\n\n      "),s=n["if"].call(e,"submit",{hash:{},hashTypes:{},hashContexts:{},inverse:m.noop,fn:m.program(12,p,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\n    </div>\n  </form>\n  "),i}function c(e,t){t.buffer.push('\n      <p><span class="label label-warning">Note:</span> No records matching your filter. Try * to get some records</p>\n      ')}function h(e,t){var s,a="";return t.buffer.push('\n      <table class="table table-hovered table-striped">\n      <tbody>\n        '),s=n.each.call(e,"r","in","filteredRecords",{hash:{},hashTypes:{},hashContexts:{},inverse:m.noop,fn:m.program(10,d,t),contexts:[e,e,e],types:["ID","ID","ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\n      </tbody>\n      </table>\n      "),a}function d(e,t){var s,a,r="";return t.buffer.push("\n        <tr>\n          <td>"),t.buffer.push(v((s=n.input||e&&e.input,a={hash:{type:"checkbox",name:"r.selected",checked:"r.selected"},hashTypes:{type:"STRING",name:"STRING",checked:"ID"},hashContexts:{type:e,name:e,checked:e},contexts:[],types:[],data:t},s?s.call(e,a):b.call(e,"input",a)))),t.buffer.push("</td>\n          <td><span "),t.buffer.push(v(n.action.call(e,"select","r",{hash:{},hashTypes:{},hashContexts:{},contexts:[e,e],types:["STRING","ID"],data:t}))),t.buffer.push(">"),t.buffer.push(v((s=n["get-name"]||e&&e["get-name"],a={hash:{},hashTypes:{},hashContexts:{},contexts:[e,e],types:["ID","ID"],data:t},s?s.call(e,"r","displayName",a):b.call(e,"get-name","r","displayName",a)))),t.buffer.push("</span></td>\n        </tr>\n        "),r}function p(e,t){var s,a="";return t.buffer.push('\n        <div class="actionbar">\n          <button '),t.buffer.push(v(n.action.call(e,"cancel",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t}))),t.buffer.push(' type="button" class="btn btn-danger">Cancel</button>\n          <button '),t.buffer.push(v(n.action.call(e,"submit",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t}))),t.buffer.push(' type="button" class="btn btn-primary">'),s=n._triageMustache.call(e,"submitText",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("</button>\n        </div>\n      "),a}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,t["default"].Handlebars.helpers),r=r||{};var f,g="",m=this,b=n.helperMissing,v=this.escapeExpression;return r.buffer.push("<div "),r.buffer.push(v(n["bind-attr"].call(s,{hash:{"class":":multi-select isOpen:open"},hashTypes:{"class":"STRING"},hashContexts:{"class":s},contexts:[],types:[],data:r}))),r.buffer.push('>\n  <button class="btn btn-default dropdown-toggle" '),r.buffer.push(v(n.action.call(s,"toggleOpen",{hash:{},hashTypes:{},hashContexts:{},contexts:[s],types:["STRING"],data:r}))),r.buffer.push(" "),r.buffer.push(v(n["bind-attr"].call(s,{hash:{disabled:"isLoading"},hashTypes:{disabled:"STRING"},hashContexts:{disabled:s},contexts:[],types:[],data:r}))),r.buffer.push(">\n    "),f=n["if"].call(s,"isLoading",{hash:{},hashTypes:{},hashContexts:{},inverse:m.program(3,o,r),fn:m.program(1,i,r),contexts:[s],types:["ID"],data:r}),(f||0===f)&&r.buffer.push(f),r.buffer.push(' <span class="caret"></span></button>\n  '),f=n["if"].call(s,"isOpen",{hash:{},hashTypes:{},hashContexts:{},inverse:m.noop,fn:m.program(6,u,r),contexts:[s],types:["ID"],data:r}),(f||0===f)&&r.buffer.push(f),r.buffer.push("\n</div>\n"),g})}),define("flea-app/templates/components/pv-wrapper",["exports","ember"],function(e,t){"use strict";e["default"]=t["default"].Handlebars.template(function(e,s,n,a,r){function i(e,t){var s,a,r,i="";return t.buffer.push('\n<div class="row">\n  <div class="col-xs-1 flea-label">\n    <label for=Near>Near</label>\n  </div>\n  <div class="col-xs-10 vcenter">\n    '),t.buffer.push(d((a=n.input||e&&e.input,r={hash:{type:"range",id:"near",min:"0.1",value:"slabNear",max:"slabFar",step:"0.1"},hashTypes:{type:"STRING",id:"STRING",min:"STRING",value:"ID",max:"ID",step:"STRING"},hashContexts:{type:e,id:e,min:e,value:e,max:e,step:e},contexts:[],types:[],data:t},a?a.call(e,r):h.call(e,"input",r)))),t.buffer.push('\n  </div>\n  <div class="col-xs-1 flea-value">\n    <output for=near id=far>'),s=n._triageMustache.call(e,"slabNear",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push('</output>\n  </div>\n</div>\n\n<div class="row">\n  <div class="col-xs-1 flea-label">\n    <label for=far>Far</label>\n  </div>\n\n  <div class="col-xs-10">\n    '),t.buffer.push(d((a=n.input||e&&e.input,r={hash:{type:"range",id:"far",min:"slabNear",value:"slabFar",max:400,step:"0.1"},hashTypes:{type:"STRING",id:"STRING",min:"ID",value:"ID",max:"INTEGER",step:"STRING"},hashContexts:{type:e,id:e,min:e,value:e,max:e,step:e},contexts:[],types:[],data:t},a?a.call(e,r):h.call(e,"input",r)))),t.buffer.push('\n  </div>\n\n  <div class="col-xs-1 flea-value">\n    <output for=far id=far>'),s=n._triageMustache.call(e,"slabFar",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("</output>\n  </div>\n</div>\n"),i
}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,t["default"].Handlebars.helpers),r=r||{};var o,l,u,c="",h=n.helperMissing,d=this.escapeExpression,p=this;return r.buffer.push('<div class="input-group input-group-sm">\n  <span class="input-group-addon">\n    <label>Label coordinates</label>\n    '),r.buffer.push(d((l=n.input||s&&s.input,u={hash:{type:"checkbox",name:"shouldlabel",checked:"shouldLabel"},hashTypes:{type:"STRING",name:"STRING",checked:"ID"},hashContexts:{type:s,name:s,checked:s},contexts:[],types:[],data:r},l?l.call(s,u):h.call(s,"input",u)))),r.buffer.push('\n  </span>\n  <span class="input-group-addon">\n    <label>Fog</label>\n    '),r.buffer.push(d((l=n.input||s&&s.input,u={hash:{type:"checkbox",name:"fog",checked:"fog"},hashTypes:{type:"STRING",name:"STRING",checked:"ID"},hashContexts:{type:s,name:s,checked:s},contexts:[],types:[],data:r},l?l.call(s,u):h.call(s,"input",u)))),r.buffer.push('\n  </span>\n  <span class="input-group-addon">\n    <label>Spin</label>\n    '),r.buffer.push(d((l=n.input||s&&s.input,u={hash:{type:"checkbox",name:"spin",checked:"spin"},hashTypes:{type:"STRING",name:"STRING",checked:"ID"},hashContexts:{type:s,name:s,checked:s},contexts:[],types:[],data:r},l?l.call(s,u):h.call(s,"input",u)))),r.buffer.push('\n  </span>\n  <span class="input-group-addon">\n    <label>Slab mode</label>\n    '),r.buffer.push(d(n.view.call(s,"bootstrap-multiselect",{hash:{multiple:!1,content:"slabModes",selection:"slabMode",allowMultiple:!1,id:"slab_mode"},hashTypes:{multiple:"BOOLEAN",content:"ID",selection:"ID",allowMultiple:"BOOLEAN",id:"STRING"},hashContexts:{multiple:s,content:s,selection:s,allowMultiple:s,id:s},contexts:[s],types:["ID"],data:r}))),r.buffer.push("\n  </span>\n</div>\n\n\n"),o=n["if"].call(s,"showSlabControls",{hash:{},hashTypes:{},hashContexts:{},inverse:p.noop,fn:p.program(1,i,r),contexts:[s],types:["ID"],data:r}),(o||0===o)&&r.buffer.push(o),r.buffer.push("\n"),c})}),define("flea-app/templates/components/range-selector",["exports","ember"],function(e,t){"use strict";e["default"]=t["default"].Handlebars.template(function(e,s,n,a,r){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,t["default"].Handlebars.helpers),r=r||{};var i,o,l="",u=n.helperMissing,c=this.escapeExpression;return r.buffer.push(c((i=n.input||s&&s.input,o={hash:{"class":"bar",type:"range",id:"rangeinput",value:"selectedIdx",min:0,max:"maxIdx",step:1},hashTypes:{"class":"STRING",type:"STRING",id:"STRING",value:"ID",min:"INTEGER",max:"ID",step:"INTEGER"},hashContexts:{"class":s,type:s,id:s,value:s,min:s,max:s,step:s},contexts:[],types:[],data:r},i?i.call(s,o):u.call(s,"input",o)))),r.buffer.push("\n"),l})}),define("flea-app/templates/components/sequence-range-controls",["exports","ember"],function(e,t){"use strict";e["default"]=t["default"].Handlebars.template(function(e,s,n,a,r){function i(e,t){var s,a="";return t.buffer.push('\n<div class="input-group-btn">\n  <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown">Predefined\n    <span class="caret"></span></button>\n  <ul class="dropdown-menu">\n    '),s=n.each.call(e,"region","in","predefinedRegions",{hash:{},hashTypes:{},hashContexts:{},inverse:p.noop,fn:p.program(2,o,t),contexts:[e,e,e],types:["ID","ID","ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\n  </ul>\n</div>\n"),a}function o(e,t){var s,a="";return t.buffer.push("\n    <li>\n      <a "),t.buffer.push(d(n.action.call(e,"setRange","region.start","region.stop",{hash:{},hashTypes:{},hashContexts:{},contexts:[e,e,e],types:["STRING","ID","ID"],data:t}))),t.buffer.push(' class="seq-predef">\n        '),s=n._triageMustache.call(e,"region.name",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\n      </a>\n    </li>\n    "),a}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,t["default"].Handlebars.helpers),r=r||{};var l,u,c,h="",d=this.escapeExpression,p=this,f=n.helperMissing;return r.buffer.push('<div class="input-group-btn">\n  <button '),r.buffer.push(d(n.action.call(s,"moveRanges",-5,{hash:{},hashTypes:{},hashContexts:{},contexts:[s,s],types:["STRING","INTEGER"],data:r}))),r.buffer.push(' type="button" class="btn btn-default btn-sm" title="Jump left">\n    <i class="fa fa-fast-backward" ></i>\n  </button>\n</div>\n<div class="input-group-btn">\n  <button '),r.buffer.push(d(n.action.call(s,"moveRanges",-1,{hash:{},hashTypes:{},hashContexts:{},contexts:[s,s],types:["STRING","INTEGER"],data:r}))),r.buffer.push(' type="button" class="btn btn-default btn-sm" title="Move left">\n    <i class="fa fa-backward" ></i>\n  </button>\n</div>\n<span class="input-group-addon">Range</span>\n'),r.buffer.push(d((u=n.input||s&&s.input,c={hash:{type:"string","class":"form-control",value:"rangeText",placeholder:"HXB2 coordinate range (e.g. 160-200)",autofocus:"autofocus","focus-out":"display","insert-newline":"display"},hashTypes:{type:"STRING","class":"STRING",value:"ID",placeholder:"STRING",autofocus:"STRING","focus-out":"STRING","insert-newline":"STRING"},hashContexts:{type:s,"class":s,value:s,placeholder:s,autofocus:s,"focus-out":s,"insert-newline":s},contexts:[],types:[],data:r},u?u.call(s,c):f.call(s,"input",c)))),r.buffer.push('\n<div class="input-group-btn">\n  <button '),r.buffer.push(d(n.action.call(s,"moveRanges",1,{hash:{},hashTypes:{},hashContexts:{},contexts:[s,s],types:["STRING","INTEGER"],data:r}))),r.buffer.push(' type="button" class="btn btn-default btn-sm" title="Move right">\n    <i class="fa fa-forward" ></i>\n  </button>\n</div>\n<div class="input-group-btn">\n  <button '),r.buffer.push(d(n.action.call(s,"moveRanges",5,{hash:{},hashTypes:{},hashContexts:{},contexts:[s,s],types:["STRING","INTEGER"],data:r}))),r.buffer.push(' type="button" class="btn btn-default btn-sm" title="Jump right">\n    <i class="fa fa-fast-forward" ></i>\n  </button>\n</div>\n'),l=n["if"].call(s,"predefinedRegions",{hash:{},hashTypes:{},hashContexts:{},inverse:p.noop,fn:p.program(1,i,r),contexts:[s],types:["ID"],data:r}),(l||0===l)&&r.buffer.push(l),r.buffer.push("\n"),h})}),define("flea-app/templates/components/sequence-viewer",["exports","ember"],function(e,t){"use strict";e["default"]=t["default"].Handlebars.template(function(e,s,n,a,r){function i(e,t){var s="";return t.buffer.push("\n    <span "),t.buffer.push(m(n["bind-attr"].call(e,{hash:{"class":"elt._class"},hashTypes:{"class":"ID"},hashContexts:{"class":e},contexts:[],types:[],data:t}))),t.buffer.push("\n          "),t.buffer.push(m(n["bind-attr"].call(e,{hash:{"data-coord":"elt.dataCoord"},hashTypes:{"data-coord":"ID"},hashContexts:{"data-coord":e},contexts:[],types:[],data:t}))),t.buffer.push("\n          "),t.buffer.push(m(n.action.call(e,"togglePosition","elt.dataCoord",{hash:{},hashTypes:{},hashContexts:{},contexts:[e,e],types:["STRING","ID"],data:t}))),t.buffer.push(">\n      "),t.buffer.push(m(n._triageMustache.call(e,"elt.html",{hash:{unescaped:"true"},hashTypes:{unescaped:"STRING"},hashContexts:{unescaped:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\n    </span>\n    "),s}function o(e,t){var s,a="";return t.buffer.push('\n    <tr>\n      <td class="seq-cell">'),s=n._triageMustache.call(e,"date",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push('</td>\n      <td class="seq-cell">\n        <ul class="list-unstyled">\n          '),s=n.each.call(e,"seq","in","sequences",{hash:{},hashTypes:{},hashContexts:{},inverse:v.noop,fn:v.program(4,l,t),contexts:[e,e,e],types:["ID","ID","ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push('\n        </ul>\n      </td>\n      <td class="seq-cell">\n        <ul class="list-unstyled">\n          '),s=n.each.call(e,"seq","in","sequences",{hash:{},hashTypes:{},hashContexts:{},inverse:v.noop,fn:v.program(6,u,t),contexts:[e,e,e],types:["ID","ID","ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push('\n        </ul>\n      </td>\n      <td class="seq-cell">\n        <ul class="list-unstyled">\n          '),s=n.each.call(e,"seq","in","sequences",{hash:{},hashTypes:{},hashContexts:{},inverse:v.noop,fn:v.program(9,h,t),contexts:[e,e,e],types:["ID","ID","ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\n        </ul>\n      </td>\n    </tr>\n    "),a}function l(e,t){var s,a,r="";return t.buffer.push("\n          <li>"),t.buffer.push(m((s=n["amino-acid"]||e&&e["amino-acid"],a={hash:{},hashTypes:{},hashContexts:{},contexts:[e,e,e],types:["ID","ID","ID"],data:t},s?s.call(e,"seq.sequence","seq.highlights","seq.mask",a):b.call(e,"amino-acid","seq.sequence","seq.highlights","seq.mask",a)))),t.buffer.push("</li>\n          "),r}function u(e,t){var s,a,r,i="";return t.buffer.push("\n          <li>\n            "),a=n["bootstrap-popover"]||e&&e["bootstrap-popover"],r={hash:{title:"",dataContent:"seq.html",placement:"right"},hashTypes:{title:"STRING",dataContent:"ID",placement:"STRING"},hashContexts:{title:e,dataContent:e,placement:e},inverse:v.noop,fn:v.program(7,c,t),contexts:[],types:[],data:t},s=a?a.call(e,r):b.call(e,"bootstrap-popover",r),(s||0===s)&&t.buffer.push(s),t.buffer.push("\n          </li>\n          "),i}function c(e,t){var s,a="";return t.buffer.push("\n            "),s=n._triageMustache.call(e,"seq.copyNumber",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\n            "),a}function h(e,t){var s,a,r="";return t.buffer.push("\n          <li>"),t.buffer.push(m((s=n["format-percent"]||e&&e["format-percent"],a={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t},s?s.call(e,"seq.percent",a):b.call(e,"format-percent","seq.percent",a)))),t.buffer.push("%</li>\n          "),r}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,t["default"].Handlebars.helpers),r=r||{};var d,p,f,g="",m=this.escapeExpression,b=n.helperMissing,v=this;return r.buffer.push('<table class="table table-hover table-condensed nostretch sequence-viewer" id="sequence-viewer">\n  <thead>\n    <td class="seq-cell">HXB2 coord.<br>\n      <div>\n      <button title="Select positive sites" type="button" class="btn btn-default btn-sm" '),r.buffer.push(m(n.action.call(s,"selectPositiveClicked",{hash:{},hashTypes:{},hashContexts:{},contexts:[s],types:["STRING"],data:r}))),r.buffer.push('><i class="fa fa-plus"></i></button>\n      <button title="Clear sites" type="button" class="btn btn-default btn-sm" '),r.buffer.push(m(n.action.call(s,"clearPositions",{hash:{},hashTypes:{},hashContexts:{},contexts:[s],types:["STRING"],data:r}))),r.buffer.push('><i class="fa fa-remove"></i></button>\n      </div>\n    </td>\n    <td class="seq-cell ref-coords">\n    '),d=n.each.call(s,"elt","in","refHTML",{hash:{},hashTypes:{},hashContexts:{},inverse:v.noop,fn:v.program(1,i,r),contexts:[s,s,s],types:["ID","ID","ID"],data:r}),(d||0===d)&&r.buffer.push(d),r.buffer.push('\n    </td>\n    <td class="seq-cell"></td>\n    <td class="seq-cell"></td>\n  </thead>\n  <tbody>\n    <tr>\n      <td class="seq-cell">MRCA</td>\n      <td class="seq-cell"><span class="mrca">'),r.buffer.push(m((p=n["amino-acid"]||s&&s["amino-acid"],f={hash:{},hashTypes:{},hashContexts:{},contexts:[s],types:["ID"],data:r},p?p.call(s,"mrca",f):b.call(s,"amino-acid","mrca",f)))),r.buffer.push('</span></td>\n      <td class="seq-cell"></td>\n      <td class="seq-cell"></td>\n    </tr>\n    '),d=n.each.call(s,"groupedSequences",{hash:{},hashTypes:{},hashContexts:{},inverse:v.noop,fn:v.program(3,o,r),contexts:[s],types:["ID"],data:r}),(d||0===d)&&r.buffer.push(d),r.buffer.push("\n  </tbody>\n</table>\n"),g})}),define("flea-app/templates/components/timeseries-plot",["exports","ember"],function(e,t){"use strict";e["default"]=t["default"].Handlebars.template(function(e,s,n,a,r){function i(e,t){var s,a,r="";return t.buffer.push("\n  "),t.buffer.push(d((s=n["graph-axis"]||e&&e["graph-axis"],a={hash:{"class":"y axis",transform:"yAxisTransform",orient:"right",scale:"yScale2",tickFormat:"yAxisFormat"},hashTypes:{"class":"STRING",transform:"ID",orient:"STRING",scale:"ID",tickFormat:"ID"},hashContexts:{"class":e,transform:e,orient:e,scale:e,tickFormat:e},contexts:[],types:[],data:t},s?s.call(e,a):h.call(e,"graph-axis",a)))),t.buffer.push("\n  "),r}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,t["default"].Handlebars.helpers),r=r||{};var o,l,u,c="",h=n.helperMissing,d=this.escapeExpression,p=this;return r.buffer.push("<g "),r.buffer.push(d(n["bind-attr"].call(s,{hash:{transform:"innerGroupTransform"},hashTypes:{transform:"STRING"},hashContexts:{transform:s},contexts:[],types:[],data:r}))),r.buffer.push(' class="inner">\n\n  '),r.buffer.push(d((l=n["graph-axis"]||s&&s["graph-axis"],u={hash:{"class":"x axis",transform:"xAxisTransform",scale:"xScale",tickFormat:"xAxisFormat",tickValues:"xTickValues",tickSize:12,tickPadding:3,rotate:45},hashTypes:{"class":"STRING",transform:"ID",scale:"ID",tickFormat:"ID",tickValues:"ID",tickSize:"INTEGER",tickPadding:"INTEGER",rotate:"INTEGER"},hashContexts:{"class":s,transform:s,scale:s,tickFormat:s,tickValues:s,tickSize:s,tickPadding:s,rotate:s},contexts:[],types:[],data:r},l?l.call(s,u):h.call(s,"graph-axis",u)))),r.buffer.push("\n\n  "),r.buffer.push(d((l=n["graph-axis"]||s&&s["graph-axis"],u={hash:{"class":"y axis",orient:"left",scale:"yScale",tickFormat:"yAxisFormat"},hashTypes:{"class":"STRING",orient:"STRING",scale:"ID",tickFormat:"ID"},hashContexts:{"class":s,orient:s,scale:s,tickFormat:s},contexts:[],types:[],data:r},l?l.call(s,u):h.call(s,"graph-axis",u)))),r.buffer.push("\n\n  "),o=n["if"].call(s,"data2",{hash:{},hashTypes:{},hashContexts:{},inverse:p.noop,fn:p.program(1,i,r),contexts:[s],types:["ID"],data:r}),(o||0===o)&&r.buffer.push(o),r.buffer.push('\n\n  <g class="lines"></g>\n\n  <g class="lines2"></g>\n\n  <g class="legend"></g>\n\n</g>\n'),c})}),define("flea-app/templates/session",["exports","ember"],function(e,t){"use strict";e["default"]=t["default"].Handlebars.template(function(e,s,n,a,r){function i(e,t){t.buffer.push("Evolutionary trajectory")}function o(e,t){t.buffer.push("Gene-wide information")}function l(e,t){t.buffer.push("Amino-acid sequences")}function u(e,t){t.buffer.push("Trees")}function c(e,t){t.buffer.push("Neutralization")}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,t["default"].Handlebars.helpers),r=r||{};var h,d,p,f="",g=this,m=n.helperMissing;return r.buffer.push("<div class='container' id='allofit'>\n  <ul class=\"nav nav-tabs\">\n    <li>"),d=n["link-to"]||s&&s["link-to"],p={hash:{"data-toggle":"tab"},hashTypes:{"data-toggle":"STRING"},hashContexts:{"data-toggle":s},inverse:g.noop,fn:g.program(1,i,r),contexts:[s,s],types:["STRING","ID"],data:r},h=d?d.call(s,"session.trajectory","model.session_id",p):m.call(s,"link-to","session.trajectory","model.session_id",p),(h||0===h)&&r.buffer.push(h),r.buffer.push("</li>\n    <li>"),d=n["link-to"]||s&&s["link-to"],p={hash:{"data-toggle":"tab"},hashTypes:{"data-toggle":"STRING"},hashContexts:{"data-toggle":s},inverse:g.noop,fn:g.program(3,o,r),contexts:[s,s],types:["STRING","ID"],data:r},h=d?d.call(s,"session.gene","model.session_id",p):m.call(s,"link-to","session.gene","model.session_id",p),(h||0===h)&&r.buffer.push(h),r.buffer.push("</li>\n    <li>"),d=n["link-to"]||s&&s["link-to"],p={hash:{"data-toggle":"tab"},hashTypes:{"data-toggle":"STRING"},hashContexts:{"data-toggle":s},inverse:g.noop,fn:g.program(5,l,r),contexts:[s,s],types:["STRING","ID"],data:r},h=d?d.call(s,"session.sequences","model.session_id",p):m.call(s,"link-to","session.sequences","model.session_id",p),(h||0===h)&&r.buffer.push(h),r.buffer.push("</li>\n    <li>"),d=n["link-to"]||s&&s["link-to"],p={hash:{"data-toggle":"tab"},hashTypes:{"data-toggle":"STRING"},hashContexts:{"data-toggle":s},inverse:g.noop,fn:g.program(7,u,r),contexts:[s,s],types:["STRING","ID"],data:r},h=d?d.call(s,"session.trees","model.session_id",p):m.call(s,"link-to","session.trees","model.session_id",p),(h||0===h)&&r.buffer.push(h),r.buffer.push("</li>\n    <li>"),d=n["link-to"]||s&&s["link-to"],p={hash:{"data-toggle":"tab"},hashTypes:{"data-toggle":"STRING"},hashContexts:{"data-toggle":s},inverse:g.noop,fn:g.program(9,c,r),contexts:[s,s],types:["STRING","ID"],data:r},h=d?d.call(s,"session.neutralization","model.session_id",p):m.call(s,"link-to","session.neutralization","model.session_id",p),(h||0===h)&&r.buffer.push(h),r.buffer.push("</li>\n  </ul>\n\n"),h=n._triageMustache.call(s,"outlet",{hash:{},hashTypes:{},hashContexts:{},contexts:[s],types:["ID"],data:r}),(h||0===h)&&r.buffer.push(h),r.buffer.push("\n\n</div>\n"),f})}),define("flea-app/templates/session/error",["exports","ember"],function(e,t){"use strict";e["default"]=t["default"].Handlebars.template(function(e,s,n,a,r){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,t["default"].Handlebars.helpers),r=r||{},r.buffer.push('<div class="error-pane">\n  <div class="error-title">\n    Something went wrong.\n  </div>\n  <div class="error-message">\n    This message will be more informative in the future. Maybe some data is missing?\n  </div>\n</div>\n')})}),define("flea-app/templates/session/gene",["exports","ember"],function(e,t){"use strict";e["default"]=t["default"].Handlebars.template(function(e,s,n,a,r){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,t["default"].Handlebars.helpers),r=r||{};var i,o,l,u="",c=n.helperMissing,h=this.escapeExpression;return r.buffer.push('<div class="pv-viewer">\n'),r.buffer.push(h((o=n["pv-wrapper"]||s&&s["pv-wrapper"],l={hash:{structure:"model.structure",data:"structureData"},hashTypes:{structure:"ID",data:"ID"},hashContexts:{structure:s,data:s},contexts:[],types:[],data:r},o?o.call(s,l):c.call(s,"pv-wrapper",l)))),r.buffer.push('\n</div>\n\n<div class="form-horizontal control-group">\n  <div class="col-sm-1">\n  <button '),r.buffer.push(h(n.action.call(s,"togglePlayback",{hash:{},hashTypes:{},hashContexts:{},contexts:[s],types:["STRING"],data:r}))),r.buffer.push(' type="button" class="btn btn-default btn-sm" title="Toggle playback">\n    <i '),r.buffer.push(h(n["bind-attr"].call(s,{hash:{"class":"buttonClass"},hashTypes:{"class":"STRING"},hashContexts:{"class":s},contexts:[],types:[],data:r}))),r.buffer.push('></i>\n  </button>\n  </div>\n  <div class="col-sm-9">\n    '),r.buffer.push(h((o=n["range-selector"]||s&&s["range-selector"],l={hash:{values:"timepoints",names:"names",selectedIdx:"selectedTimepointIdx"},hashTypes:{values:"ID",names:"ID",selectedIdx:"ID"},hashContexts:{values:s,names:s,selectedIdx:s},contexts:[],types:[],data:r},o?o.call(s,l):c.call(s,"range-selector",l)))),r.buffer.push('\n  </div>\n  <div class="col-sm-2 flea-value">\n    <output>'),i=n._triageMustache.call(s,"selectedName",{hash:{},hashTypes:{},hashContexts:{},contexts:[s],types:["ID"],data:r}),(i||0===i)&&r.buffer.push(i),r.buffer.push('</output>\n  </div>\n</div>\n\n<div class="row">\n  <div class="col-sm-12">\n    <div class="input-group input-group-sm">\n      <span class="input-group-addon">\n        <label for="evo_regions">Metrics(s) to plot</label>\n        '),r.buffer.push(h(n.view.call(s,"bootstrap-multiselect",{hash:{multiple:!1,content:"metrics",selection:"selectedMetric",allowMultiple:!1,id:"gene_metrics"},hashTypes:{multiple:"BOOLEAN",content:"ID",selection:"ID",allowMultiple:"BOOLEAN",id:"STRING"},hashContexts:{multiple:s,content:s,selection:s,allowMultiple:s,id:s},contexts:[s],types:["ID"],data:r}))),r.buffer.push('\n      </span>\n      <span class="input-group-addon">\n        <label>Mark positively selected sites</label>\n        '),r.buffer.push(h((o=n.input||s&&s.input,l={hash:{type:"checkbox",name:"markPositive",checked:"markPositive"},hashTypes:{type:"STRING",name:"STRING",checked:"ID"},hashContexts:{type:s,name:s,checked:s},contexts:[],types:[],data:r},o?o.call(s,l):c.call(s,"input",l)))),r.buffer.push('\n      </span>\n    </div>\n  </div>\n</div>\n\n\n<div class="row">\n  <div class="col-sm-12">\n    '),r.buffer.push(h((o=n["gene-plots"]||s&&s["gene-plots"],l={hash:{width:1140,names:"names",data1:"data1",data2:"data2",positions:"positions",labels:"labels",url:"currentPath",addCombined:"addCombined"},hashTypes:{width:"INTEGER",names:"ID",data1:"ID",data2:"ID",positions:"ID",labels:"ID",url:"ID",addCombined:"ID"},hashContexts:{width:s,names:s,data1:s,data2:s,positions:s,labels:s,url:s,addCombined:s},contexts:[],types:[],data:r},o?o.call(s,l):c.call(s,"gene-plots",l)))),r.buffer.push("\n  </div>\n</div>\n"),u})}),define("flea-app/templates/session/loading",["exports","ember"],function(e,t){"use strict";e["default"]=t["default"].Handlebars.template(function(e,s,n,a,r){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,t["default"].Handlebars.helpers),r=r||{},r.buffer.push('<div class="loading-pane">\n  <div class="loading-message">\n    Fetching data from server\n  </div>\n\n  <div class="spinner">\n    <div class="rect1"></div>\n    <div class="rect2"></div>\n    <div class="rect3"></div>\n    <div class="rect4"></div>\n  <div class="rect5"></div>\n  </div>\n</div>\n')})}),define("flea-app/templates/session/neutralization",["exports","ember"],function(e,t){"use strict";e["default"]=t["default"].Handlebars.template(function(e,s,n,a,r){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,t["default"].Handlebars.helpers),r=r||{};var i,o,l="",u=n.helperMissing,c=this.escapeExpression;return r.buffer.push('<div class="row" id="neutralization">\n  <div class="col-md-12">\n    '),r.buffer.push(c((i=n["color-table"]||s&&s["color-table"],o={hash:{header:"headerNames",data:"tableData"},hashTypes:{header:"ID",data:"ID"},hashContexts:{header:s,data:s},contexts:[],types:[],data:r},i?i.call(s,o):u.call(s,"color-table",o)))),r.buffer.push("\n  </div>\n</div>\n\n"),l})}),define("flea-app/templates/session/sequences",["exports","ember"],function(e,t){"use strict";e["default"]=t["default"].Handlebars.template(function(e,s,n,a,r){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,t["default"].Handlebars.helpers),r=r||{};var i,o,l="",u=n.helperMissing,c=this.escapeExpression;return r.buffer.push('<div class = "row">\n  <div class = "col-md-12">\n    <div class="input-group input-group-sm">\n      '),r.buffer.push(c((i=n["sequence-range-controls"]||s&&s["sequence-range-controls"],o={hash:{ranges:"ranges",seqLen:"refLen",predefinedRegions:"predefinedRegions"},hashTypes:{ranges:"ID",seqLen:"ID",predefinedRegions:"ID"},hashContexts:{ranges:s,seqLen:s,predefinedRegions:s},contexts:[],types:[],data:r},i?i.call(s,o):u.call(s,"sequence-range-controls",o)))),r.buffer.push("\n      "),r.buffer.push(c((i=n.input||s&&s.input,o={hash:{type:"text","class":"form-control",value:"_regexValue",placeholder:"Pattern to highlight",autofocus:"autofocus","focus-out":"doRegex","insert-newline":"doRegex"},hashTypes:{type:"STRING","class":"STRING",value:"ID",placeholder:"STRING",autofocus:"STRING","focus-out":"STRING","insert-newline":"STRING"},hashContexts:{type:s,"class":s,value:s,placeholder:s,autofocus:s,"focus-out":s,"insert-newline":s},contexts:[],types:[],data:r},i?i.call(s,o):u.call(s,"input",o)))),r.buffer.push('\n      <div class="input-group-btn">\n        <button '),r.buffer.push(c(n.action.call(s,"resetRegex",{hash:{},hashTypes:{},hashContexts:{},contexts:[s],types:["STRING"],data:r}))),r.buffer.push(' type="button"\n          class="btn btn-default btn-sm" title="Reset regexp">\n          <i class="fa fa-undo"></i>\n        </button>\n      </div>\n      <span class="input-group-addon">\n        Mark positively selected sites\n        '),r.buffer.push(c((i=n.input||s&&s.input,o={hash:{type:"checkbox",name:"markPositive",checked:"markPositive"},hashTypes:{type:"STRING",name:"STRING",checked:"ID"},hashContexts:{type:s,name:s,checked:s},contexts:[],types:[],data:r},i?i.call(s,o):u.call(s,"input",o)))),r.buffer.push('\n      </span>\n    </div>\n    <div class="input-group input-group-sm">\n      '),r.buffer.push(c((i=n["multi-select"]||s&&s["multi-select"],o={hash:{content:"observedSequences",name:"Sequences",selected:"_selectedSequences",displayName:"id",viewLimit:100,submit:"finalizeSelection",submitOnClose:!0},hashTypes:{content:"ID",name:"STRING",selected:"ID",displayName:"STRING",viewLimit:"INTEGER",submit:"STRING",submitOnClose:"BOOLEAN"},hashContexts:{content:s,name:s,selected:s,displayName:s,viewLimit:s,submit:s,submitOnClose:s},contexts:[],types:[],data:r},i?i.call(s,o):u.call(s,"multi-select",o)))),r.buffer.push('\n    </div>\n  </div>\n</div>\n<br>\n<div class = "row">\n  <div class = "col-md-12">\n    '),r.buffer.push(c((i=n["timeseries-plot"]||s&&s["timeseries-plot"],o={hash:{width:800,height:250,data:"aaTrajectories",legendRight:!0,ymin:0,interpolation:"monotone"},hashTypes:{width:"INTEGER",height:"INTEGER",data:"ID",legendRight:"BOOLEAN",ymin:"INTEGER",interpolation:"STRING"},hashContexts:{width:s,height:s,data:s,legendRight:s,ymin:s,interpolation:s},contexts:[],types:[],data:r},i?i.call(s,o):u.call(s,"timeseries-plot",o)))),r.buffer.push('\n  </div>\n</div>\n\n<div class = "row">\n  <div class = "col-md-12">\n    '),r.buffer.push(c((i=n["alignment-overview"]||s&&s["alignment-overview"],o={hash:{alnRanges:"alnRanges",alnLen:"alnLen",markPositive:"markPositive",positiveSelection:"model.rates.positiveSelection",selectedPositions:"selectedPositions",predefinedRegions:"predefinedRegions",alnToRefCoords:"model.frequencies.alnToRefCoords",refToAlnCoords:"model.frequencies.refToFirstAlnCoords",updateRange:"updateAlnRange",setRanges:"setRanges",addRange:"addRange",rmRange:"rmRange"},hashTypes:{alnRanges:"ID",alnLen:"ID",markPositive:"ID",positiveSelection:"ID",selectedPositions:"ID",predefinedRegions:"ID",alnToRefCoords:"ID",refToAlnCoords:"ID",updateRange:"STRING",setRanges:"STRING",addRange:"STRING",rmRange:"STRING"},hashContexts:{alnRanges:s,alnLen:s,markPositive:s,positiveSelection:s,selectedPositions:s,predefinedRegions:s,alnToRefCoords:s,refToAlnCoords:s,updateRange:s,setRanges:s,addRange:s,rmRange:s},contexts:[],types:[],data:r},i?i.call(s,o):u.call(s,"alignment-overview",o)))),r.buffer.push('\n  </div>\n</div>\n\n<div class = "row">\n  <div class = "col-md-12">\n    '),r.buffer.push(c((i=n["sequence-viewer"]||s&&s["sequence-viewer"],o={hash:{groupedSequences:"groupedSequences",alnRanges:"alnRanges",mrca:"mrcaSlice",selectedPositions:"selectedPositions",markPositive:"markPositive",alnToRef:"model.frequencies.alnToRefCoords",positiveSelection:"model.rates.positiveSelection",regex:"regex",selectDefault:!0},hashTypes:{groupedSequences:"ID",alnRanges:"ID",mrca:"ID",selectedPositions:"ID",markPositive:"ID",alnToRef:"ID",positiveSelection:"ID",regex:"ID",selectDefault:"BOOLEAN"},hashContexts:{groupedSequences:s,alnRanges:s,mrca:s,selectedPositions:s,markPositive:s,alnToRef:s,positiveSelection:s,regex:s,selectDefault:s},contexts:[],types:[],data:r},i?i.call(s,o):u.call(s,"sequence-viewer",o)))),r.buffer.push("\n  </div>\n</div>\n"),l})}),define("flea-app/templates/session/trajectory",["exports","ember"],function(e,t){"use strict";e["default"]=t["default"].Handlebars.template(function(e,s,n,a,r){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,t["default"].Handlebars.helpers),r=r||{};var i,o,l="",u=this.escapeExpression,c=n.helperMissing;return r.buffer.push('<div class="form-inline">\n  <div class="form-group">\n    <label for="evo_regions">Region(s) to plot</label>\n  </div>\n  <div class="form-group">\n    '),r.buffer.push(u(n.view.call(s,"bootstrap-multiselect",{hash:{multiple:!0,content:"regions",selection:"selectedRegions",allowMultiple:"multipleRegions",id:"evo_regions"},hashTypes:{multiple:"BOOLEAN",content:"ID",selection:"ID",allowMultiple:"ID",id:"STRING"},hashContexts:{multiple:s,content:s,selection:s,allowMultiple:s,id:s},contexts:[s],types:["ID"],data:r}))),r.buffer.push('\n  </div>\n\n  <div class="form-group">\n    <label for="evo_metrics">Evolutionary metrics</label>\n  </div>\n  <div class="form-group">\n    '),r.buffer.push(u(n.view.call(s,"bootstrap-multiselect",{hash:{multiple:!0,content:"evoMetrics",selection:"selectedEvoMetrics",allowMultiple:"multipleMetrics",id:"evo_metrics"},hashTypes:{multiple:"BOOLEAN",content:"ID",selection:"ID",allowMultiple:"ID",id:"STRING"},hashContexts:{multiple:s,content:s,selection:s,allowMultiple:s,id:s},contexts:[s],types:["ID"],data:r}))),r.buffer.push("\n  </div>\n\n</div>\n\n<div class = 'row'>\n  <div class = 'col-md-12'>\n    "),r.buffer.push(u((i=n["timeseries-plot"]||s&&s["timeseries-plot"],o={hash:{width:900,height:350,data:"evoData",ymin:0},hashTypes:{width:"INTEGER",height:"INTEGER",data:"ID",ymin:"INTEGER"},hashContexts:{width:s,height:s,data:s,ymin:s},contexts:[],types:[],data:r},i?i.call(s,o):c.call(s,"timeseries-plot",o)))),r.buffer.push('\n  </div>\n</div>\n\n<div class="form-inline">\n  <div class="form-group">\n    <label for="_pheno_metrics">Phenotype metrics</label>\n  </div>\n  <div class="form-group">\n    '),r.buffer.push(u(n.view.call(s,"bootstrap-multiselect",{hash:{multiple:!0,content:"phenoMetrics",selection:"selectedPhenoMetrics",allowMultiple:"multipleMetrics",maxSelected:2,id:"_pheno_metrics"},hashTypes:{multiple:"BOOLEAN",content:"ID",selection:"ID",allowMultiple:"ID",maxSelected:"INTEGER",id:"STRING"},hashContexts:{multiple:s,content:s,selection:s,allowMultiple:s,maxSelected:s,id:s},contexts:[s],types:["ID"],data:r}))),r.buffer.push("\n  </div>\n</div>\n\n<div class = 'row'>\n  <div class = 'col-md-12'>\n    "),r.buffer.push(u((i=n["timeseries-plot"]||s&&s["timeseries-plot"],o={hash:{width:900,height:350,data:"phenoData",data2:"phenoData2"},hashTypes:{width:"INTEGER",height:"INTEGER",data:"ID",data2:"ID"},hashContexts:{width:s,height:s,data:s,data2:s},contexts:[],types:[],data:r},i?i.call(s,o):c.call(s,"timeseries-plot",o)))),r.buffer.push("\n  </div>\n</div>\n"),l})}),define("flea-app/templates/session/trees",["exports","ember"],function(e,t){"use strict";e["default"]=t["default"].Handlebars.template(function(e,s,n,a,r){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,t["default"].Handlebars.helpers),r=r||{};var i,o,l="",u=this.escapeExpression,c=n.helperMissing;return r.buffer.push('<div class="row">\n  <div class="col-md-12">\n    <div class="input-group input-group-sm">\n      <span class="input-group-addon">\n        Genomic region\n      </span>\n      '),r.buffer.push(u(n.view.call(s,"select",{hash:{"class":"form-control",content:"genomicRegions",value:"selectedGenomicRegion"},hashTypes:{"class":"STRING",content:"ID",value:"ID"},hashContexts:{"class":s,content:s,value:s},contexts:[s],types:["STRING"],data:r}))),r.buffer.push('\n      <span class="input-group-addon">\n        Time point\n      </span>\n      '),r.buffer.push(u(n.view.call(s,"select",{hash:{"class":"form-control",content:"timePoints",value:"selectedTimePoint"},hashTypes:{"class":"STRING",content:"ID",value:"ID"},hashContexts:{"class":s,content:s,value:s},contexts:[s],types:["STRING"],data:r}))),r.buffer.push('\n      <span class="input-group-addon">\n        Distance measure\n      </span>\n      '),r.buffer.push(u(n.view.call(s,"select",{hash:{"class":"form-control",content:"distanceMeasures",value:"selectedDistanceMeasure"},hashTypes:{"class":"STRING",content:"ID",value:"ID"},hashContexts:{"class":s,content:s,value:s},contexts:[s],types:["STRING"],data:r}))),r.buffer.push('\n      <span class="input-group-addon"\n            title="Update the tree when the region selected in the sequence panel changes">\n        Link to selected region\n        '),r.buffer.push(u((i=n.input||s&&s.input,o={hash:{type:"checkbox",checked:"linkeToSelection"},hashTypes:{type:"STRING",checked:"ID"},hashContexts:{type:s,checked:s},contexts:[],types:[],data:r},i?i.call(s,o):c.call(s,"input",o)))),r.buffer.push('\n      </span>\n      <span class="input-group-addon">\n        Show dates\n        '),r.buffer.push(u((i=n.input||s&&s.input,o={hash:{type:"checkbox",checked:"showDates"},hashTypes:{type:"STRING",checked:"ID"},hashContexts:{type:s,checked:s},contexts:[],types:[],data:r},i?i.call(s,o):c.call(s,"input",o)))),r.buffer.push('\n      </span>\n    </div>\n  </div>\n</div>\n\n<div class=\'row\'>\n  <div class=\'col-md-12\'>\n    <div class="btn-toolbar" role="toolbar">\n      <div class="btn-group">\n        <button type="button" class="btn btn-default btn-sm" id="expand_spacing"\n                title="Expand spacing" '),r.buffer.push(u(n.action.call(s,"setSpaceState","expand",{hash:{},hashTypes:{},hashContexts:{},contexts:[s,s],types:["STRING","STRING"],data:r}))),r.buffer.push('>\n          <i class="fa fa-expand" ></i>\n        </button>\n        <button type="button" class="btn btn-default btn-sm" id="compress_spacing"\n                title="Compress spacing" '),r.buffer.push(u(n.action.call(s,"setSpaceState","compress",{hash:{},hashTypes:{},hashContexts:{},contexts:[s,s],types:["STRING","STRING"],data:r}))),r.buffer.push('>\n          <i class="fa fa-compress" ></i>\n        </button>\n        <button type="button" class="btn btn-default btn-sm" id="sort_ascending"\n                title="Sort deepest clades to the bottom" '),r.buffer.push(u(n.action.call(s,"setSortState","ascending",{hash:{},hashTypes:{},hashContexts:{},contexts:[s,s],types:["STRING","STRING"],data:r}))),r.buffer.push('>\n          <i class="fa fa-sort-amount-asc" ></i>\n        </button>\n        <button type="button" class="btn btn-default btn-sm" id="sort_descending"\n                title="Sort deepest clades to the top" '),r.buffer.push(u(n.action.call(s,"setSortState","descending",{hash:{},hashTypes:{},hashContexts:{},contexts:[s,s],types:["STRING","STRING"],data:r}))),r.buffer.push('>\n          <i class="fa fa-sort-amount-desc" ></i>\n        </button>\n        <button type="button" class="btn btn-default btn-sm" id="sort_original"\n                title="Restore original order" '),r.buffer.push(u(n.action.call(s,"setSortState","original",{hash:{},hashTypes:{},hashContexts:{},contexts:[s,s],types:["STRING","STRING"],data:r}))),r.buffer.push(">\n          <i class=\"fa fa-sort\" ></i>\n        </button>\n      </div>\n    </div>\n  </div>\n</div>\n\n<div class='row'>\n  <div class='col-md-12' id='_tree_enclosure'>\n    "),r.buffer.push(u((i=n["phylotree-widget"]||s&&s["phylotree-widget"],o={hash:{tree:"tree",seq_ids_to_dates:"seqIdToDate",sortState:"sortState",spaceState:"spaceState",showDates:"showDates"},hashTypes:{tree:"ID",seq_ids_to_dates:"ID",sortState:"ID",spaceState:"ID",showDates:"ID"},hashContexts:{tree:s,seq_ids_to_dates:s,sortState:s,spaceState:s,showDates:s},contexts:[],types:[],data:r},i?i.call(s,o):c.call(s,"phylotree-widget",o)))),r.buffer.push("\n  </div>\n</div>\n"),l
})}),define("flea-app/utils/utils",["exports"],function(e){"use strict";var t=function(e){return Object.prototype.toString.call(e).slice(8,-1)},s=function(e){return"Object"===t(e)},n=function(e){return"String"===t(e)},a=d3.time.format("%Y%m%d").parse,r=d3.time.format("%B %Y"),i=function(e,t){return o(e.map(function(e){return[e]}),t)},o=function(e,t){if(0===e.length)return"<table></table>";var s='<table class="table-striped table table-hover">';if(t){s+="<thead>",s+="<trow>";for(var n=0;n<t.length;n++)s+="<th>",s+=t[n],s+="</th>";s+="</trow>",s+="</thead>"}s+="<tbody>";for(var a=0;a<e.length;a++){s+="<tr>";for(var r=0;r<e[a].length;r++)s+="<td>",s+=e[a][r],s+="</td>";s+="</tr>"}return s+="</tbody>",s+="</table>"},l=function(e,t){for(var s,n=[],a=new RegExp(e,"g");null!==(s=a.exec(t));)n.push([s.index,s.index+s[0].length-1]);return n},u=function(e,t){var s=0;t||(t=function(e){return e});for(var n=0;n<e.length;n++)s+=t(e[n]);return s},c=function(e,t,s){var n;return s&&(e-=1),n=e>=t.length?t[t.length-1]:t[e],s&&(n+=1),n},h=function(e,t){var s=e[0],n=e[1];if(0>s)throw"invalid start position";if(n>t)throw"invalid stop position";if(s>=n)throw"invalid range"},d=function(e,t){for(var s=0;s<e.length;s++)h(e[s],t)},p=function(e){if(0>e)throw"invalid index";return e+1},f=function(e){if(1>e)throw"invalid index";return e-1};e.isDate=s,e.isString=n,e.parse_date=a,e.format_date=r,e.htmlTable1D=i,e.htmlTable=o,e.regexRanges=l,e.sumArray=u,e.transformIndex=c,e.checkRange=h,e.checkRanges=d,e.oneIndex=p,e.zeroIndex=f}),define("flea-app/views/bootstrap-multiselect",["exports","ember"],function(e,t){"use strict";e["default"]=t["default"].Select.extend({allowMultiple:!0,maxSelected:-1,didInsertElement:function(){this.$().multiselect(),this.updateDisabled(),this.updateMultiple()},updateDisabled:function(){var e=this.get("maxSelected");if(e>0){var t=this.get("selection.length");if(t>=e){var s=this.$("option").filter(function(){return!$(this).is(":selected")});s.each(function(){var e=$('input[value="'+$(this).val()+'"]');e.prop("disabled",!0),e.parent("li").addClass("disabled")})}else this.$("option").each(function(){var e=$('input[value="'+$(this).val()+'"]');e.prop("disabled",!1),e.parent("li").removeClass("disabled")})}}.observes("selection.length","maxSelected"),updateMultiple:function(){this.get("allowMultiple")?this.$().attr("multiple","multiple"):this.$().removeAttr("multiple"),this.$().multiselect("rebuild")}.observes("allowMultiple")}),t["default"].Handlebars.helper("bootstrap-multiselect",t["default"].BootstrapMultiselect)}),define("flea-app/config/environment",["ember"],function(e){var t="flea-app";try{var s=t+"/config/environment",n=e["default"].$('meta[name="'+s+'"]').attr("content"),a=JSON.parse(unescape(n));return{"default":a}}catch(r){throw new Error('Could not read config from meta tag with name "'+s+'".')}}),runningTests?require("flea-app/tests/test-helper"):require("flea-app/app")["default"].create({});