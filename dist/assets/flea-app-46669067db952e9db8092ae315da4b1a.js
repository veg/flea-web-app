"use strict"
define("flea-app/adapters/coordinates",["exports","flea-app/config/environment","flea-app/models/coordinates-object"],function(e,t,n){Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.Object.extend({ajax:Ember.inject.service(),find:function(e){var r=t.default.apiURL+"sessions/"+e+"/coordinates"
return this.get("ajax").request(r).then(function(e){return n.default.create({data:e.coordinates})})}})}),define("flea-app/adapters/copynumbers",["exports","flea-app/config/environment"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.Object.extend({ajax:Ember.inject.service(),find:function(e){var n=t.default.apiURL+"sessions/"+e+"/copynumbers"
return this.get("ajax").request(n).then(function(e){for(var t in e)e.hasOwnProperty(t)&&(e[t]=parseInt(e[t]))
return e})}})}),define("flea-app/adapters/dates",["exports","flea-app/config/environment","flea-app/utils/utils"],function(e,t,n){Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.Object.extend({ajax:Ember.inject.service(),find:function(e){var r=t.default.apiURL+"sessions/"+e+"/dates"
return this.get("ajax").request(r).then(function(e){var t={}
for(var r in e)e.hasOwnProperty(r)&&(t[(0,n.parse_date)(r)]=e[r])
return t})}})}),define("flea-app/adapters/divergence",["exports","flea-app/config/environment","flea-app/utils/utils"],function(e,t,n){Object.defineProperty(e,"__esModule",{value:!0})
var r=Ember.Object.extend({date:null,divergence:null}),s=Ember.Object.extend({data:[],sortedDivergence:function(){var e=this.get("data")
e.sort(function(e,t){return e.date-t.date})
for(var t=new Array(e[0].divergence.length).fill(0),n=0;n<e.length;n++)for(var s=0;s<t.length;s++)t[s]=Math.max(t[s],e[n].divergence[s])
var a=r.create({date:"Combined",divergence:t})
return e.unshift(a),e}.property("data")})
e.default=Ember.Object.extend({ajax:Ember.inject.service(),find:function(e){var a=t.default.apiURL+"sessions/"+e+"/divergence"
return this.get("ajax").request(a).then(function(e){var t=[]
delete e.readCount
for(var a in e)t.push(r.create({date:(0,n.parse_date)(a),divergence:e[a]}))
return s.create({data:t})})}})}),define("flea-app/adapters/mds",["exports","flea-app/config/environment"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.Object.extend({ajax:Ember.inject.service(),find:function(e){var n=t.default.apiURL+"sessions/"+e+"/manifold"
return this.get("ajax").request(n).then(function(e){var t=[]
for(var n in e)if(e.hasOwnProperty(n)){var r=e[n]
t.push({name:n,x:r[0],y:r[1]})}return t})}})}),define("flea-app/adapters/neutralization",["exports","flea-app/config/environment"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.Object.extend({ajax:Ember.inject.service(),find:function(e){var n=t.default.apiURL+"sessions/"+e+"/neutralization"
return this.get("ajax").request(n).then(function(e){return e})}})}),define("flea-app/adapters/predefined-regions",["exports","flea-app/config/environment"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.Object.extend({ajax:Ember.inject.service(),find:function(e){var n=t.default.apiURL+"sessions/"+e+"/predefined_regions"
return this.get("ajax").request(n).then(function(e){for(var t=e.regions,n=0;n<t.length;n++)t[n].start-=1
return t})}})}),define("flea-app/adapters/rates",["exports","flea-app/config/environment","flea-app/utils/utils"],function(exports,_environment,_utils){function positive_selection_positions(e){return e.map(function(e,t){return[t,e[2]]}).filter(function(e){return e[1]>=.95}).map(function(e){return e[0]})}Object.defineProperty(exports,"__esModule",{value:!0})
var RateInfo=Ember.Object.extend({date:null,rates:null}),RatesObject=Ember.Object.extend({data:[],exists:!1,sortedRates:function(){var e=this.get("data"),t=e.filter(function(e){return"Combined"!==e.date}),n=e.filter(function(e){return"Combined"===e.date})
return t.sort(function(e,t){return e.date-t.date}),t.splice(0,0,n[0]),t}.property("data.[]"),positiveSelection:function(){return this.get("exists")?this.get("sortedRates").map(function(e){return positive_selection_positions(e.rates)}):[[]]}.property("sortedRates")})
exports.default=Ember.Object.extend({ajax:Ember.inject.service(),find:function find(session_id){var url=_environment.default.apiURL+"sessions/"+session_id+"/rates"
return this.get("ajax").request(url).then(function(result){var new_result=[]
for(var key in result)if(result.hasOwnProperty(key)){var d=key,array=eval(result[key])
"Combined"!==key&&(d=(0,_utils.parse_date)(key)),new_result.push(RateInfo.create({date:d,rates:array}))}return RatesObject.create({data:new_result,exists:!0})},function(){return RatesObject.create()})}})}),define("flea-app/adapters/sequences",["exports","flea-app/config/environment","flea-app/utils/utils","flea-app/models/sequence-object","flea-app/models/sequences-object"],function(e,t,n,r,s){function a(e,t,s){return null!==t&&(t=(0,n.parse_date)(t)),r.default.create({id:e,date:t,sequence:s})}Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.Object.extend({ajax:Ember.inject.service(),find:function(e){var n=t.default.apiURL+"sessions/"+e+"/sequences"
return this.get("ajax").request(n).then(function(e){var t=[],n=[],r=null,o=null
for(var i in e)if(e.hasOwnProperty(i))if("MRCA"!==i)if("Reference"!==i){if("Ancestors"===i){var l=e.Ancestors
for(var d in l)if(l.hasOwnProperty(d)){var u=a(d,null,l[d])
n.push(u)}}if("Observed"===i){var c=e.Observed
for(var p in c)if(c.hasOwnProperty(p)){var f=c[p]
for(var m in f)if(f.hasOwnProperty(m)){var h=a(m,p,f[m])
t.push(h)}}}else{var g=i
if(e[g].hasOwnProperty("Observed")){var v=e[g].Observed
for(var b in v)if(v.hasOwnProperty(b)){var y=a(b,g,v[b])
t.push(y)}}}}else r=a("reference",null,e[i])
else o=a("mrca",null,e[i])
return s.default.create({reference:r,mrca:o,observed:t,ancestors:n})})}})}),define("flea-app/adapters/structure",["exports","flea-app/config/environment"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.Object.extend({ajax:Ember.inject.service(),find:function(){var e=t.default.apiURL+"pdbs/env_structure/"
return this.get("ajax").request(e).then(function(e){return pv.io.pdb(e.data.join("\n"))})}})}),define("flea-app/adapters/trajectory",["exports","flea-app/config/environment","flea-app/utils/utils"],function(e,t,n){Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.Object.extend({ajax:Ember.inject.service(),find:function(e){var r=t.default.apiURL+"sessions/"+e+"/rates_pheno"
return this.get("ajax").request(r).then(function(e){return e.forEach(function(e){e.Date=(0,n.parse_date)(String(e.Date))
for(var t in e)e.hasOwnProperty(t)&&"Segment"!==t&&"Date"!==t&&(e[t]=+e[t])}),e})}})}),define("flea-app/adapters/trees",["exports","flea-app/config/environment"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.Object.extend({ajax:Ember.inject.service(),find:function(e){var n=t.default.apiURL+"sessions/"+e+"/trees"
return this.get("ajax").request(n).then(function(e){var t=_.get(e,"tree")
if(t)return t
if(t=_.get(e,["Combined","all","Maximum Likelihood"]))return t
throw"missing tree"})}})}),define("flea-app/app",["exports","flea-app/resolver","ember-load-initializers","flea-app/config/environment"],function(e,t,n,r){Object.defineProperty(e,"__esModule",{value:!0})
var s=Ember.Application.extend({modulePrefix:r.default.modulePrefix,podModulePrefix:r.default.podModulePrefix,Resolver:t.default});(0,n.default)(s,r.default.modulePrefix),e.default=s}),define("flea-app/components/basic-dropdown",["exports","ember-basic-dropdown/components/basic-dropdown"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}})}),define("flea-app/components/basic-dropdown/content-element",["exports","ember-basic-dropdown/components/basic-dropdown/content-element"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}})}),define("flea-app/components/basic-dropdown/content",["exports","ember-basic-dropdown/components/basic-dropdown/content"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}})}),define("flea-app/components/basic-dropdown/trigger",["exports","ember-basic-dropdown/components/basic-dropdown/trigger"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}})}),define("flea-app/components/c3-chart",["exports","ember-c3/components/c3-chart"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}})}),define("flea-app/components/ember-wormhole",["exports","ember-wormhole/components/ember-wormhole"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}})}),define("flea-app/components/power-select-multiple",["exports","ember-power-select/components/power-select-multiple"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}})}),define("flea-app/components/power-select-multiple/trigger",["exports","ember-power-select/components/power-select-multiple/trigger"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}})}),define("flea-app/components/power-select",["exports","ember-power-select/components/power-select"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}})}),define("flea-app/components/power-select/before-options",["exports","ember-power-select/components/power-select/before-options"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}})}),define("flea-app/components/power-select/options",["exports","ember-power-select/components/power-select/options"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}})}),define("flea-app/components/power-select/placeholder",["exports","ember-power-select/components/power-select/placeholder"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}})}),define("flea-app/components/power-select/power-select-group",["exports","ember-power-select/components/power-select/power-select-group"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}})}),define("flea-app/components/power-select/search-message",["exports","ember-power-select/components/power-select/search-message"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}})}),define("flea-app/components/power-select/trigger",["exports","ember-power-select/components/power-select/trigger"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}})}),define("flea-app/components/range-slider",["exports","ui-slider/components/range-slider"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}})}),define("flea-app/components/ui-slider",["exports","ui-slider/components/ui-slider"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}})})
define("flea-app/helpers/and",["exports","ember-truth-helpers/helpers/and"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}}),Object.defineProperty(e,"and",{enumerable:!0,get:function(){return t.and}})}),define("flea-app/helpers/app-version",["exports","flea-app/config/environment","ember-cli-app-version/utils/regexp"],function(e,t,n){function r(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}
return t.hideSha?s.match(n.versionRegExp)[0]:t.hideVersion?s.match(n.shaRegExp)[0]:s}Object.defineProperty(e,"__esModule",{value:!0}),e.appVersion=r
var s=t.default.APP.version
e.default=Ember.Helper.helper(r)}),define("flea-app/helpers/cancel-all",["exports","ember-concurrency/-helpers"],function(e,t){function n(e){var n=e[0]
return n&&"function"==typeof n.cancelAll||Ember.assert("The first argument passed to the `cancel-all` helper should be a Task or TaskGroup (without quotes); you passed "+n,!1),(0,t.taskHelperClosure)("cancelAll",[n,r])}Object.defineProperty(e,"__esModule",{value:!0}),e.cancelHelper=n
var r="the 'cancel-all' template helper was invoked"
e.default=Ember.Helper.helper(n)}),define("flea-app/helpers/ember-power-select-is-group",["exports","ember-power-select/helpers/ember-power-select-is-group"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}}),Object.defineProperty(e,"emberPowerSelectIsGroup",{enumerable:!0,get:function(){return t.emberPowerSelectIsGroup}})}),define("flea-app/helpers/ember-power-select-is-selected",["exports","ember-power-select/helpers/ember-power-select-is-selected"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}}),Object.defineProperty(e,"emberPowerSelectIsSelected",{enumerable:!0,get:function(){return t.emberPowerSelectIsSelected}})}),define("flea-app/helpers/ember-power-select-true-string-if-present",["exports","ember-power-select/helpers/ember-power-select-true-string-if-present"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}}),Object.defineProperty(e,"emberPowerSelectTrueStringIfPresent",{enumerable:!0,get:function(){return t.emberPowerSelectTrueStringIfPresent}})}),define("flea-app/helpers/eq",["exports","ember-truth-helpers/helpers/equal"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}}),Object.defineProperty(e,"equal",{enumerable:!0,get:function(){return t.equal}})}),define("flea-app/helpers/format-percent",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0})
var t=d3.format(">5.2f")
e.default=Ember.Helper.helper(function(e){var n=e[0],r=Ember.Handlebars.Utils.escapeExpression(n)
return new Ember.String.htmlSafe(t(r))})}),define("flea-app/helpers/gt",["exports","ember-truth-helpers/helpers/gt"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}}),Object.defineProperty(e,"gt",{enumerable:!0,get:function(){return t.gt}})}),define("flea-app/helpers/gte",["exports","ember-truth-helpers/helpers/gte"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}}),Object.defineProperty(e,"gte",{enumerable:!0,get:function(){return t.gte}})}),define("flea-app/helpers/is-array",["exports","ember-truth-helpers/helpers/is-array"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}}),Object.defineProperty(e,"isArray",{enumerable:!0,get:function(){return t.isArray}})}),define("flea-app/helpers/is-equal",["exports","ember-truth-helpers/helpers/is-equal"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}}),Object.defineProperty(e,"isEqual",{enumerable:!0,get:function(){return t.isEqual}})}),define("flea-app/helpers/lt",["exports","ember-truth-helpers/helpers/lt"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}}),Object.defineProperty(e,"lt",{enumerable:!0,get:function(){return t.lt}})}),define("flea-app/helpers/lte",["exports","ember-truth-helpers/helpers/lte"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}}),Object.defineProperty(e,"lte",{enumerable:!0,get:function(){return t.lte}})}),define("flea-app/helpers/not-eq",["exports","ember-truth-helpers/helpers/not-equal"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}}),Object.defineProperty(e,"notEq",{enumerable:!0,get:function(){return t.notEq}})}),define("flea-app/helpers/not",["exports","ember-truth-helpers/helpers/not"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}}),Object.defineProperty(e,"not",{enumerable:!0,get:function(){return t.not}})}),define("flea-app/helpers/or",["exports","ember-truth-helpers/helpers/or"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}}),Object.defineProperty(e,"or",{enumerable:!0,get:function(){return t.or}})}),define("flea-app/helpers/perform",["exports","ember-concurrency/-helpers"],function(e,t){function n(e,n){return(0,t.taskHelperClosure)("perform",e,n)}Object.defineProperty(e,"__esModule",{value:!0}),e.performHelper=n,e.default=Ember.Helper.helper(n)}),define("flea-app/helpers/task",["exports"],function(e){function t(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t]
return n}return Array.from(e)}function n(e){return Array.isArray(e)?e:Array.from(e)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.Helper.helper(function(e){var r=n(e),s=r[0],a=r.slice(1)
return s._curry.apply(s,t(a))})}),define("flea-app/helpers/xor",["exports","ember-truth-helpers/helpers/xor"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}}),Object.defineProperty(e,"xor",{enumerable:!0,get:function(){return t.xor}})}),define("flea-app/initializers/app-version",["exports","ember-cli-app-version/initializer-factory","flea-app/config/environment"],function(e,t,n){Object.defineProperty(e,"__esModule",{value:!0})
var r=n.default.APP,s=r.name,a=r.version
e.default={name:"App Version",initialize:(0,t.default)(s,a)}}),define("flea-app/initializers/container-debug-adapter",["exports","ember-resolver/resolvers/classic/container-debug-adapter"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"container-debug-adapter",initialize:function(){var e=arguments[1]||arguments[0]
e.register("container-debug-adapter:main",t.default),e.inject("container-debug-adapter:main","namespace","application:main")}}}),define("flea-app/initializers/ember-concurrency",["exports","ember-concurrency"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"ember-concurrency",initialize:function(){}}}),define("flea-app/initializers/export-application-global",["exports","flea-app/config/environment"],function(e,t){function n(){var e=arguments[1]||arguments[0]
if(!1!==t.default.exportApplicationGlobal){var n
if("undefined"!=typeof window)n=window
else if("undefined"!=typeof global)n=global
else{if("undefined"==typeof self)return
n=self}var r,s=t.default.exportApplicationGlobal
r="string"==typeof s?s:Ember.String.classify(t.default.modulePrefix),n[r]||(n[r]=e,e.reopen({willDestroy:function(){this._super.apply(this,arguments),delete n[r]}}))}}Object.defineProperty(e,"__esModule",{value:!0}),e.initialize=n,e.default={name:"export-application-global",initialize:n}}),define("flea-app/initializers/inject-store",["exports","flea-app/pods/store/model"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"inject-store",initialize:function(e){e.register("store:main",t.default),e.inject("route","store","store:main"),e.inject("controller","store","store:main")}}}),define("flea-app/initializers/resize",["exports","ember-resize/services/resize","flea-app/config/environment"],function(e,t,n){function r(){var e=arguments[1]||arguments[0],r=n.default.resizeServiceDefaults,s=r.injectionFactories
e.register("config:resize-service",r,{instantiate:!1}),e.register("service:resize",t.default),e.inject("service:resize","resizeServiceDefaults","config:resize-service"),s.forEach(function(t){e.inject(t,"resizeService","service:resize")})}Object.defineProperty(e,"__esModule",{value:!0}),e.initialize=r,e.default={name:"resize",initialize:r}}),define("flea-app/mixins/color-label-mixin",["exports","flea-app/utils/utils"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.Mixin.create({nodeNameTypes:["none","visit_code","seq_id","motif"],nodeNameType:"none",rankColors:!1,sortedDates:function(){var e=this.get("model.sequences.seqIdToDate")
delete e.mrca
var t=_.values(e)
return _.uniqBy(t,function(e){return e.toString()}).sort(function(e,t){return e-t})}.property("model.sequences.seqIdToDate"),sortedVisitCodes:function(){var e=this.get("sortedDates"),t=this.get("model.dates")
return e.map(function(e){return t[e]})}.property("sortedDates","model.dates"),seqIdToNodeName:function(){var e={},n=this.get("nodeNameType"),r=this.get("model.sequences.observedAndMrca")
if("visit_code"===n)for(var s=this.get("model.sequences.seqIdToDate"),a=this.get("model.dates"),o=0;o<r.length;o++){var i=r[o].get("id")
try{e[i]=(0,t.mapIfPresent)(a,s[i])}catch(t){e[i]=i}}else if("seq_id"===n)e=(0,t.seqIdToProperty)(r,"id")
else if("motif"===n)e=this.get("model.sequences.idToMotif")
else{if("none"!==n)throw"unknown node name type: "+n
e=_.zipObject(r.map(function(e){return[e.get("id"),""]}))}return e}.property("model.sequences.observedAndMrca.[]","model.sequences.seqIdToDate.[]","model.sequences.idToMotif.[]","nodeNameType"),makeColorScale:function(e,t){if(t||(t=e),e.length!==t.length)throw"lengths do not match"
for(var n={},r=0;r<e.length;r++)n[e[r]]=t[r]
var s=void 0,a=void 0
this.get("rankColors")?(a=t.length,s=d3.scale.ordinal().domain(t).range(_.range(t.length))):(a=1,s=d3.time.scale().domain(d3.extent(t)).range([0,1]))
var o=["red","orange","yellow","green","blue","indigo"],i=a/(o.length-1),l=d3.range(0,a+i/2,i),d=d3.scale.linear().domain(l).range(o).interpolate(d3.interpolateLab)
return function(e){return d(s(n[e]))}},colorScale:function(){return this.makeColorScale(this.get("sortedDates"))}.property("sortedDates","rankColors"),colorScaleVisitCode:function(){return this.makeColorScale(this.get("sortedVisitCodes"),this.get("sortedDates"))}.property("sortedVisitCodes","rankColors"),motifColorScale:function(){var e=this.get("model.sequences.idToMotif"),t=_.uniq(_.values(e)).sort()
return(t.length>10?d3.scale.category20():d3.scale.category10()).domain(t)}.property("model.sequences.idToMotif[]"),colorMap:function(e,t){var n={}
for(var r in e)e.hasOwnProperty(r)&&(n[r]=t(e[r]))
return n},seqIdToNodeColor:function(){var e=this.get("model.sequences.seqIdToDate"),t=this.get("colorScale")
return this.colorMap(e,t)}.property("model.sequences.seqIdToDate","colorScale"),seqIdToMotifColor:function(){var e=this.get("model.sequences.idToMotif"),t=this.get("motifColorScale")
return this.colorMap(e,t)}.property("model.sequences.seqIdToDate","motifColorScale","nodeNameType"),actions:{selectNodeNameType:function(e){null!=e&&this.set("nodeNameType",e)}}})}),define("flea-app/mixins/d3-plot-mixin",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.Mixin.create({tagName:"svg",attributeBindings:["width","height"],width:100,height:100,margin:{top:5,right:5,bottom:5,left:5},data:null,didInsertElement:function(){this._super.apply(this,arguments),this._updateChart()},_updateChart:function(){},onChartChange:function(){"inDOM"===this._state&&Ember.run.once(this,"_updateChart")}.observes("data.[]"),innerWidth:function(){var e=this.get("margin")
return this.get("width")-e.left-e.right}.property("width","margin"),innerHeight:function(){var e=this.get("margin")
return this.get("height")-e.top-e.bottom}.property("height","margin"),innerGroupTransform:function(){var e=this.get("margin")
return"translate("+e.left+", "+e.top+")"}.property("margin"),xAxisTransform:function(){return"translate(0, "+this.get("innerHeight")+")"}.property("innerHeight"),yAxisTransform:function(){return"translate("+this.get("innerWidth")+", 0)"}.property("innerWidth")})}),define("flea-app/mixins/resize-aware",["exports","ember-resize/mixins/resize-aware"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}})}),define("flea-app/mixins/width-height-mixin",["exports","ember-resize/mixins/resize-aware"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.Mixin.create(t.default,{doResize:function(e){var t=e.$()
if(t){var n=t.parents("div").width(),r=t.parents("div").height()
e.set("width",n),e.set("height",r)}},init:function(){var e=this
this._super.apply(this,arguments)
var t=this
this.get("resizeService").on("didResize",function(){e.doResize(t)}),this.get("resizeService").on("debouncedDidResize",function(){e.doResize(t)})},didInsertElement:function(){this.doResize(this),this._super.apply(this,arguments)}})})
define("flea-app/mixins/width-mixin",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.Mixin.create({doResize:function(e){var t=e.$()
if(t){var n=t.parents("div").width()
e.set("width",n)}},init:function(){var e=this
this._super.apply(this,arguments)
var t=this
this.get("resizeService").on("didResize",function(){e.doResize(t)}),this.get("resizeService").on("debouncedDidResize",function(){e.doResize(t)})},didInsertElement:function(){this.doResize(this),this._super.apply(this,arguments)}})}),define("flea-app/models/coordinates-object",["exports","flea-app/utils/utils"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.Object.extend({data:[],refRange:function(){var e=this.get("alnToRefCoords")
return[e[0],e[e.length-1]+1]}.property("alnToRefCoords"),alnToRefCoords:function(){return this.get("data").map(function(e){return(0,t.zeroIndex)(e)})}.property("data.[]"),refToAlnCoords:function(){for(var e=this.get("alnToRefCoords"),t=this.get("refRange")[1],n=new Array(t),r=new Array(t),s=-1,a=0;a<e.length;a++){var o=e[a]
if(r[o]=a,o!==s&&(n[o]=a),s>-1)for(var i=s+1;i<o;i++)n[i]=a,r[i]=a-1
s=o}return[n,r]}.observes("alnToRefCoords"),refToFirstAlnCoords:function(){return(0,t.refToAlnCoords)(this.get("alnToRefCoords"),this.get("refRange")[1])[0]}.property("alnToRefCoords"),refToLastAlnCoords:function(){return(0,t.refToAlnCoords)(this.get("alnToRefCoords"),this.get("refRange")[1])[1]}.property("alnToRefCoords")})}),define("flea-app/models/sequence-object",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.Object.extend({id:null,date:null,sequence:null,aminoAcids:function(){return this.get("sequence").split("")}.property("sequence.[]")})}),define("flea-app/models/sequences-object",["exports","flea-app/utils/utils"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.Object.extend({reference:null,mrca:null,observed:[],ancestors:[],selectedPositions:[],observedAndMrca:function(){var e=this.get("observed")
return[this.get("mrca")].concat(e)}.property("observed.[]","mrca"),idToMotif:function(){var e=this.get("observedAndMrca"),t=this.get("ancestors"),n=e.concat(t),r=this.get("selectedPositions").sort(function(e,t){return e-t})
return n.reduce(function(e,t){return e[t.get("id")]=r.map(function(e){return t.get("sequence")[e]}).join(""),e},{})}.property("observedAndMrca.[]","ancestors.[]","selectedPositions.[]"),seqIdToDate:function(){return(0,t.seqIdToProperty)(this.get("observedAndMrca"),"date")}.property("observedAndMrca.[].date")})}),define("flea-app/pods/application/controller",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0})
var t=Ember.Controller
e.default=t.extend({})}),define("flea-app/pods/application/route",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.Route.extend({setupController:function(e,t){this._super(e,t),e.set("rootURL",this.router.get("rootURL"))}})}),define("flea-app/pods/application/template",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.HTMLBars.template({id:"1k907urf",block:'{"symbols":[],"statements":[[1,[18,"outlet"],false],[0,"\\n"]],"hasEval":false}',meta:{moduleName:"flea-app/pods/application/template.hbs"}})}),define("flea-app/pods/components/alignment-overview/component",["exports","flea-app/utils/utils","flea-app/mixins/width-mixin"],function(e,t,n){Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.Component.extend(n.default,{tagName:"svg",attributeBindings:["width","height"],classNames:["alignment-overview"],labelHeight:15,mainHeight:30,axisHeight:20,margins:{top:0,right:5,bottom:0,left:5},alnRanges:null,validAlnRange:[0,1],selectedPositions:null,predefinedRegions:null,alnToRefCoords:null,refToFirstAlnCoords:null,refToLastAlnCoords:null,tick:100,shiftKey:!1,height:function(){return this.get("labelHeight")+this.get("mainHeight")+this.get("axisHeight")+this.get("margins.top")+this.get("margins.bottom")}.property("labelHeight","mainHeight","axisHeight","margins.top","margins.bottom"),innerWidth:function(){return this.get("width")-this.get("margins.left")-this.get("margins.right")}.property("width","margins.left","margins.right"),innerHeight:function(){return this.get("height")-this.get("margins.top")-this.get("margins.bottom")}.property("height","margins.top","margins.bottom"),transformGroup:function(){d3.select("#"+this.get("elementId")).select(".overview").attr("transform","translate("+this.get("margins.left")+","+this.get("margins.top")+")")}.observes("labelHeight"),transformMain:function(){d3.select("#"+this.get("elementId")).select(".overview").select(".main").attr("transform","translate(0,"+this.get("labelHeight")+")")}.observes("labelHeight"),xscale:function(){return d3.scale.linear().domain(this.get("validAlnRange")).range([0,this.get("innerWidth")])}.property("innerWidth"),didInsertElement:function(){this._super.apply(this,arguments),this.transformGroup(),this.transformMain(),this.drawTrack(),this.drawAxis(),this.drawLabels(),this.drawRanges(),this.drawSelected(),this.drawInsertions(),this.drawPositive(),this.makeBrush()
var e=this,t=function(){"inDOM"===e._state&&e.set("shiftKey",d3.event.shiftKey)}
d3.select(window).on("keydown",t),d3.select(window).on("keyup",t)},drawTrack:function(){var e=this.get("innerWidth"),t=this.get("mainHeight"),n=[{x1:0,y1:t/2,x2:e,y2:t/2,name:"middle"},{x1:0,y1:t/3,x2:0,y2:2*t/3,name:"left"},{x1:e-1,y1:t/3,x2:e-1,y2:2*t/3,name:"right"}],r=d3.select("#"+this.get("elementId")).select(".overview").select(".main").select(".track").selectAll("line").data(n,function(e){return e.name})
r.exit().remove(),r.enter().append("line"),r.attr("x1",function(e){return e.x1}).attr("y1",function(e){return e.y1}).attr("x2",function(e){return e.x2}).attr("y2",function(e){return e.y2}).attr("stroke-width",1).attr("stroke","black")}.observes("innerWidth","mainHeight"),drawAxis:function(){var e=this.get("refToFirstAlnCoords"),n=this.get("alnToRefCoords"),r=this.get("tick"),s=(0,t.alignmentTicks)(n,e,r),a=this.get("xscale"),o=d3.svg.axis().scale(a).orient("bottom").tickValues(s).tickFormat(function(e){return(0,t.oneIndex)(n[e])})
d3.select("#"+this.get("elementId")).select(".overview").select(".axis").attr("class","x axis").attr("transform","translate(0,"+(this.get("labelHeight")+this.get("mainHeight"))+")").call(o)}.observes("innerWidth","xscale","mainHeight","labelHeight","refToFirstAlnCoords"),drawLabels:function(){var e=this.get("xscale"),n=this.get("refToFirstAlnCoords"),r=this.get("refToLastAlnCoords"),s=this.get("predefinedRegions"),a=d3.select("#"+this.get("elementId")).select(".labels"),o=this.get("labelHeight"),i=o/2,l=this,d=a.selectAll("text").data(s,function(e){return e.name}),u=function(e,s){return r[(0,t.zeroIndex)(s)]-n[e]}
d.exit().remove(),d.enter().append("text").style("text-anchor","middle").style("dominant-baseline","middle").text(function(e){return e.name}).attr("font-family","sans-serif").attr("font-size","8px"),d.attr("x",function(t){return e(n[t.start]+u(t.start,t.stop)/2)}).attr("y",function(){return i})
var c=a.selectAll("rect").data(s,function(e){return e.name})
c.exit().remove(),c.enter().append("rect").on("click",function(e){var t=[e.start,e.stop]
l.get("shiftKey")?l.sendAction("addRange",t):l.sendAction("setRanges",[t])}).style("cursor","pointer").attr("height",function(){return o}).attr("stroke-width",1).attr("stroke","black").attr("fill-opacity",0),c.attr("x",function(r){return e((0,t.transformIndex)(r.start,n,!1))}).attr("y",function(){return 0}).attr("width",function(t){return e(u(t.start,t.stop))})}.observes("innerWidth","xscale","predefinedRegions","labelHeight","refToFirstAlnCoords","refToLastAlnCoords"),makeBrush:function(){var e=this,n=this.get("alnToRefCoords"),r=d3.select("#"+this.get("elementId")).select(".overview").select(".main").select(".brush"),s=this.get("xscale"),a=d3.svg.brush()
a.x(s).on("brushend",function(){var s=a.extent(),o=[(0,t.transformIndex)(d3.round(s[0],0),n,!1),(0,t.transformIndex)(d3.round(s[1],0),n,!1)+1]
e.get("shiftKey")?e.sendAction("addRange",o):e.sendAction("setRanges",[o]),a.clear(),r.call(a)}),r.call(a).selectAll("rect").attr("height",this.get("mainHeight"))}.observes("xscale","mainHeight","alnToRefCoords"),insertions:function(){for(var e=this.get("alnToRefCoords"),t=[],n=!1,r=-1,s=-1,a=e.length,o=1;o<e.length;o++)n||e[o-1]!==e[o]?n&&e[o-1]!==e[o]?(s=o-1,n=!1,t.push([r,s])):n&&o+1===a&&(s=o,n=!1,t.push([r,s])):(n=!0,r=o)
return t}.property("alnToRefCoords"),drawInsertions:function(){var e=d3.select("#"+this.get("elementId")).select(".overview").select(".main").select(".insertions"),t=this.get("insertions"),n=this.get("mainHeight")/2,r=e.selectAll("line").data(t,function(e){return String(e)}),s=this.get("xscale")
r.exit().remove(),r.enter().append("line").attr("stroke-width",3).attr("stroke","black"),r.attr("x1",function(e){return s(e[0])}).attr("y1",function(){return n}).attr("x2",function(e){return s(e[1])}).attr("y2",function(){return n})}.observes("insertions","mainHeight","xscale"),drawPositive:function(){var e=[]
this.get("markPositive")&&(e=this.get("positiveSelection")[0])
var t=this.get("mainHeight"),n=d3.select("#"+this.get("elementId")).select(".overview").select(".main").select(".positive").selectAll("line").data(e,function(e){return e}),r=this.get("xscale")
n.exit().remove(),n.enter().append("line").attr("stroke-width",1).attr("stroke","green"),n.attr("x1",function(e){return r(e)}).attr("y1",function(){return t/3}).attr("x2",function(e){return r(e)}).attr("y2",function(){return 2*t/3})}.observes("xscale","markPositive","positiveSelection","mainHeight"),drawSelected:function(){var e=d3.select("#"+this.get("elementId")).select(".overview").select(".main").select(".selected"),t=this.get("mainHeight"),n=this.get("selectedPositions"),r=e.selectAll("line").data(n),s=this.get("xscale")
r.exit().remove(),r.enter().append("line").attr("stroke-width",1).attr("stroke","red"),r.attr("x1",function(e){return s(e)}).attr("y1",function(){return 0}).attr("x2",function(e){return s(e)}).attr("y2",function(){return t})}.observes("xscale","selectedPositions.[]","mainHeight"),closedRanges:function(){return this.get("alnRanges").map(function(e){return[e[0],e[1]-1]})}.property("alnRanges"),drawRanges:function(){var e=d3.select("#"+this.get("elementId")).select(".overview").select(".main").select(".ranges"),t=this.get("mainHeight"),n=this.get("closedRanges"),r=this,s=this.get("innerWidth"),a=this.get("xscale"),o=d3.behavior.drag().on("drag",function(){var e=d3.round(+d3.event.dx,0),t=+this.getAttribute("width"),n=+this.getAttribute("x")+e
n>=0&&n+t+1<=s&&d3.select(this).attr("x",n)}).on("dragend",function(){var e=+this.getAttribute("idx"),t=+this.getAttribute("x"),n=[t,t+ +this.getAttribute("width")+1]
r.sendAction("updateRange",e,n)})
e.selectAll("rect").remove(),e.selectAll("rect").data(n).enter().append("rect").attr("x",function(e){return a(e[0])}).attr("y",function(){return 0}).attr("idx",function(e,t){return t}).attr("width",function(e){return a(e[1]-e[0])}).attr("height",function(){return t}).attr("stroke-width",1).attr("stroke","blue").style("fill","blue").attr("fill-opacity",.1).call(o).on("click",function(e,t){d3.event.defaultPrevented||r.sendAction("rmRange",t)})}.observes("xscale","closedRanges","innerWidth","mainHeight")})}),define("flea-app/pods/components/alignment-overview/template",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.HTMLBars.template({id:"5roy6vnH",block:'{"symbols":[],"statements":[[6,"g"],[9,"class","overview"],[7],[0,"\\n  "],[6,"g"],[9,"class","labels"],[7],[8],[0,"\\n  "],[6,"g"],[9,"class","main"],[7],[0,"\\n    "],[6,"g"],[9,"class","track"],[7],[8],[0,"\\n    "],[6,"g"],[9,"class","insertions"],[7],[8],[0,"\\n    "],[6,"g"],[9,"class","selected"],[7],[8],[0,"\\n    "],[6,"g"],[9,"class","positive"],[7],[8],[0,"\\n    "],[6,"g"],[9,"class","brush"],[7],[8],[0,"\\n    "],[6,"g"],[9,"class","ranges"],[7],[8],[0,"\\n  "],[8],[0,"\\n  "],[6,"g"],[9,"class","axis"],[7],[8],[0,"\\n"],[8],[0,"\\n"]],"hasEval":false}',meta:{moduleName:"flea-app/pods/components/alignment-overview/template.hbs"}})}),define("flea-app/pods/components/bootstrap-popover/component",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.Component.extend({tagName:"a",attributeBindings:["tabindex","dataToggle:data-toggle","dataTrigger:data-trigger","title","dataContent:data-content","placement"],classNames:["popover-link"],tabindex:"0",dataToggle:"popover",dataTrigger:"focus",title:"Title",dataContent:"Content",html:!0,placement:"auto right",didInsertElement:function(){this._super.apply(this,arguments),this.$().popover({html:this.get("html"),placement:this.get("placement")})}.observes("dataContent","html","placement")})}),define("flea-app/pods/components/color-table/template",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.HTMLBars.template({id:"TjmIcZGg",block:'{"symbols":["row","elt","h"],"statements":[[6,"table"],[9,"class","table table-hover table-condensed"],[7],[0,"\\n  "],[6,"thead"],[7],[0,"\\n    "],[6,"tr"],[7],[0,"\\n"],[4,"each",[[19,0,["header"]]],null,{"statements":[[0,"\\t"],[6,"td"],[7],[1,[19,3,[]],false],[8],[0,"\\n"]],"parameters":[3]},null],[0,"    "],[8],[0,"\\n  "],[8],[0,"\\n  "],[6,"tbody"],[7],[0,"\\n"],[4,"each",[[19,0,["data"]]],null,{"statements":[[0,"      "],[6,"tr"],[7],[0,"\\n"],[4,"each",[[19,1,[]]],null,{"statements":[[0,"\\t  "],[6,"td"],[10,"style",[19,2,["style"]],null],[7],[0,"\\n"],[4,"bootstrap-popover",null,[["title","dataContent"],["",[19,2,["html"]]]],{"statements":[[0,"              "],[1,[19,2,["value"]],false],[0,"\\n"]],"parameters":[]},null],[0,"\\t  "],[8],[0,"\\n"]],"parameters":[2]},null],[0,"      "],[8],[0,"\\n"]],"parameters":[1]},null],[0,"  "],[8],[0,"\\n"],[8],[0,"\\n"]],"hasEval":false}',meta:{moduleName:"flea-app/pods/components/color-table/template.hbs"}})}),define("flea-app/pods/components/d3-legend/component",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.Component.extend({tagName:"g",classNames:["legend"],xCoord:0,yCoord:0,legendLabels:[],legendColors:null,didInsertElement:function(){this._super.apply(this,arguments),this._updateLegend()},onChartChange:function(){"inDOM"===this._state&&Ember.run.once(this,"_updateLegend")}.observes("legendLabels.[]","legendColors"),_updateLegend:function(){var e=this.get("legendLabels"),t=this.get("legendColors"),n={x:this.get("xCoord"),y:this.get("yCoord"),spacer:25,margin:5,font:10},r=d3.select("#"+this.get("elementId"))
r.selectAll("g").remove(),r.append("g").attr("class","d3_legend").attr("x",n.x).attr("y",n.y).attr("transform","translate("+n.x+","+n.y+")").selectAll(".legend_panel").data(e,function(e){return e}).enter().append("g").attr("class","legend_panel").each(function(e,r){var s=d3.select(this)
s.append("rect").attr("x",n.spacer).attr("y",r*(n.spacer+n.margin)).attr("width",n.spacer).attr("height",n.spacer).style("fill",function(){return t(e)}),s.append("text").attr("x",2*n.spacer+n.font/4).attr("y",(r+1)*(n.spacer+n.margin)-n.margin-n.spacer/2+n.font/2).style("fill",function(){return t(e)}).attr("font-family","monospace").text(function(e){return e})})}})}),define("flea-app/pods/components/d3-legend/template",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.HTMLBars.template({id:"iq4c4o5i",block:'{"symbols":[],"statements":[[0,"\\n"]],"hasEval":false}',meta:{moduleName:"flea-app/pods/components/d3-legend/template.hbs"}})}),define("flea-app/pods/components/graph-axis/component",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.Component.extend({tagName:"g",classNames:["axis"],attributeBindings:["transform"],scale:null,orient:"bottom",ticks:10,tickValues:null,tickSize:5,tickFormat:null,tickPadding:5,rotate:0,_axis:null,d3Axis:function(){var e=this.get("_axis")
return null===e&&(e=d3.svg.axis()),e.scale(this.get("scale")).orient(this.get("orient")).ticks(this.get("ticks")).tickValues(this.get("tickValues")).tickFormat(this.get("tickFormat")).tickSize(this.get("tickSize")).tickPadding(this.get("tickPadding")),this.set("_axis",e),e}.property("scale","orient","ticks","tickValues","tickSize","tickFormat","tickPadding"),didInsertElement:function(){this._super.apply(this,arguments),this._updateAxis()},onD3AxisChange:function(){"inDOM"===this._state&&this._updateAxis()}.observes("d3Axis","rotate"),_updateAxis:function(){var e=this.get("d3Axis"),t=d3.select(this.$()[0]).call(e),n=this.get("rotate")
0!==n&&t.selectAll("text").style("text-anchor","start").attr("transform","rotate("+n+")").attr("dx","0.5em").attr("dy","0.5em")}})}),define("flea-app/pods/components/mds-viewer/component",["exports","flea-app/mixins/d3-plot-mixin","flea-app/mixins/width-height-mixin"],function(e,t,n){Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.Component.extend(t.default,n.default,{copynumbers:null,nameToNodeLabel:null,nameToNodeColor:null,nameToMotifColor:null,nameToMotif:null,legendLabels:[],legendColors:null,xDomain:function(){return d3.extent(this.get("data").map(function(e){return e.x}))}.property("data.[]"),yDomain:function(){return d3.extent(this.get("data").map(function(e){return e.y}))}.property("data.[]"),scale:function(e,t,n){return d3.scale.linear().domain(this.get(e)).range([t,n])},xScale:function(){return this.scale("xDomain",0,this.get("innerWidth"))}.property("innerWidth","xDomain"),yScale:function(){return this.scale("yDomain",this.get("innerHeight"),0)}.property("innerHeight","yDomain"),cnDomain:function(){var e=this.get("copynumbers")
return[0,d3.max(_.values(e))]}.property("copynumbers.[]"),margin:function(){var e=this.get("cnDomain")[1],t=this.get("cnScale"),n=Math.sqrt(t(e))
return{top:n,right:n,bottom:n,left:n}}.property("cnDomain"),cnScale:function(){return d3.scale.linear().domain(this.get("cnDomain")).range([1,500])}.property("cnDomain"),onChartChange:function(){"inDOM"===this._state&&Ember.run.once(this,"_updateChart")}.observes("data.[]","nameToNodeColor","nameToMotif","nameToMotifColor","xScale","yScale","cnScale","copynumbers.[]","highlightedNodes"),_updateChart:function(){var e=d3.select("#"+this.get("elementId")).select(".inner").select(".circles"),t=this.get("data"),n=this.get("xScale"),r=this.get("yScale"),s=this.get("cnScale"),a=this.get("copynumbers"),o=this.get("nameToNodeColor"),i=this.get("nameToMotif"),l=this.get("nameToMotifColor"),d=this.get("highlightedNodes"),u=e.selectAll("circle").data(t,function(e){return e.name})
d3.select("body").select(".tooltip").remove()
var c=d3.select("body").append("div").attr("class","tooltip").style("opacity",0)
u.enter().append("circle"),u.exit().remove(),u.attr("cx",function(e){return n(e.x)}).attr("cy",function(e){return r(e.y)}).attr("r",function(e){return 1.5*Math.sqrt(s(a[e.name]))}).style("fill",function(e){return o[e.name]}).style("opacity",function(e){return 0===d.length?1:d.has(e.name)?1:.1}).on("mouseover",function(e){var t=e.name,n="black"
i[e.name]&&(t+=" : "+i[e.name],n=l[e.name]),c.transition().duration(100).style("opacity",.9),c.html(t).style("left",d3.event.pageX+"px").style("top",d3.event.pageY-30+"px").style("color",n)}).on("mouseout",function(){c.transition().duration(100).style("opacity",0)})}})}),define("flea-app/pods/components/mds-viewer/template",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.HTMLBars.template({id:"yBAcgVgz",block:'{"symbols":[],"statements":[[6,"g"],[10,"transform",[26,[[18,"innerGroupTransform"]]]],[9,"class","inner"],[7],[0,"\\n  "],[6,"g"],[9,"class","circles"],[7],[8],[0,"\\n\\n"],[4,"if",[[19,0,["legendLabels","length"]]],null,{"statements":[[0,"    "],[1,[25,"d3-legend",null,[["legendLabels","legendColors"],[[19,0,["legendLabels"]],[19,0,["legendColors"]]]]],false],[0,"\\n"]],"parameters":[]},null],[0,"\\n"],[8],[0,"\\n"]],"hasEval":false}',meta:{moduleName:"flea-app/pods/components/mds-viewer/template.hbs"}})}),define("flea-app/pods/components/phylotree-widget/component",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.Component.extend({tagName:"svg",attributeBindings:["width","height"],treeWidget:null,width:800,height:600,tree:null,copynumbers:null,showCopynumber:!1,overlapNodes:!0,seqIdToNodeName:null,seqIdToNodeColor:null,seqIdToMotifColor:null,seqIdToMotif:null,radialLayout:!1,minRadius:.1,maxRadius:10,heightScale:1,nodeSpan:function(){var e=this.get("copynumbers"),t=d3.max(_.values(e)),n=d3.scale.sqrt().domain([0,t]).range([this.get("minRadius"),this.get("maxRadius")])
return function(t){return n(t.name in e?e[t.name]:1)}}.property("copynumbers","minRadius","maxRadius"),nodeNamer:function(){var e=this.get("seqIdToNodeName")
return function(t){return Ember.isPresent(e[t.name])?e[t.name]:""}}.property("seqIdToNodeName"),nodeColorizer:function(){var e=this.get("seqIdToNodeColor"),t=this.get("seqIdToMotifColor")
return function(n,r){Ember.isPresent(e)?n.selectAll("circle").style("fill",e[r.name]).style("opacity",.4):n.selectAll("circle").style("fill","LightGray").style("opacity",.4),Ember.isPresent(t)?(n.selectAll("text").style("fill",t[r.name]),d3_phylotree_is_leafnode(r)||n.selectAll("circle").style("fill",t[r.name]).style("opacity",.9)):n.selectAll("text").style("fill","Black")}}.property("seqIdToNodeColor","seqIdToMotifColor","radialLayout"),didInsertElement:function(){this._super.apply(this,arguments)
var e=d3.select("#"+this.get("elementId")),t=d3.layout.phylotree().svg(e).separation(function(){return 0}).style_nodes(this.get("nodeColorizer")).branch_name(this.get("nodeNamer"))
t.options({"is-radial":this.get("radialLayout")},!1),t.options({"shift-nodes":!1},!1),t.options({"overlap-bubbles":this.get("overlapNodes")},!1),this.get("showCopynumber")?(t.node_span(this.get("nodeSpan")),t.options({"draw-size-bubbles":!0},!1)):(t.node_span("equal"),t.options({"draw-size-bubbles":!1},!1)),t.options({selectable:!1},!1),t.options({"internal-names":!0},!1),this.set("treeWidget",t),Ember.run.once(this,"newTree")},newTree:function(){var e=this.get("treeWidget")
e(this.get("tree"))
var t=this.get("seqIdToMotif")
e.get_nodes().forEach(function(e){d3_add_custom_menu(e,function(e){return e.name+" : "+t[e.name]},function(){},d3.layout.phylotree.is_leafnode)}),this.sort()}.observes("tree","seqIdToMotif"),sort:function(){var e=this.get("sortState")
"ascending"===e?this.sortNodes(!0):"descending"===e?this.sortNodes(!1):this.sortOriginal()}.observes("sortState"),sortNodes:function(e){var t=this.get("treeWidget")
t.traverse_and_compute(function(e){var t=1
e.children&&e.children.length&&(t+=d3.max(e.children,function(e){return e.count_depth})),e.count_depth=t}),t.resort_children(function(t,n){return(t.count_depth-n.count_depth)*(e?1:-1)})},sortOriginal:function(){this.get("treeWidget").resort_children(function(e,t){return e.original_child_order-t.original_child_order})},updateSpacing:function(){var e=this.get("treeWidget")
e.options({"height-scale":+this.get("heightScale")},!1),e.placenodes(),e.update(!0)}.observes("heightScale"),updateNames:function(){var e=this.get("treeWidget")
e.branch_name(this.get("nodeNamer")),e.update()}.observes("nodeNamer"),updateColors:function(){var e=this.get("treeWidget")
e.style_nodes(this.get("nodeColorizer")),e.refresh()}.observes("nodeColorizer"),updateCopynumber:function(){var e=this.get("treeWidget")
this.get("showCopynumber")?(e.node_span(this.get("nodeSpan")),e.options({"draw-size-bubbles":!0},!1)):(e.node_span("equal"),e.options({"draw-size-bubbles":!1},!1)),e.placenodes(),e.update(!0)}.observes("showCopynumber","nodeSpan"),updateOverlap:function(){var e=this.get("treeWidget")
e.options({"overlap-bubbles":this.get("overlapNodes")},!1),e.placenodes(),e.update(!0)}.observes("overlapNodes"),updateLayout:function(){var e=this.get("treeWidget"),t=this.get("radialLayout")
e.options({"is-radial":t},!1),e.placenodes(),e.update(!0)}.observes("radialLayout")})}),define("flea-app/pods/components/protein-plots/component",["exports","flea-app/utils/utils","flea-app/mixins/d3-plot-mixin","flea-app/mixins/width-mixin"],function(e,t,n,r){Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.Component.extend(n.default,r.default,{heightEach:80,labelHeight:25,tick:100,yticks:5,margin:{top:20,right:20,bottom:50,left:30},height:function(){var e=this.get("margin")
return e.top+e.bottom+this.get("nPlots")*this.get("heightEach")+this.get("labelHeight")}.property("heightEach","margin","nPlots","labelHeight"),onChartChange:function(){"inDOM"===this._state&&Ember.run.once(this,"_updateChart")}.observes("names.[]","data1","data2","positions","labels.[]","width","height","heightEach","margin","yMax","labelHeight"),yMax:function(){var e=this.get("data1"),t=this.get("data2")
return[d3.max(_.flatten(e)),d3.max(_.flatten(t))]}.property("data1","data2"),nPlots:function(){return this.get("names.length")}.property("names.length"),_updateChart:function(){try{this.__updateChart()}catch(e){if(!e||!e.name||"data consistency error"!==e.name)throw e
this._removeAll()}},_removeAll:function(){var e=d3.select("#"+this.get("elementId")).select(".inner")
e.selectAll("path").remove(),e.selectAll("g").remove(),e.selectAll("defs").remove()},__updateChart:function(){var e=this.get("names"),n=this.get("data1"),r=this.get("data2"),s=this.get("positions"),a=this.get("labels"),o=n[0].length,i=this.get("nPlots"),l=r.length>0
if(l&&n.length!==r.length)throw{name:"data consistency error",message:"data1 and data2 have different lengths"}
if(n.length!==e.length)throw{name:"data consistency error",message:"data1 and names have different lengths"}
for(var d=0;d<i;d++){if(n[d].length!==o)throw{name:"data consistency error",message:"data vector lengths are inconsistent"}
if(l&&r[d].length!==o)throw{name:"data consistency error",message:"data vector lengths are inconsistent"}}var u=this.get("innerWidth"),c=this.get("innerHeight"),p=this.get("heightEach"),f=this.get("url"),m=function(e){return g(e)}
this._removeAll()
var h=d3.select("#"+this.get("elementId")).select(".inner")
h.append("defs").append("clipPath").attr("id","clip").append("rect").attr("width",u).attr("height",c),h=h.append("g")
for(var g=d3.scale.linear().range([0,u]).domain([1,o]),v=d3.scale.linear().range([0,u]).domain([1,o]),b=d3.svg.brush().x(v).on("brush",function(){g.domain(b.empty()?v.domain():b.extent())
for(var e=0;e<T.length;e++)T[e].select("._pos_dS").attr("d",S[e][0]),l&&T[e].select("._pos_dN").attr("d",S[e][1]),T[e].selectAll(".selected_site").attr("cx",m)
h.select(".pos.x.axis").call(j)}),y=this.get("yMax"),x=d3.scale.linear().range([p,0]).domain([l?-y[1]:0,y[0]]),_=this.get("refToFirstAlnCoords"),P=this.get("alnToRefCoords"),w=this.get("tick"),M=(0,t.alignmentTicks)(P,_,w),j=d3.svg.axis().scale(g).orient("bottom").tickValues(M).tickFormat(function(e){return(0,t.oneIndex)(P[e])}),R=d3.svg.axis().scale(v).orient("top").tickValues(M).tickFormat(function(e){return(0,t.oneIndex)(P[e])}),O=d3.svg.axis().scale(g).orient("bottom").ticks(0).tickFormat(""),C=d3.svg.axis().scale(x).orient("right").ticks(this.get("yticks")),T=[],S=[],q=0;q<e.length;q++){var E=h.append("g").attr("transform","translate(0,"+p*q+")"),k=[]
k[0]=d3.svg.area().x(function(e,t){return g(t+1)}).y0(function(){return x(0)}).y1(function(e){return x(e)}).interpolate("step"),l&&(k[1]=d3.svg.area().x(function(e,t){return g(t+1)}).y0(function(e){return x(-e)}).y1(function(){return x(0)}).interpolate("step")),S.push(k),E.append("text").attr("transform","translate(0,"+x(0)+") rotate (-90)").attr("y","0").attr("dy","-0.5em").style("text-anchor",l?"middle":"start").text(e[q]),E.append("path").datum(n[q]).attr("class","_pos_dS").attr("clip-path","url("+f+"#clip)").attr("d",k[0]),E.append("g").attr("class","pos x axis").attr("transform","translate(0,"+p+")").call(O),E.append("g").attr("class","pos y axis").attr("transform","translate("+u+" ,0)").call(C),l&&E.append("path").datum(r[q]).attr("clip-path","url("+f+"#clip)").attr("class","_pos_dN").attr("d",k[1]),0===q?E.append("g").attr("class","x brush").call(b).selectAll("rect").attr("y",-6).attr("height",p+7):T.push(E),q<s.length&&E.selectAll(".selected_site").data(s[q]).enter().append("circle").attr("cx",function(e){return g(e)}).attr("cy",function(){return x(0)}).attr("r",4).attr("class","selected_site").attr("clip-path","url("+f+"#clip)").append("title").text(function(e){return"Codon "+e})}h.append("g").attr("class","pos x_overall axis").call(R).append("text").attr("transform","translate(0,0)").attr("dy","-.4em").attr("dx",".25em").style("text-anchor","start").text("Site")
var A=this.get("labelHeight")
if(h.append("g").attr("class","pos x axis").attr("transform","translate(0,"+(c-A)+")").call(j).append("text").attr("transform","translate(0,0)").attr("dy","+1.1em").attr("dx",".25em").style("text-anchor","start").text("Site"),a.length>0){var N={x:0,y:c-A+10,spacer:15,margin:5,font:10,x_step:100},D=["#2E66FF","#FFB314"]
h.append("g").attr("class","protein_legend").attr("x",N.x).attr("y",N.y).attr("transform","translate("+N.x+","+N.y+")").selectAll("g").data(a).enter().append("g").each(function(e,t){var n=d3.select(this)
n.append("rect").attr("y",N.spacer).attr("x",t*(N.spacer+N.margin+N.x_step)).attr("width",N.spacer).attr("height",N.spacer).style("fill",D[t]),n.append("text").attr("y",2*N.spacer).attr("x",t*(N.spacer+N.margin+N.x_step)+N.spacer+N.font/4).style("fill",D[t]).text(e)})}}})}),define("flea-app/pods/components/protein-plots/template",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.HTMLBars.template({id:"oPcwVP4B",block:'{"symbols":[],"statements":[[6,"g"],[10,"transform",[26,[[18,"innerGroupTransform"]]]],[10,"height",[26,[[18,"height"]]]],[9,"class","inner"],[7],[8],[0,"\\n"]],"hasEval":false}',meta:{moduleName:"flea-app/pods/components/protein-plots/template.hbs"}})}),define("flea-app/pods/components/pv-wrapper/component",["exports","flea-app/mixins/width-height-mixin"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0})
var n=Ember.Component,r=Ember.computed
e.default=n.extend(t.default,{shouldLabelCoordinates:!1,selectedPositions:null,structure:null,data:[],range:[0,1],viewer:null,geometry:null,hoveredResidue:null,hoveredLabel:function(){var e=this.get("hoveredResidue")
return e?e.name()+" "+e.num():""}.property("hoveredResidue"),didInsertElement:function(){this._super.apply(this,arguments),Ember.run.next(this,this.get("setupView"))},doResize:function(){this._super.apply(this,arguments)
var e=this.get("viewer")
e&&e.resize(this.get("width"),this.get("height"))},setupView:function(){var e={width:this.get("width"),height:this.get("height"),antialias:!0,quality:"medium",fog:!0,background:"black"},t=pv.Viewer(this.$()[0],e)
this.set("viewer",t)},updateView:function(){this._updateView()}.observes("viewer","structure","renderMode","renderOptions"),renderMode:r("selectedPositions.length",function(){this.get("selectedPositions.length")
return"tube"}),renderOptions:r("selectedPositions.length",function(){return this.get("selectedPositions.length")>0?{radius:.2}:{radius:1.5}}),_updateView:function(){var e=this.get("viewer"),t=this.get("structure")
if(e&&t){e.clear(),e.fitTo(t)
var n=e.renderAs("protein",t,this.get("renderMode"),this.get("renderOptions"))
this.set("geometry",n),this.labelCoordinates(),this.updateColors(),this.drawSelected()}},mouseMove:function(e){var t=this.get("viewer")
if(t){var n=t.boundingClientRect(),r=t.pick({x:e.clientX-n.left,y:e.clientY-n.top})
if(null!==r&&null!==r.target())if(void 0!==r.node().structure){var s=r.target()
this.set("hoveredResidue",s.residue())
var a=r.node().structure().createEmptyView()
a.removeAtom(r.target(),!0)||a.addAtom(r.target()),r.node().setSelection(a),t.requestRedraw()}else this.set("hoveredResidue",null)
else this.set("hoveredResidue",null)}},updateRenderMode:function(){var e=this.get("viewer")
e.clear()
var t=this.get("structure")
e.fitTo(t)
var n=e.renderAs("protein",t,this.get("renderMode"),this.get("renderOptions"))
this.set("geometry",n)}.observes("renderMode","viewer","structure"),updateColors:function(){Ember.run.once(this,"_updateColors")}.observes("data.[]","range.[]","structure","geometry","gradient"),gradient:r("range",function(){var e=this.get("range"),t=pv.color.gradient(["white","darkred"])
return e[0]<0&&(t=pv.color.gradient(["darkblue","white","darkred"])),t}),normalizedData:r("data.[]","range.[]",function(){var e=this.get("data")
if(!e)return null
var t=this.get("range"),n=d3.min(e),r=d3.max(e)
if(t[0]>n)throw{name:"RangeError",message:"range[0] too large"}
if(t[1]<r)throw{name:"RangeError",message:"range[1] too small"}
return _.map(e,function(e){return(e-t[0])/(t[1]-t[0])})}),_updateColors:function(){var e=this.get("geometry"),t=this.get("structure")
if(null!==t){var n=this.get("normalizedData")
if(n){t.eachResidue(function(e){var t=e.num(),r=n[t-1]
r=void 0===r?0:r,e.customData=function(){return r}})
var r=this.get("gradient"),s=pv.color.byResidueProp("customData",r,[0,1])
e.colorBy(s),this.drawSelected(),this.get("viewer").requestRedraw()}}},labelCoordinates:function(){Ember.run.once(this,"_labelCoordinates")}.observes("shouldLabelCoordinates"),_labelCoordinates:function(){var e=this.get("viewer")
if(e.rm("label*"),this.get("shouldLabelCoordinates")){var t=0,n={fontSize:12,fontColor:"yellow",backgroundColor:"black",backgroundAlpha:.9}
this.get("structure").eachResidue(function(r){var s=r.num()
if(s%10==0){var a="label_"+t
e.label(a,s,r.atom(0).pos(),n),t+=1}})}this.get("viewer").requestRedraw()},drawSelected:Ember.observer("viewer","structure","gradient","normalizedData.[]","selectedPositions.[]",function(){Ember.run.once(this,"_drawSelected")}),_drawSelected:function(){var e=this.get("viewer"),t=this.get("structure"),n=this.get("selectedPositions"),r=this.get("gradient"),s=this.get("normalizedData")
if(e&&t&&r&&n&&s){e.rm("selectedPositions")
var a=e.customMesh("selectedPositions")
t.eachResidue(function(e){var t=e.num()
if(n.includes(t-1)){var o=e.atom(0).pos(),i=[1,1,1,1],l=s[t-1]
l=void 0===l?0:l,r.colorAt(i,l),a.addSphere(o,2,{color:i})}})}}})}),define("flea-app/pods/components/pv-wrapper/template",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.HTMLBars.template({id:"cscQDkHj",block:'{"symbols":[],"statements":[[6,"div"],[9,"class","hovered-label"],[7],[0,"\\n  "],[1,[18,"hoveredLabel"],false],[0,"\\n"],[8],[0,"\\n"]],"hasEval":false}',meta:{moduleName:"flea-app/pods/components/pv-wrapper/template.hbs"}})}),define("flea-app/pods/components/sequence-range-controls/component",["exports","flea-app/utils/utils"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0})
var n=function(){function e(e,t){var n=[],r=!0,s=!1,a=void 0
try{for(var o,i=e[Symbol.iterator]();!(r=(o=i.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){s=!0,a=e}finally{try{!r&&i.return&&i.return()}finally{if(s)throw a}}return n}return function(t,n){if(Array.isArray(t))return t
if(Symbol.iterator in Object(t))return e(t,n)
throw new TypeError("Invalid attempt to destructure non-iterable instance")}}()
e.default=Ember.Component.extend({tagName:"",inputClass:"input-valid",validRange:[0,1],rangeText:"",computedText:function(){return this.get("ranges").map(function(e){return(0,t.oneIndex)(e[0])+"-"+e[1]}).join(";")}.property("ranges","ranges.length","ranges.[]","ranges.[].[]"),updateText:function(){this.set("rangeText",this.get("computedText"))}.observes("computedText").on("init"),toController:function(e){var t=this.get("validRange"),r=n(t,2),s=r[0],a=r[1]
e=e.map(function(e){var t=n(e,2),r=t[0],o=t[1]
return r<s&&(r=s),o>a&&(o=a),[r,o]}),_.every(e.map(function(e){return e[0]<e[1]}))&&this.sendAction("setRanges",e)},actions:{moveRanges:function(e){for(var t=this.get("ranges"),r=this.get("validRange"),s=n(r,2),a=s[0],o=s[1],i=0;i<t.length;i++){var l=n(t[i],2),d=l[0],u=l[1]
a<=d+e&&d+e<=u+e&&u+e<=o&&(t[i][0]=d+e,t[i][1]=u+e)}this.toController(t)},setRange:function(e,t){var n=[[e,t]]
this.toController(n)},handleTextSubmit:function(){this.set("inputClass","input-valid")
var e=this.get("rangeText")
try{var t=e.split(";").map(function(e){var t=e.split("-")
if(2!==t.length)throw"wrong number of ranges"
return[+t[0]-1,+t[1]]})
this.toController(t)}catch(e){this.set("inputClass","input-invalid")}}}})}),define("flea-app/pods/components/sequence-range-controls/template",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.HTMLBars.template({id:"mkKy/RLY",block:'{"symbols":["region"],"statements":[[6,"div"],[9,"class","input-group-btn"],[7],[0,"\\n  "],[6,"button"],[9,"type","button"],[9,"class","btn btn-default btn-sm"],[9,"title","Jump left"],[3,"action",[[19,0,[]],"moveRanges",-5]],[7],[0,"\\n    "],[6,"i"],[7],[6,"i"],[9,"class","fa fa-fast-backward"],[9,"aria-hidden","true"],[7],[8],[8],[0,"\\n  "],[8],[0,"\\n"],[8],[0,"\\n"],[6,"div"],[9,"class","input-group-btn"],[7],[0,"\\n  "],[6,"button"],[9,"type","button"],[9,"class","btn btn-default btn-sm"],[9,"title","Move left"],[3,"action",[[19,0,[]],"moveRanges",-1]],[7],[0,"\\n    "],[6,"i"],[7],[6,"i"],[9,"class","fa fa-backward"],[9,"aria-hidden","true"],[7],[8],[8],[0,"\\n  "],[8],[0,"\\n"],[8],[0,"\\n"],[6,"span"],[9,"class","input-group-addon"],[7],[0,"Range"],[8],[0,"\\n"],[1,[25,"input",null,[["type","class","value","placeholder","autofocus","focus-out","insert-newline"],["string",[25,"concat",["form-control"," ",[25,"if",[[19,0,["inputClass"]],[25,"-normalize-class",["inputClass",[19,0,["inputClass"]]],null]],null]," "],null],[19,0,["rangeText"]],"reference coordinate range (e.g. 160-200)","autofocus","handleTextSubmit","handleTextSubmit"]]],false],[0,"\\n"],[6,"div"],[9,"class","input-group-btn"],[7],[0,"\\n  "],[6,"button"],[9,"type","button"],[9,"class","btn btn-default btn-sm"],[9,"title","Move right"],[3,"action",[[19,0,[]],"moveRanges",1]],[7],[0,"\\n    "],[6,"i"],[7],[6,"i"],[9,"class","fa fa-forward"],[9,"aria-hidden","true"],[7],[8],[8],[0,"\\n  "],[8],[0,"\\n"],[8],[0,"\\n"],[6,"div"],[9,"class","input-group-btn"],[7],[0,"\\n  "],[6,"button"],[9,"type","button"],[9,"class","btn btn-default btn-sm"],[9,"title","Jump right"],[3,"action",[[19,0,[]],"moveRanges",5]],[7],[0,"\\n    "],[6,"i"],[7],[6,"i"],[9,"class","fa fa-fast-forward"],[9,"aria-hidden","true"],[7],[8],[8],[0,"\\n  "],[8],[0,"\\n"],[8],[0,"\\n"],[4,"if",[[19,0,["predefinedRegions"]]],null,{"statements":[[0,"  "],[6,"div"],[9,"class","input-group-btn"],[7],[0,"\\n    "],[6,"button"],[9,"type","button"],[9,"class","btn btn-default dropdown-toggle"],[9,"data-toggle","dropdown"],[7],[0,"Predefined\\n      "],[6,"span"],[9,"class","caret"],[7],[8],[8],[0,"\\n    "],[6,"ul"],[9,"class","dropdown-menu"],[7],[0,"\\n"],[4,"each",[[19,0,["predefinedRegions"]]],null,{"statements":[[0,"\\t"],[6,"li"],[7],[0,"\\n\\t  "],[6,"a"],[9,"class","seq-predef"],[3,"action",[[19,0,[]],"setRange",[19,1,["start"]],[19,1,["stop"]]]],[7],[0,"\\n            "],[1,[19,1,["name"]],false],[0,"\\n\\t  "],[8],[0,"\\n\\t"],[8],[0,"\\n"]],"parameters":[1]},null],[0,"    "],[8],[0,"\\n  "],[8],[0,"\\n"]],"parameters":[]},null]],"hasEval":false}',meta:{moduleName:"flea-app/pods/components/sequence-range-controls/template.hbs"}})}),define("flea-app/pods/components/sequence-viewer/component",["exports","flea-app/utils/utils"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.Component.extend({nCols:1e3,groupedSequences:{},alnToRef:null,selectedPositions:[],selectDefault:!1,didInsertElement:function(){this._super.apply(this,arguments),this.$("#wrapped-table").on("scroll",function(){var e="translate(0,"+this.scrollTop+"px)"
this.querySelector("thead").style.transform=e})},refHTML:function(){for(var e=[],n=this.get("alnToRef"),r=this.get("alnRanges"),s=0;s<r.length;s++){for(var a=-1,o=r[s][0],i=r[s][1],l=o;l<i;l++){var d=(0,t.oneIndex)(n[l]),u=""
u=d<10?"  "+d:d<100?" "+d:""+d,a===d&&(u=" - ")
var c="ref_coord"
this.get("selectedPositions").includes(l)&&(c+=" selected_position"),u=u.split("").join("<br/>"),u+="<br/>",e.push({_class:c,dataCoord:l,html:u}),a=d}r.length>1&&s<r.length-1&&e.push({_class:"ref_coord seperator",dataCoord:"",html:"|<br/>|<br/>|"})}return e}.property("alnRanges","alnToRef","selectedPositions","selectedPositions.[]"),visiblePositiveSites:function(){for(var e=this.get("positiveSelection"),t=this.get("alnRanges"),n=[],r=0;r<e.length;r++){for(var s=[],a=e[r],o=0;o<t.length;o++)for(var i=t[o][0],l=t[o][1],d=0;d<a.length;d++){var u=a[d]
if(i<=u&&u<=l&&s.push(u),u>l)break}n.push(s)}return n}.property("positiveSelection.[]","alnRanges.[]"),selectAllPositive:function(){var e=this.get("visiblePositiveSites")[0]
this.sendSelected(e)},sendSelected:function(e){this.sendAction("setSelectedPositions",e)},actions:{togglePosition:function(e){e=+e
var t=this.get("selectedPositions"),n=t.indexOf(e)
n>-1?t.splice(n,1):t.push(e),this.sendSelected(t.slice())},clearPositions:function(){this.sendSelected([])},selectPositiveClicked:function(){this.selectAllPositive()}}})}),define("flea-app/pods/components/sequence-viewer/template",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.HTMLBars.template({id:"u4X2pR4e",block:'{"symbols":["group","seq","index","aa","aa","elt"],"statements":[[6,"div"],[9,"id","wrapped-table"],[7],[0,"  "],[2," for fixed header; see https://stackoverflow.com/a/25902860 "],[0,"\\n  "],[6,"table"],[9,"class","table table-condensed nostretch sequence-viewer-table"],[9,"id","sequence-viewer-table"],[7],[0,"\\n    "],[6,"thead"],[7],[0,"\\n      "],[6,"tr"],[7],[0,"\\n        "],[6,"th"],[9,"class","seq-cell seq-col-1"],[7],[0,"ref. coord."],[6,"br"],[7],[8],[0,"\\n          "],[6,"div"],[7],[0,"\\n            "],[6,"button"],[9,"title","Select positive sites"],[9,"type","button"],[9,"class","btn btn-default btn-sm"],[3,"action",[[19,0,[]],"selectPositiveClicked"]],[7],[6,"i"],[7],[6,"i"],[9,"class","fa fa-plus"],[9,"aria-hidden","true"],[7],[8],[8],[8],[0,"\\n            "],[6,"button"],[9,"title","Clear sites"],[9,"type","button"],[9,"class","btn btn-default btn-sm"],[3,"action",[[19,0,[]],"clearPositions"]],[7],[6,"i"],[7],[6,"i"],[9,"class","fa fa-remove"],[9,"aria-hidden","true"],[7],[8],[8],[8],[0,"\\n          "],[8],[0,"\\n        "],[8],[0,"\\n"],[4,"each",[[19,0,["refHTML"]]],null,{"statements":[[0,"          "],[6,"th"],[9,"class","seq-cell ref-coords"],[7],[0,"\\n            "],[6,"span"],[10,"class",[26,[[19,6,["_class"]]]]],[10,"data-coord",[26,[[19,6,["dataCoord"]]]]],[3,"action",[[19,0,[]],"togglePosition",[19,6,["dataCoord"]]]],[7],[0,"\\n              "],[1,[19,6,["html"]],true],[0,"\\n            "],[8],[0,"\\n          "],[8],[0,"\\n"]],"parameters":[6]},null],[0,"        "],[6,"th"],[9,"class","seq-cell copynumber-cell"],[7],[8],[0,"\\n        "],[6,"th"],[9,"class","seq-cell abundance-cell"],[7],[8],[0,"\\n      "],[8],[0,"\\n"],[4,"if",[[19,0,["reference"]]],null,{"statements":[[0,"        "],[6,"tr"],[7],[0,"\\n          "],[6,"th"],[9,"class","seq-cell seq-cell-title"],[7],[0,"\\n            Reference\\n          "],[8],[0,"\\n"],[4,"each",[[19,0,["reference"]]],null,{"statements":[[0,"\\t    "],[6,"th"],[10,"class",[26,["aa aa",[19,5,[]]]]],[7],[0,"\\n              "],[1,[19,5,[]],false],[0,"\\n\\t    "],[8],[0,"\\n"]],"parameters":[5]},null],[0,"          "],[6,"th"],[9,"class","seq-cell copynumber-cell"],[7],[8],[0,"\\n          "],[6,"th"],[9,"class","seq-cell abundance-cell"],[7],[8],[0,"\\n        "],[8],[0,"\\n"]],"parameters":[]},null],[0,"      "],[6,"tr"],[7],[0,"\\n        "],[6,"th"],[9,"class","seq-cell seq-cell-title"],[7],[0,"MRCA"],[8],[0,"\\n"],[4,"each",[[19,0,["mrca"]]],null,{"statements":[[0,"\\t  "],[6,"th"],[10,"class",[26,["aa aa",[19,4,[]]]]],[7],[0,"\\n            "],[1,[19,4,[]],false],[0,"\\n\\t  "],[8],[0,"\\n"]],"parameters":[4]},null],[0,"        "],[6,"th"],[9,"class","seq-cell copynumber-cell"],[7],[8],[0,"\\n        "],[6,"th"],[9,"class","seq-cell abundance-cell"],[7],[8],[0,"\\n      "],[8],[0,"\\n    "],[8],[0,"\\n    "],[6,"tbody"],[7],[0,"\\n"],[4,"each",[[19,0,["groupedSequences"]]],null,{"statements":[[4,"each",[[19,1,["sequences"]]],null,{"statements":[[0,"          "],[6,"tr"],[7],[0,"\\n            "],[6,"td"],[9,"class","seq-cell seq-group-label"],[7],[0,"\\n"],[4,"if",[[25,"eq",[[19,3,[]],0],null]],null,{"statements":[[0,"\\t\\t"],[1,[19,1,["label"]],false],[0,"\\n"]],"parameters":[]},null],[0,"\\t    "],[8],[0,"\\n\\t    "],[1,[19,2,["htmlRow"]],true],[0,"\\n            "],[6,"td"],[9,"class","seq-cell copynumber-cell"],[7],[0,"\\n"],[4,"bootstrap-popover",null,[["title","dataContent","placement"],["",[19,2,["html"]],"right"]],{"statements":[[0,"                "],[1,[19,2,["copyNumber"]],false],[0,"\\n"]],"parameters":[]},null],[0,"            "],[8],[0,"\\n            "],[6,"td"],[9,"class","seq-cell abundance-cell"],[7],[0,"\\n              "],[1,[25,"format-percent",[[19,2,["percent"]]],null],false],[0,"%\\n            "],[8],[0,"\\n          "],[8],[0,"\\n"]],"parameters":[2,3]},null],[0,"          "],[6,"tr"],[7],[0,"\\n            "],[6,"td"],[10,"colspan",[26,[[18,"nCols"]]]],[7],[0,"\\n\\t    "],[8],[0,"\\n          "],[8],[0,"\\n"]],"parameters":[1]},null],[0,"    "],[8],[0,"\\n  "],[8],[0,"\\n"],[8],[0,"\\n"]],"hasEval":false}',meta:{moduleName:"flea-app/pods/components/sequence-viewer/template.hbs"}})}),define("flea-app/pods/components/timeseries-plot/component",["exports","flea-app/utils/utils","flea-app/mixins/d3-plot-mixin","flea-app/mixins/width-height-mixin"],function(e,t,n,r){Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.Component.extend(n.default,r.default,{interpolation:"linear",ymin:null,data:[],data2:[],userColors:null,tickMap:{},margin:{top:20,right:50,bottom:60,left:50},seriesNames:function(){var e=this.get("data"),t=this.get("data2"),n=e.map(function(e){return e.name}),r=t.map(function(e){return e.name})
return n.concat(r)}.property("data.[].name","data2.[].name"),dates:function(){var e=this.get("data").map(function(e){return e.values.map(function(e){return e.x})})
return e=d3.set(d3.merge(e)).values(),e=e.map(function(e){return new Date(e)})}.property("data.[].values.[].x"),xDomain:function(){return d3.extent(this.get("dates"))}.property("dates.[]"),xScale:function(){var e=this.get("xDomain")
return e=e.map(function(e){return new Date(e)}),d3.time.scale().domain(e).range([0,this.get("innerWidth")])}.property("innerWidth","xDomain"),_yScale:function(e){var t=d3.max(e,function(e){return d3.max(e.values,function(e){return e.y})}),n=this.get("ymin")
return null===n&&(n=d3.min(e,function(e){return d3.min(e.values,function(e){return e.y})})),n===t&&(t+=1,n=Math.max(0,n-1)),d3.scale.linear().range([this.get("innerHeight"),0]).domain([n,t])},yScale:function(){return this._yScale(this.get("data"))}.property("innerHeight","data.[].values.[].y","ymin"),yScale2:function(){return this._yScale(this.get("data2"))}.property("innerHeight","data2.[].values.[].y","ymin"),d3Line:function(){var e=this.get("xScale"),t=this.get("yScale")
return d3.svg.line().x(function(t){return e(t.x)}).y(function(e){return t(e.y)}).interpolate(this.get("interpolation"))}.property("xScale","yScale","interpolation"),d3Line2:function(){var e=this.get("xScale"),t=this.get("yScale2")
return d3.svg.line().x(function(t){return e(t.x)}).y(function(e){return t(e.y)}).interpolate(this.get("interpolation"))}.property("xScale","yScale2","interpolation"),xAxisFormat:function(){var e=this.get("tickMap")
return function(n){return(0,t.mapIfPresent)(e,n)}}.property("tickMap"),xTickValues:function(){return this.get("dates")}.property("dates"),yAxisFormat:function(){return d3.format(".00")}.property(),seriesColors:function(){var e=this.get("userColors")
if(null!==e)return e
var t=this.get("seriesNames")
return(e=t.length<=10?d3.scale.category10():d3.scale.category20()).domain(t),e}.property("userColors","seriesNames"),_updateData:function(e,t,n){var r=d3.select("#"+this.get("elementId")).select(".inner"),s=this.get("seriesColors"),a=r.select(n).selectAll("path").data(e,function(e){return e.name})
a.enter().append("path").attr("class","timeseries_line"),a.attr("d",function(e){return t(e.values)}).style("stroke",function(e){return s(e.name)}),a.exit().remove()},_updateChart:function(){this._updateData(this.get("data"),this.get("d3Line"),".lines"),this._updateData(this.get("data2"),this.get("d3Line2"),".lines2")},onChartChange:function(){"inDOM"===this._state&&Ember.run.once(this,"_updateChart")}.observes("data.[].name","data.[].values.[].x","data.[].values.[].y","data2.[].name","data2.[].values.[].x","data2.[].values.[].y","d3Line","d3Line2","xScale","yScale","yScale2")})}),define("flea-app/pods/components/timeseries-plot/template",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.HTMLBars.template({id:"eYAHsxHc",block:'{"symbols":[],"statements":[[6,"g"],[10,"transform",[26,[[18,"innerGroupTransform"]]]],[9,"class","inner"],[7],[0,"\\n\\n  "],[1,[25,"graph-axis",null,[["class","transform","scale","tickFormat","tickValues","tickSize","tickPadding","rotate"],["x axis",[19,0,["xAxisTransform"]],[19,0,["xScale"]],[19,0,["xAxisFormat"]],[19,0,["xTickValues"]],12,3,45]]],false],[0,"\\n\\n  "],[1,[25,"graph-axis",null,[["class","orient","scale","tickFormat"],["y axis","left",[19,0,["yScale"]],[19,0,["yAxisFormat"]]]]],false],[0,"\\n\\n"],[4,"if",[[19,0,["data2"]]],null,{"statements":[[0,"    "],[1,[25,"graph-axis",null,[["class","transform","orient","scale","tickFormat"],["y axis",[19,0,["yAxisTransform"]],"right",[19,0,["yScale2"]],[19,0,["yAxisFormat"]]]]],false],[0,"\\n"]],"parameters":[]},null],[0,"\\n  "],[6,"g"],[9,"class","lines"],[7],[8],[0,"\\n  "],[6,"g"],[9,"class","lines2"],[7],[8],[0,"\\n\\n  "],[1,[25,"d3-legend",null,[["legendLabels","legendColors"],[[19,0,["seriesNames"]],[19,0,["seriesColors"]]]]],false],[0,"\\n"],[8],[0,"\\n"]],"hasEval":false}',meta:{moduleName:"flea-app/pods/components/timeseries-plot/template.hbs"}})}),define("flea-app/pods/session/controller",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.Controller.extend({})}),define("flea-app/pods/session/error/template",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.HTMLBars.template({id:"95o3XRcQ",block:'{"symbols":[],"statements":[[6,"div"],[9,"class","error-pane"],[7],[0,"\\n  "],[6,"div"],[9,"class","error-title"],[7],[0,"\\n    Something went wrong.\\n  "],[8],[0,"\\n  "],[6,"div"],[9,"class","error-message"],[7],[0,"\\n    This message will be more informative in the future. Maybe some data is missing?\\n  "],[8],[0,"\\n"],[8],[0,"\\n"]],"hasEval":false}',meta:{moduleName:"flea-app/pods/session/error/template.hbs"}})}),define("flea-app/pods/session/index/route",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.Route.extend({redirect:function(){this.transitionTo("session.mds")}})})
define("flea-app/pods/session/loading/template",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.HTMLBars.template({id:"FDEnNJQ7",block:'{"symbols":[],"statements":[[6,"div"],[9,"class","loading-pane"],[7],[0,"\\n  "],[6,"div"],[9,"class","loading-message"],[7],[0,"\\n    Fetching data from server\\n  "],[8],[0,"\\n\\n  "],[6,"div"],[9,"class","spinner"],[7],[0,"\\n    "],[6,"div"],[9,"class","rect1"],[7],[8],[0,"\\n    "],[6,"div"],[9,"class","rect2"],[7],[8],[0,"\\n    "],[6,"div"],[9,"class","rect3"],[7],[8],[0,"\\n    "],[6,"div"],[9,"class","rect4"],[7],[8],[0,"\\n    "],[6,"div"],[9,"class","rect5"],[7],[8],[0,"\\n  "],[8],[0,"\\n"],[8],[0,"\\n"]],"hasEval":false}',meta:{moduleName:"flea-app/pods/session/loading/template.hbs"}})}),define("flea-app/pods/session/mds/controller",["exports","flea-app/mixins/color-label-mixin"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.Controller.extend(t.default,{pattern:"",highlightedNodes:function(){var e=this.get("pattern")
if(!e)return[]
for(var t=e.split(/[ ,]+/).filter(Boolean),n=this.get("model.sequences.observed"),r=[],s=0;s<n.length;s++)for(var a=0;a<t.length;a++)n[s].id.search(t[a])>=0&&r.push(n[s].id)
return new Set(r)}.property("pattern")})}),define("flea-app/pods/session/mds/route",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.Route.extend({model:function(){var e=this.modelFor("session").session_id
return Ember.RSVP.hash({mds:this.store.find("mds",e),sequences:this.store.find("sequences",e),copynumbers:this.store.find("copynumbers",e),dates:this.store.find("dates",e)})}})}),define("flea-app/pods/session/mds/template",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.HTMLBars.template({id:"pamooXw5",block:'{"symbols":[],"statements":[[6,"div"],[9,"class","row"],[7],[0,"\\n  "],[6,"div"],[9,"class","col-md-12 pull-right"],[7],[0,"\\n    "],[6,"div"],[9,"class","input-group input-group-sm"],[7],[0,"\\n      "],[1,[25,"input",null,[["type","class","value","placeholder","autofocus"],["text",[25,"concat",["form-control"," ",[25,"if",[[19,0,["patternClass"]],[25,"-normalize-class",["patternClass",[19,0,["patternClass"]]],null]],null]," "],null],[19,0,["pattern"]],"Names to highlight","autofocus"]]],false],[0,"\\n      "],[6,"span"],[9,"class","input-group-addon"],[9,"title","Interpolate colors by date"],[7],[0,"\\n        Interpolate colors\\n        "],[1,[25,"input",null,[["type","checked"],["checkbox",[19,0,["rankColors"]]]]],false],[0,"\\n      "],[8],[0,"\\n    "],[8],[0,"\\n  "],[8],[0,"\\n"],[8],[0,"\\n\\n"],[6,"div"],[9,"class","row"],[7],[0,"\\n  "],[6,"div"],[9,"class","col-md-12"],[9,"id","_mds_viewer"],[7],[0,"\\n    "],[1,[25,"mds-viewer",null,[["data","copynumbers","nameToNodeLabel","nameToNodeColor","nameToMotifColor","nameToMotif","legendLabels","legendColors","highlightedNodes"],[[19,0,["model","mds"]],[19,0,["model","copynumbers"]],[19,0,["seqIdToNodeName"]],[19,0,["seqIdToNodeColor"]],[19,0,["seqIdToMotifColor"]],[19,0,["model","sequences","idToMotif"]],[19,0,["sortedVisitCodes"]],[19,0,["colorScaleVisitCode"]],[19,0,["highlightedNodes"]]]]],false],[0,"\\n  "],[8],[0,"\\n"],[8],[0,"\\n"]],"hasEval":false}',meta:{moduleName:"flea-app/pods/session/mds/template.hbs"}})}),define("flea-app/pods/session/neutralization/controller",["exports","flea-app/utils/utils"],function(e,t){function n(e){return s(100*e)+"%"}function r(e,t,n){return t in e||(e[t]=n),e[t]}Object.defineProperty(e,"__esModule",{value:!0})
var s=d3.format(".2f")
e.default=Ember.Controller.extend({mabNames:function(){var e=this.get("model.neutralization"),t=[]
for(var n in e)e.hasOwnProperty(n)&&t.push(n)
return t.sort(),t}.property("model.neutralization.[]"),mabFeatures:function(){for(var e=this.get("model.neutralization"),t=this.get("model.sequences.seqIdToDate"),n={},s=this.get("mabNames"),a=0;a<s.length;a++){var o=s[a]
if(e.hasOwnProperty(o))for(var i=e[o].predictions,l=r(n,o,{}),d=0;d<i.length;d++){var u=i[d]
if(u.id in t)for(var c=t[u.id],p=+u.value,f=r(r(l,c,{}),"features",[]),m=u.features,h=0;h<m.length;h++)f.push({name:m[h],value:p>0})}}return n}.property("mabName.[]","model.neutralization.[]","model.sequences.seqIdToDate"),sortedDates:function(){var e=this.get("model.dates"),t=[]
for(var n in e)e.hasOwnProperty(n)&&t.push(new Date(n))
return t.sort(function(e,t){return e<t?-1:1}),t}.property("model.dates.[]"),headerNames:function(){var e=this.get("sortedDates").map(function(e){return(0,t.format_date)(e)})
return e.splice(0,0,"mab"),e}.property("sortedDate.[]"),tableData:function(){var e=d3.interpolateRgb("white","red"),r=this.get("mabFeatures"),s=this.get("sortedDates"),a=[]
for(var o in r)if(r.hasOwnProperty(o)){var i=[]
i.push({value:o,style:"",html:""})
for(var l=0;l<s.length;l++){var d=s[l]
if(r[o].hasOwnProperty(d)){var u=r[o][d].features,c=0,p=[],f=[]
u.length>0&&(p=u.filter(function(e){return e.value}),f=u.filter(function(e){return!e.value}),c=p.length/(p.length+f.length))
var m=u.reduce(function(e,t){return t.name in e||(e[t.name]=[0,0]),t.value?e[t.name][1]+=1:e[t.name][0]+=1,e},{}),h=["feature","susceptible","resistant"],g=[]
for(var v in m)m.hasOwnProperty(v)&&g.push([v,m[v][0],m[v][1]])
var b=e(c)
i.push({value:n(c),style:"background-color: "+b,html:(0,t.htmlTable)(g,h)})}}a.push(i)}return a}.property("mabFeature.[]","sortedDate.[]")})}),define("flea-app/pods/session/neutralization/route",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.Route.extend({model:function(){var e=this.modelFor("session").session_id
return Ember.RSVP.hash({neutralization:this.store.find("neutralization",e),sequences:this.store.find("sequences",e),dates:this.store.find("dates",e)})}})}),define("flea-app/pods/session/neutralization/template",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.HTMLBars.template({id:"UjpMQzQc",block:'{"symbols":[],"statements":[[6,"div"],[9,"class","row"],[9,"id","neutralization"],[7],[0,"\\n  "],[6,"div"],[9,"class","col-md-12"],[7],[0,"\\n    "],[1,[25,"color-table",null,[["header","data"],[[19,0,["headerNames"]],[19,0,["tableData"]]]]],false],[0,"\\n  "],[8],[0,"\\n"],[8],[0,"\\n\\n"]],"hasEval":false}',meta:{moduleName:"flea-app/pods/session/neutralization/template.hbs"}})}),define("flea-app/pods/session/protein/controller",["exports","flea-app/utils/utils"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.Controller.extend({_metrics:["JS Divergence","dNdS","Entropy"],selectedMetric:"JS Divergence",markPositive:!0,labelCoordinates:!1,selectedTimepointIdx:0,application:Ember.inject.controller(),session:Ember.inject.controller(),currentPath:function(){var e=this.get("application.rootURL"),t=this.get("application.currentPath"),n=this.get("session.model.session_id")
return t=t.replace("session",n).replace(".","/"),e+t}.property("application.rootURL","application.currentPath","session.session_id"),metrics:function(){return this.get("model.rates.exists")?this.get("_metrics"):["JS Divergence"]}.property("model.rates.exists","_metrics"),labels:function(){var e=this.get("selectedMetric")
return"dNdS"===e?["Mean dS","Mean dN"]:[e]}.property("selectedMetric"),getRate:function(e,t){return e.map(function(e){return e.rates.map(function(e){return e[t]})})},meanDS:function(){var e=this.get("model.rates.sortedRates")
return this.getRate(e,0)}.property("model.rates.sortedRates.[].[]"),meanDN:function(){var e=this.get("model.rates.sortedRates")
return this.getRate(e,1)}.property("model.rates.sortedRates.[].[]"),entropy:function(){var e=this.get("model.rates.sortedRates")
return this.getRate(e,4)}.property("model.rates.sortedRates.[].[]"),divergence:function(){return this.get("model.divergence.sortedDivergence").map(function(e){return e.divergence})}.property("model.divergence.sortedDivergence"),data1:function(){var e=this.get("selectedMetric")
if("Entropy"===e)return this.get("entropy")
if("JS Divergence"===e)return this.get("divergence")
if("dNdS"===e)return this.get("meanDS")
throw"Invalid metric"}.property("selectedMetric","divergence","entropy","meanDS"),data2:function(){return"dNdS"===this.get("selectedMetric")?this.get("meanDN"):[]}.property("selectedMetric","divergence","entropy","meanDN"),structureData:function(){var e=this.get("selectedMetric")
if("Entropy"===e)return this.get("entropy")
if("JS Divergence"===e)return this.get("divergence")
if("dNdS"===e){for(var t=this.get("meanDN"),n=this.get("meanDS"),r=[],s=0;s<t.length;s++){var a=_.zip(t[s],n[s]).map(function(e){return Math.log(e[0]/e[1])})
r.push(a)}return r}throw{name:"UnknownMetricError",message:e}}.property("model.coordinates.refToFirstAlnCoords","meanDN","meanDS","entropy","divergence","selectedMetric"),selectedStructureData:function(){var e=this.get("selectedTimepointIdx"),t=this.get("structureData")[e]
if(!t)return null
var n=this.get("model.coordinates.refToFirstAlnCoords")
return _.map(n,function(e){return t[e]||0})}.property("structureData","selectedTimepointIdx","timepointNames.length","model.coordinates.refToFirstAlnCoords"),selectedReferencePositions:function(){var e=this.get("model.sequences.selectedPositions"),t=this.get("model.coordinates.alnToRefCoords"),n=_.map(e,function(e){return t[e]})
return _.uniq(n)}.property("model.sequences.selectedPositions","model.coordinates.alnToRefCoords"),structureDataRange:function(){var e=this.get("structureData"),t=d3.min(e,function(e){return d3.min(e)}),n=d3.max(e,function(e){return d3.max(e)})
if(t<0&&n>0){var r=Math.max(Math.abs(t),n)
t=-r,n=r}return[t,n]}.property("structureData"),timepoints:function(){return"JS Divergence"===this.get("selectedMetric")?this.get("model.divergence.sortedDivergence").map(function(e){return e.date}):this.get("model.rates.sortedRates").map(function(e){return e.date})}.property("model.rates.sortedRates.[].[]","selectedMetric"),timepointNames:function(){var e=this.get("timepoints"),n=this.get("model.dates")
return e.map(function(e){return"Combined"===e?e:((0,t.isString)(e)&&(e=(0,t.parse_date)(e)),(0,t.mapIfPresent)(n,e))})}.property("timepoints.[]"),ticks:function(){var e=this.get("timepointNames.length")
return _.range(e)}.property("timepointNames.length"),selectedName:function(){return this.get("timepointNames")[this.get("selectedTimepointIdx")]}.property("timepointNames","selectedTimepointIdx"),positions:function(){return this.get("markPositive")?this.get("model.rates.positiveSelection"):[]}.property("markPositive","model.rates.positiveSelection"),actions:{selectMetric:function(e){null!=e&&this.set("selectedMetric",e)}}})}),define("flea-app/pods/session/protein/route",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.Route.extend({model:function(){var e=this.modelFor("session").session_id
return Ember.RSVP.hash({rates:this.store.find("rates",e),sequences:this.store.find("sequences",e),structure:this.store.find("structure",e),coordinates:this.store.find("coordinates",e),divergence:this.store.find("divergence",e),dates:this.store.find("dates",e)})}})}),define("flea-app/pods/session/protein/template",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.HTMLBars.template({id:"/sOngHRW",block:'{"symbols":["metric"],"statements":[[6,"div"],[9,"class","row"],[7],[0,"\\n  "],[6,"div"],[9,"class","col-sm-12"],[7],[0,"\\n    "],[6,"div"],[9,"class","pv-viewer"],[7],[0,"\\n"],[4,"if",[[19,0,["selectedName"]]],null,{"statements":[[0,"\\t"],[6,"span"],[9,"class","pv-title"],[7],[1,[18,"selectedName"],false],[8],[0,"\\n"]],"parameters":[]},null],[0,"      "],[1,[25,"pv-wrapper",null,[["structure","data","range","selectedPositions","shouldLabelCoordinates"],[[19,0,["model","structure"]],[19,0,["selectedStructureData"]],[19,0,["structureDataRange"]],[19,0,["selectedReferencePositions"]],[19,0,["labelCoordinates"]]]]],false],[0,"\\n    "],[8],[0,"\\n  "],[8],[0,"\\n"],[8],[0,"\\n\\n"],[6,"div"],[9,"class","row"],[7],[0,"\\n  "],[6,"div"],[9,"class","form-horizontal control-group timepoint-slider"],[7],[0,"\\n    "],[6,"div"],[9,"class","col-sm-3 timepoint-label"],[7],[0,"\\n      "],[6,"output"],[7],[0,"Select time point:"],[8],[0,"\\n    "],[8],[0,"\\n    "],[6,"div"],[9,"class","col-sm-6"],[7],[0,"\\n      "],[1,[25,"ui-slider",null,[["defaultValue","value","ticks","ticksLabels","step","tooltip","min","max","focus","naturalArrowKeys","immediateResponse"],[0,[19,0,["selectedTimepointIdx"]],[19,0,["ticks"]],[19,0,["timepointNames"]],1,"hide",0,[19,0,["ticks","length"]],true,true,true]]],false],[0,"\\n    "],[8],[0,"\\n    "],[6,"div"],[9,"class","col-sm-3"],[7],[0,"\\n    "],[8],[0,"\\n  "],[8],[0,"\\n"],[8],[0,"\\n\\n"],[6,"div"],[9,"class","row"],[7],[0,"\\n  "],[6,"div"],[9,"class","col-sm-1"],[7],[0,"\\n  "],[8],[0,"\\n  "],[6,"div"],[9,"class","col-sm-10"],[7],[0,"\\n    "],[6,"div"],[9,"class","input-group input-group-sm"],[7],[0,"\\n      "],[6,"span"],[9,"class","input-group-addon"],[7],[0,"\\n        "],[6,"label"],[9,"for","protein_regions"],[7],[0,"Metric to plot"],[8],[0,"\\n"],[4,"power-select",null,[["options","selected","placeholder","onchange"],[[19,0,["metrics"]],[19,0,["selectedMetric"]],"Select metric",[25,"action",[[19,0,[]],[25,"mut",[[19,0,["selectedMetric"]]],null]],null]]],{"statements":[[0,"\\t  "],[1,[19,1,[]],false],[0,"\\n"]],"parameters":[1]},null],[0,"      "],[8],[0,"\\n      "],[6,"span"],[9,"class","input-group-addon"],[7],[0,"\\n\\t"],[6,"label"],[7],[0,"Label coordinates"],[8],[0,"\\n\\t"],[1,[25,"input",null,[["type","name","checked"],["checkbox","labelCoordinates",[19,0,["labelCoordinates"]]]]],false],[0,"\\n      "],[8],[0,"\\n      "],[6,"span"],[9,"class","input-group-addon"],[7],[0,"\\n        "],[6,"label"],[7],[0,"Mark positively selected sites"],[8],[0,"\\n        "],[1,[25,"input",null,[["type","name","checked"],["checkbox","markPositive",[19,0,["markPositive"]]]]],false],[0,"\\n      "],[8],[0,"\\n    "],[8],[0,"\\n  "],[8],[0,"\\n  "],[6,"div"],[9,"class","col-sm-1"],[7],[0,"\\n  "],[8],[0,"\\n"],[8],[0,"\\n\\n"],[6,"div"],[9,"class","row"],[7],[0,"\\n  "],[6,"div"],[9,"class","col-sm-12"],[9,"id","_protein_plots"],[7],[0,"\\n    "],[1,[25,"protein-plots",null,[["names","data1","data2","positions","labels","url","alnToRefCoords","refToFirstAlnCoords"],[[19,0,["timepointNames"]],[19,0,["data1"]],[19,0,["data2"]],[19,0,["positions"]],[19,0,["labels"]],[19,0,["currentPath"]],[19,0,["model","coordinates","alnToRefCoords"]],[19,0,["model","coordinates","refToFirstAlnCoords"]]]]],false],[0,"\\n  "],[8],[0,"\\n"],[8],[0,"\\n"]],"hasEval":false}',meta:{moduleName:"flea-app/pods/session/protein/template.hbs"}})}),define("flea-app/pods/session/route",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.Route.extend({model:function(e){return Ember.RSVP.hash({session_id:e.session_id})}})}),define("flea-app/pods/session/sequences/controller",["exports","flea-app/utils/utils","flea-app/mixins/color-label-mixin","flea-app/utils/parser"],function(e,t,n,r){function s(e){for(var t=0;t<e.length;t++){for(var n=e[t].sequences,r=0,s=0;s<n.length;s++)r+=n[s].copyNumber
for(var a=0;a<n.length;a++)n[a].percent=100*n[a].copyNumber/r}return e}function a(e,t){for(var n=0;n<e.length;n++){var r=e[n].sequences.filter(function(e){return e.percent>=t})
e[n].sequences=r}return e}function o(e){var t=_.groupBy(e,function(e){return e.sequence}),n=[]
for(var r in t)if(t.hasOwnProperty(r)){for(var s=t[r],a=[],o=0,i=0;i<s.length;i++)a.push(s[i].ids[0]),o+=s[i].copyNumber
n.push({sequence:s[0].sequence,ids:a,copyNumber:o})}return n}function i(e){for(var n=0;n<e.length;n++)for(var r=e[n].sequences,s=0;s<r.length;s++)r[s].html=(0,t.htmlTable1D)(r[s].ids,["Sequence ID"])
return e}function l(e,n,r){for(var s=0;s<e.length;s++){var a;(function(s){a=e[s].sequences
for(var o=0;o<a.length;o++)(function(e){for(var o=a[e],i=(0,t.regexRanges)(n,o.sequence),l=new Set,u=0;u<i.length;u++)for(var c=i[u],p=c[0];p<=c[1];p++)l.add(p)
var f=_.map(o.sequence.split(""),function(e,t){var n=l.has(s)
return d(e,r[t],n)})
o.htmlRow=f.join("")})(o)})(s)}return e}function d(e,t,n){var r="|"===(e=e.toUpperCase())?"seperator":"-"===e?"aa aaGap":"aa aa"+e
return n&&(r+=" pngs"),e=e===t&&"-"!==e?".":e,Ember.String.htmlSafe('<td class="'+r+'">'+e+"</td>")}Object.defineProperty(e,"__esModule",{value:!0})
var u=function(){function e(e,t){var n=[],r=!0,s=!1,a=void 0
try{for(var o,i=e[Symbol.iterator]();!(r=(o=i.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){s=!0,a=e}finally{try{!r&&i.return&&i.return()}finally{if(s)throw a}}return n}return function(t,n){if(Array.isArray(t))return t
if(Symbol.iterator in Object(t))return e(t,n)
throw new TypeError("Invalid attempt to destructure non-iterable instance")}}()
e.default=Ember.Controller.extend(n.default,{ranges:[[159,200]],_pattern:"N[^P][ST]",pattern:"N[^P][ST]",patternDefault:"N[^P][ST]",_regex:"",patternClass:"input-valid",_threshold:1,threshold:1,markPositive:!0,defaultMaxMotifs:10,_maxMotifs:10,maxMotifs:10,_oldKeys:[],reference:function(){for(var e=this.get("model.sequences.reference"),t=this.get("model.coordinates.alnToRefCoords"),n=[e.sequence[0]],r=1;r<t.length;r++)t[r]===t[r-1]?n.push("-"):n.push(e.sequence[r])
return e.sequence=n.join(""),e}.property("model.sequences.reference","model.coordinates.alnToRefCoords"),regex:function(){this.set("patternClass","input-valid")
var e=this.get("pattern")
if(0===e.length)return".^"
try{for(var t=[],n=r.default.parse(e),s=0;s<n.length;s++){var a=n[s]
if("amino"===a.type)t.push(a.value+a.postmod)
else{var o=a.value
"^"===a.premod&&(o+="\\|\\-"),t.push("["+a.premod+o+"]"+a.postmod)}}t=t.join("-*"),new RegExp(t,"g"),this.set("_regex",t)}catch(e){this.set("patternClass","input-invalid")}return this.get("_regex")}.property("pattern"),validAlnRange:function(){return[0,this.get("model.coordinates.alnToRefCoords.length")]}.property("model.coordinates.alnToRefCoords.length"),toSlices:function(e,t){return t.map(function(t){return e.slice(t[0],t[1])}).join("|")},mrcaSlice:function(){var e=this.get("model.sequences.mrca"),t=this.get("alnRanges")
return this.toSlices(e.sequence,t)}.property("model.sequences.mrca","alnRanges"),mrcaSplit:function(){return this.get("mrcaSlice").split("")}.property("mrcaSlice"),refSlice:function(){var e=this.get("reference")
if(0===e.length)return""
var t=this.get("alnRanges")
return this.toSlices(e.sequence,t)}.property("model.sequences.mrca","alnRanges"),refSplit:function(){return this.get("refSlice").split("")}.property("refSlice"),groupedSequences:function(){var e=this,n=this.get("model.sequences.observed"),r=this.get("model.copynumbers"),d=[],u=this.get("alnRanges"),c=_.groupBy(n,function(e){return e.get("date")}),p=this.get("model.dates")
for(var f in c)if(c.hasOwnProperty(f)){var m=c[f].map(function(t){var n=e.toSlices(t.sequence,u),s=0
if(!(t.id in r))throw"copynumbers for sequence "+t.id+" not found"
return s=r[t.id],{sequence:n,copyNumber:s,ids:[t.id]}});(m=o(m)).sort(function(e,t){return t.copyNumber-e.copyNumber})
var h=new Date(f)
d.push({date:h,label:(0,t.mapIfPresent)(p,h),sequences:m})}return d.sort(function(e,t){return e.date-t.date}),d.forEach(function(e){e.date=(0,t.format_date)(e.date)}),d=s(d),d=a(d,this.get("threshold")),d=i(d),d=l(d,this.get("regex"),this.get("mrcaSlice"))}.property("alnRanges","mrcaSlice","model.copynumbers","model.sequences.observed.[]","regex","threshold"),sortedRanges:function(){var e=this.get("ranges")
return e.sort(function(e,t){return e[0]-t[0]}),e}.property("ranges"),alnRanges:function(){var e=this.get("sortedRanges");(0,t.checkRanges)(e,this.get("model.coordinates.refRange"))
var n=this.get("model.coordinates.refToFirstAlnCoords"),r=this.get("model.coordinates.refToLastAlnCoords"),s=e.map(function(e){return[(0,t.transformIndex)(e[0],n,!1),(0,t.transformIndex)(e[1],r,!0)]})
return(0,t.checkRanges)(s,this.get("validAlnRange")),s}.property("ranges","model.coordinates.refToFirstAlnCoords","model.coordinates.refToLastAlnCoords"),aaTrajectories:function(){for(var e=this.get("model.sequences.observed"),t=this.get("model.copynumbers"),n=this.get("model.sequences.idToMotif"),r={},s={},a=0;a<e.length;a++){var o=e[a],i=n[o.get("id")]
if(r.hasOwnProperty(i)||(r[i]={}),r[i].hasOwnProperty(o.date)||(r[i][o.date]=0),!(o.id in t))throw"copynumbers for sequence "+o.id+" not found"
r[i][o.date]+=t[o.id],s.hasOwnProperty(o.date)||(s[o.date]=0),s[o.date]+=t[o.id]}var l=[]
for(var d in r)if(r.hasOwnProperty(d)){var u=[]
for(var c in s)if(s.hasOwnProperty(c)){var p=0
r[d].hasOwnProperty(c)&&(p=r[d][c]/s[c]),u.push({x:new Date(c),y:p})}l.push({name:d,values:u})}return l}.property("model.sequences.observed.[]","model.sequences.idToMotif.[]"),cappedTrajectories:function(){for(var e=this.get("aaTrajectories"),t=this.get("maxMotifs"),n=0;n<e.length;n++){var r=e[n],s=_.max(r.values.map(function(e){return e.y}))
e[n].tmax=s}if(e.sort(function(e,t){return t.tmax-e.tmax}),e.length>t){for(var a=e.slice(0,t),o=e.slice(t),i=o[0].values,l=1;l<o.length;l++)for(var d=o[l].values,u=0;u<d.length;u++)i[u].y+=d[u].y
a.push({name:"Other",values:i}),e=a}return e}.property("aaTrajectories","maxMotifs"),sortedDates:function(){var e=this.get("model.dates"),t=_.keys(e).map(function(e){return new Date(e)})
return t.sort(function(e,t){return e<t?-1:1}),t}.property("model.dates"),trajectoryData:function(){var e=this.get("cappedTrajectories"),t=this.get("_oldKeys"),n=e.map(function(e){return e.name})
this.set("_oldKeys",n)
var r=this.get("motifColorScale"),s=e.map(function(e){var t=e.values
t.sort(function(e,t){return e.x-t.x})
var n=t.map(function(e){return e.y})
return n.unshift(e.name),n}),a={}
e.forEach(function(e){a[e.name]=r(e.name)})
var o=this.get("sortedDates"),i=["x"].concat(o)
return s.push(i),{x:"x",columns:s,unload:t,type:"spline",spline:{interpolation:{type:"monotone"}},colors:a}}.property("cappedTrajectories","sortedDates","motifColorScale"),trajectoryAxis:function(){var e=this.get("model.dates")
return{x:{type:"timeseries",tick:{format:function(t){return t in e?e[t]:moment(t).format("YYYY-MM-DD")}}}}}.property("sortedDates"),transition:{duration:0},tooltip:{format:{value:d3.format(".4f")}},validPredefinedRegions:function(){var e=this.get("model.coordinates.refRange"),t=u(e,2),n=t[0],r=t[1]
return this.get("model.predefinedRegions").filter(function(e){return e.start>=n&&e.stop<=r})}.property("model.predefinedRegions","model.coordinates.refRange"),actions:{doPattern:function(){this.set("pattern",this.get("_pattern"))},doThreshold:function(){var e=this.get("_threshold")
""===e&&(e=0),(e=+e)>=0&&e<=100&&(this.set("_threshold",e),this.set("threshold",e))},doMaxMotifs:function(){var e=this.get("_maxMotifs")
""===e&&(e=this.get("defaultMaxMotifs")),(e=+e)>=1&&e<=100&&(this.set("_maxMotifs",e),this.set("maxMotifs",e))},resetPattern:function(){this.set("_pattern",this.get("patternDefault")),this.set("pattern",this.get("patternDefault"))},updateAlnRange:function(e,n){(0,t.checkRange)(n,this.get("validAlnRange"))
var r=this.get("model.coordinates.alnToRefCoords"),s=this.get("sortedRanges").slice(0)
s[e]=[(0,t.transformIndex)(n[0],r,!1),(0,t.transformIndex)(n[1],r,!0)],s.sort(function(e,t){return e[0]-t[0]}),this.set("ranges",s)},setRanges:function(e){(0,t.checkRanges)(e,this.get("model.coordinates.refRange")),this.set("ranges",e)},addRange:function(e){(0,t.checkRange)(e,this.get("model.coordinates.refRange"))
var n=this.get("sortedRanges").slice(0)
n.push(e),this.set("ranges",n)},rmRange:function(e){var t=this.get("sortedRanges")
this.set("ranges",t.filter(function(t,n){return n!==e}))},setSelectedPositions:function(e){var t=this.get("validAlnRange")[1]
e&&_.every(e,function(e){return e>=0&&e<t})&&this.set("model.sequences.selectedPositions",e)}}})}),define("flea-app/pods/session/sequences/route",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.Route.extend({model:function(){var e=this.modelFor("session").session_id
return Ember.RSVP.hash({sequences:this.store.find("sequences",e),coordinates:this.store.find("coordinates",e),rates:this.store.find("rates",e),copynumbers:this.store.find("copynumbers",e),predefinedRegions:this.store.find("predefined-regions",e),dates:this.store.find("dates",e)})}})}),define("flea-app/pods/session/sequences/template",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.HTMLBars.template({id:"GGUXivBM",block:'{"symbols":[],"statements":[[6,"div"],[9,"class","row"],[7],[0,"\\n  "],[6,"div"],[9,"class","col-md-12"],[7],[0,"\\n    "],[6,"div"],[9,"class","input-group input-group-sm"],[7],[0,"\\n      "],[1,[25,"sequence-range-controls",null,[["ranges","validRange","predefinedRegions","setRanges"],[[19,0,["sortedRanges"]],[19,0,["model","coordinates","refRange"]],[19,0,["validPredefinedRegions"]],"setRanges"]]],false],[0,"\\n      "],[1,[25,"input",null,[["type","class","value","placeholder","autofocus","focus-out","insert-newline"],["text",[25,"concat",["form-control"," ",[25,"if",[[19,0,["patternClass"]],[25,"-normalize-class",["patternClass",[19,0,["patternClass"]]],null]],null]," "],null],[19,0,["_pattern"]],"Pattern to highlight","autofocus","doPattern","doPattern"]]],false],[0,"\\n      "],[6,"div"],[9,"class","input-group-btn"],[7],[0,"\\n        "],[6,"button"],[9,"type","button"],[9,"class","btn btn-default btn-sm"],[9,"title","Reset pattern"],[3,"action",[[19,0,[]],"resetPattern"]],[7],[0,"\\n          "],[6,"i"],[7],[6,"i"],[9,"class","fa fa-undo"],[9,"aria-hidden","true"],[7],[8],[8],[0,"\\n        "],[8],[0,"\\n      "],[8],[0,"\\n      "],[6,"span"],[9,"class","input-group-addon"],[7],[0,"Threshold %"],[8],[0,"\\n      "],[1,[25,"input",null,[["type","class","value","min","max","step","placeholder","autofocus","focus-out","insert-newline","size"],["number","form-control",[19,0,["_threshold"]],"0","100","0.01","%","autofocus","doThreshold","doThreshold","1"]]],false],[0,"\\n      "],[6,"span"],[9,"class","input-group-addon"],[7],[0,"\\n        Mark selected sites\\n        "],[1,[25,"input",null,[["type","name","checked"],["checkbox","markPositive",[19,0,["markPositive"]]]]],false],[0,"\\n      "],[8],[0,"\\n      "],[6,"span"],[9,"class","input-group-addon"],[7],[0,"Motifs"],[8],[0,"\\n      "],[1,[25,"input",null,[["type","class","value","min","max","step","placeholder","autofocus","focus-out","insert-newline","size"],["number","form-control",[19,0,["_maxMotifs"]],"1","100","1","10","autofocus","doMaxMotifs","doMaxMotifs","1"]]],false],[0,"\\n    "],[8],[0,"\\n  "],[8],[0,"\\n"],[8],[0,"\\n"],[6,"br"],[7],[8],[0,"\\n"],[6,"div"],[9,"class","row"],[7],[0,"\\n  "],[6,"div"],[9,"class","col-md-12 trajectoryPlot"],[7],[0,"\\n"],[4,"if",[[19,0,["model","sequences","selectedPositions"]]],null,{"statements":[[0,"      "],[1,[25,"c3-chart",null,[["data","axis","transition","tooltip"],[[19,0,["trajectoryData"]],[19,0,["trajectoryAxis"]],[19,0,["transition"]],[19,0,["tooltip"]]]]],false],[0,"\\n"]],"parameters":[]},null],[0,"  "],[8],[0,"\\n"],[8],[0,"\\n\\n"],[6,"div"],[9,"class","row"],[7],[0,"\\n  "],[6,"div"],[9,"class","col-md-12"],[9,"id","_alignment_overview"],[7],[0,"\\n    "],[1,[25,"alignment-overview",null,[["alnRanges","validAlnRange","markPositive","positiveSelection","selectedPositions","predefinedRegions","alnToRefCoords","refToFirstAlnCoords","refToLastAlnCoords","updateRange","setRanges","addRange","rmRange"],[[19,0,["alnRanges"]],[19,0,["validAlnRange"]],[19,0,["markPositive"]],[19,0,["model","rates","positiveSelection"]],[19,0,["model","sequences","selectedPositions"]],[19,0,["validPredefinedRegions"]],[19,0,["model","coordinates","alnToRefCoords"]],[19,0,["model","coordinates","refToFirstAlnCoords"]],[19,0,["model","coordinates","refToLastAlnCoords"]],"updateAlnRange","setRanges","addRange","rmRange"]]],false],[0,"\\n  "],[8],[0,"\\n"],[8],[0,"\\n\\n"],[6,"div"],[9,"class","row"],[7],[0,"\\n  "],[6,"div"],[9,"class","col-md-12"],[9,"id","_sequence_viewer"],[7],[0,"\\n    "],[1,[25,"sequence-viewer",null,[["groupedSequences","alnRanges","mrca","reference","selectedPositions","alnToRef","positiveSelection","regex","selectDefault","setSelectedPositions"],[[19,0,["groupedSequences"]],[19,0,["alnRanges"]],[19,0,["mrcaSplit"]],[19,0,["refSplit"]],[19,0,["model","sequences","selectedPositions"]],[19,0,["model","coordinates","alnToRefCoords"]],[19,0,["model","rates","positiveSelection"]],[19,0,["regex"]],true,"setSelectedPositions"]]],false],[0,"\\n  "],[8],[0,"\\n"],[8],[0,"\\n"]],"hasEval":false}',meta:{moduleName:"flea-app/pods/session/sequences/template.hbs"}})}),define("flea-app/pods/session/template",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.HTMLBars.template({id:"AEdAnlNW",block:'{"symbols":[],"statements":[[6,"div"],[9,"class","container-fluid"],[9,"id","allofit"],[7],[0,"\\n  "],[6,"ul"],[9,"class","nav nav-tabs"],[7],[0,"\\n    "],[6,"li"],[7],[4,"link-to",["session.mds",[19,0,["model","session_id"]]],[["data-toggle"],["tab"]],{"statements":[[0,"MDS"]],"parameters":[]},null],[8],[0,"\\n    "],[6,"li"],[7],[4,"link-to",["session.trajectory",[19,0,["model","session_id"]]],[["data-toggle"],["tab"]],{"statements":[[0,"Evolutionary trajectory"]],"parameters":[]},null],[8],[0,"\\n    "],[6,"li"],[7],[4,"link-to",["session.protein",[19,0,["model","session_id"]]],[["data-toggle"],["tab"]],{"statements":[[0,"Protein"]],"parameters":[]},null],[8],[0,"\\n    "],[6,"li"],[7],[4,"link-to",["session.sequences",[19,0,["model","session_id"]]],[["data-toggle"],["tab"]],{"statements":[[0,"Sequences"]],"parameters":[]},null],[8],[0,"\\n    "],[6,"li"],[7],[4,"link-to",["session.trees",[19,0,["model","session_id"]]],[["data-toggle"],["tab"]],{"statements":[[0,"Trees"]],"parameters":[]},null],[8],[0,"\\n  "],[8],[0,"\\n\\n"],[1,[18,"outlet"],false],[0,"\\n\\n"],[8],[0,"\\n"]],"hasEval":false}',meta:{moduleName:"flea-app/pods/session/template.hbs"}})}),define("flea-app/pods/session/trajectory/controller",["exports"],function(e){function t(e,t,s){return 0===t.length||0===s.length?[]:t.length>1?s.length>1?r(e,t[0],s):n(e,t,s[0]):r(e,t[0],s)}function n(e,t,n){for(var r=[],s=0;s<t.length;s++){for(var a=t[s],o={name:a.name},i=[],l=0;l<e.length;l++)if(a.name===e[l].Segment){var d={x:e[l].Date,y:e[l][n.name]}
i.push(d)}i.sort(function(e,t){return e.x-t.x}),o.values=i,r.push(o)}return r}function r(e,t,n){for(var r=[],s=0;s<n.length;s++){for(var a=n[s],o={name:a.name},i=[],l=0;l<e.length;l++)if(t.name===e[l].Segment){var d={x:e[l].Date,y:e[l][a.name]}
i.push(d)}i.sort(function(e,t){return e.x-t.x}),o.values=i,r.push(o)}return r}Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.Controller.extend({regions:[{name:"gp160"},{name:"signal"},{name:"c1"},{name:"v1"},{name:"v2"},{name:"c2"},{name:"v3"},{name:"c3"},{name:"v4"},{name:"c4"},{name:"v5"},{name:"c5"},{name:"fusion"},{name:"gp41ecto"},{name:"mper"},{name:"gp41endo"}],selectedRegions:[{name:"gp160"}],evoMetrics:[{name:"ds_divergence"},{name:"dn_divergence"},{name:"total_divergence"},{name:"ds_diversity"},{name:"dn_diversity"},{name:"total_diversity"}],selectedEvoMetrics:[{name:"ds_divergence"},{name:"dn_divergence"},{name:"total_divergence"},{name:"total_diversity"}],phenoMetrics:[{name:"Length"},{name:"PNGS"},{name:"IsoelectricPoint"}],selectedPhenoMetrics:[{name:"Length"},{name:"PNGS"}],firstEvoRegion:function(){var e=this.get("selectedRegions")
return this.get("selectedEvoMetrics.length")>1&&e.length>1?e[0].name:""}.property("selectedRegions.[]","selectedEvoMetrics.length"),firstPhenoRegion:function(){var e=this.get("selectedRegions")
return this.get("selectedPhenoMetrics.length")>1&&e.length>1?e[0].name:""}.property("selectedRegions.[]","selectedPhenoMetrics.length"),excludedPhenoMetric:function(){return this.get("selectedPhenoMetrics.length")>2?"extra metrics":""}.property("selectedPhenoMetrics.length"),evoData:function(){return t(this.get("model.trajectory"),this.get("selectedRegions"),this.get("selectedEvoMetrics"))}.property("model.trajectory","selectedRegions.[]","selectedEvoMetrics.[]"),_phenoData:function(){var e=this.get("model.trajectory"),n=this.get("selectedRegions"),r=this.get("selectedPhenoMetrics")
return r.length>2&&(r=r.slice(0,2)),t(e,n,r)},phenoData:function(){return this._phenoData(0)}.property("model.trajectory","selectedRegions.[]","selectedPhenoMetrics.[]"),phenoData2:function(){var e=[]
return this.get("selectedPhenoMetrics.length")>1&&(e=this._phenoData(1)),e}.property("model.trajectory","selectedRegions.[]","selectedPhenoMetrics.[]")})}),define("flea-app/pods/session/trajectory/route",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.Route.extend({model:function(){var e=this.modelFor("session").session_id
return Ember.RSVP.hash({dates:this.store.find("dates",e),trajectory:this.store.find("trajectory",e),disabled:!1})}})}),define("flea-app/pods/session/trajectory/template",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.HTMLBars.template({id:"NWViOH0Z",block:'{"symbols":["phenoMetric","evoMetric","region"],"statements":[[4,"if",[[19,0,["model","disabled"]]],null,{"statements":[[0,"  "],[6,"div"],[9,"class","error-pane"],[7],[0,"\\n    "],[6,"div"],[9,"class","error-title"],[7],[0,"\\n      Evolutionary data not available\\n    "],[8],[0,"\\n    "],[6,"div"],[9,"class","error-message"],[7],[0,"\\n      This analysis was disabled in the pipeline.\\n    "],[8],[0,"\\n  "],[8],[0,"\\n"]],"parameters":[]},{"statements":[[0,"  "],[6,"div"],[9,"class","form-inline"],[7],[0,"\\n    "],[6,"div"],[9,"class","form-group"],[7],[0,"\\n      "],[6,"label"],[9,"for","evo_regions"],[7],[0,"Region(s) to plot"],[8],[0,"\\n    "],[8],[0,"\\n    "],[6,"div"],[9,"class","form-group"],[7],[0,"\\n"],[4,"power-select-multiple",null,[["options","selected","searchPlaceholder","searchField","onchange"],[[19,0,["regions"]],[19,0,["selectedRegions"]],"Select region(s)","name",[25,"action",[[19,0,[]],[25,"mut",[[19,0,["selectedRegions"]]],null]],null]]],{"statements":[[0,"\\t"],[1,[19,3,["name"]],false],[0,"\\n"]],"parameters":[3]},null],[0,"    "],[8],[0,"\\n\\n    "],[6,"div"],[9,"class","form-group"],[7],[0,"\\n      "],[6,"label"],[9,"for","evo_metrics"],[7],[0,"Evolutionary metrics"],[8],[0,"\\n    "],[8],[0,"\\n    "],[6,"div"],[9,"class","form-group"],[7],[0,"\\n"],[4,"power-select-multiple",null,[["options","selected","searchPlaceholder","searchField","onchange"],[[19,0,["evoMetrics"]],[19,0,["selectedEvoMetrics"]],"Select metric(s)","name",[25,"action",[[19,0,[]],[25,"mut",[[19,0,["selectedEvoMetrics"]]],null]],null]]],{"statements":[[0,"\\t"],[1,[19,2,["name"]],false],[0,"\\n"]],"parameters":[2]},null],[0,"    "],[8],[0,"\\n\\n"],[4,"if",[[19,0,["firstEvoRegion"]]],null,{"statements":[[0,"      "],[6,"div"],[9,"class","form-group"],[7],[0,"\\n\\t"],[6,"label"],[9,"class","text-error"],[7],[0,"(Only showing "],[1,[18,"firstEvoRegion"],false],[0,")"],[8],[0,"\\n      "],[8],[0,"\\n"]],"parameters":[]},null],[0,"\\n  "],[8],[0,"\\n\\n  "],[6,"div"],[9,"class","row"],[7],[0,"\\n    "],[6,"div"],[9,"class","col-md-12"],[9,"id","_timeseries_plot"],[7],[0,"\\n      "],[1,[25,"timeseries-plot",null,[["data","ymin","tickMap"],[[19,0,["evoData"]],0,[19,0,["model","dates"]]]]],false],[0,"\\n    "],[8],[0,"\\n  "],[8],[0,"\\n\\n  "],[6,"div"],[9,"class","form-inline"],[7],[0,"\\n    "],[6,"div"],[9,"class","form-group"],[7],[0,"\\n      "],[6,"label"],[9,"for","_pheno_metrics"],[7],[0,"Phenotype metrics"],[8],[0,"\\n    "],[8],[0,"\\n    "],[6,"div"],[9,"class","form-group"],[7],[0,"\\n"],[4,"power-select-multiple",null,[["options","selected","searchPlaceholder","searchField","onchange"],[[19,0,["phenoMetrics"]],[19,0,["selectedPhenoMetrics"]],"Select metric(s)","name",[25,"action",[[19,0,[]],[25,"mut",[[19,0,["selectedPhenoMetrics"]]],null]],null]]],{"statements":[[0,"\\t"],[1,[19,1,["name"]],false],[0,"\\n"]],"parameters":[1]},null],[0,"    "],[8],[0,"\\n"],[4,"if",[[19,0,["firstPhenoRegion"]]],null,{"statements":[[0,"      "],[6,"div"],[9,"class","form-group"],[7],[0,"\\n\\t"],[6,"label"],[9,"class","text-error"],[7],[0,"(Only showing "],[1,[18,"firstPhenoRegion"],false],[0,")"],[8],[0,"\\n      "],[8],[0,"\\n"]],"parameters":[]},null],[4,"if",[[19,0,["excludedPhenoMetric"]]],null,{"statements":[[0,"      "],[6,"div"],[9,"class","form-group"],[7],[0,"\\n\\t"],[6,"label"],[9,"class","text-error"],[7],[0,"(Not showing "],[1,[18,"excludedPhenoMetric"],false],[0,")"],[8],[0,"\\n      "],[8],[0,"\\n"]],"parameters":[]},null],[0,"  "],[8],[0,"\\n\\n  "],[6,"div"],[9,"class","row"],[7],[0,"\\n    "],[6,"div"],[9,"class","col-md-12"],[9,"id","_timeseries_plot"],[7],[0,"\\n      "],[1,[25,"timeseries-plot",null,[["data","data2","tickMap"],[[19,0,["phenoData"]],[19,0,["phenoData2"]],[19,0,["model","dates"]]]]],false],[0,"\\n    "],[8],[0,"\\n  "],[8],[0,"\\n"]],"parameters":[]}]],"hasEval":false}',meta:{moduleName:"flea-app/pods/session/trajectory/template.hbs"}})}),define("flea-app/pods/session/trees/controller",["exports","flea-app/mixins/color-label-mixin"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.Controller.extend(t.default,{showCopynumber:!0,overlapNodes:!0,radialLayout:!0,sortState:"ascending",heightScale:1,hideCopynumber:Ember.computed.not("showCopynumber"),actions:{setSortState:function(e){this.set("sortState",e)}}})}),define("flea-app/pods/session/trees/route",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.Route.extend({model:function(){var e=this.modelFor("session").session_id
return Ember.RSVP.hash({tree:this.store.find("trees",e),copynumbers:this.store.find("copynumbers",e),sequences:this.store.find("sequences",e),dates:this.store.find("dates",e)})}})}),define("flea-app/pods/session/trees/template",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.HTMLBars.template({id:"L7DqFOMe",block:'{"symbols":["nodeNameType"],"statements":[[6,"div"],[9,"class","row"],[7],[0,"\\n  "],[6,"div"],[9,"class","col-md-2"],[7],[0,"\\n    "],[6,"div"],[9,"class","btn-toolbar"],[9,"role","toolbar"],[7],[0,"\\n      "],[6,"div"],[9,"class","btn-group"],[7],[0,"\\n        "],[6,"button"],[9,"type","button"],[9,"class","btn btn-default btn-sm"],[9,"id","sort_ascending"],[9,"title","Sort deepest clades to the bottom"],[3,"action",[[19,0,[]],"setSortState","ascending"]],[7],[0,"\\n          "],[6,"i"],[7],[6,"i"],[9,"class","fa fa-sort-amount-asc"],[9,"aria-hidden","true"],[7],[8],[8],[0,"\\n        "],[8],[0,"\\n        "],[6,"button"],[9,"type","button"],[9,"class","btn btn-default btn-sm"],[9,"id","sort_descending"],[9,"title","Sort deepest clades to the top"],[3,"action",[[19,0,[]],"setSortState","descending"]],[7],[0,"\\n          "],[6,"i"],[7],[6,"i"],[9,"class","fa fa-sort-amount-desc"],[9,"aria-hidden","true"],[7],[8],[8],[0,"\\n        "],[8],[0,"\\n        "],[6,"button"],[9,"type","button"],[9,"class","btn btn-default btn-sm"],[9,"id","sort_original"],[9,"title","Restore original order"],[3,"action",[[19,0,[]],"setSortState","original"]],[7],[0,"\\n          "],[6,"i"],[7],[6,"i"],[9,"class","fa fa-sort"],[9,"aria-hidden","true"],[7],[8],[8],[0,"\\n        "],[8],[0,"\\n      "],[8],[0,"\\n    "],[8],[0,"\\n  "],[8],[0,"\\n  "],[6,"div"],[9,"class","col-md-3"],[7],[0,"\\n    "],[1,[25,"ui-slider",null,[["value","step","tooltip","min","max","focus","naturalArrowKeys","immediateResponse"],[[19,0,["heightScale"]],0.1,"hide",0,1,false,false,false]]],false],[0,"\\n  "],[8],[0,"\\n  "],[6,"div"],[9,"class","col-md-7 pull-right"],[7],[0,"\\n    "],[6,"div"],[9,"class","input-group input-group-sm"],[7],[0,"\\n      "],[6,"span"],[9,"class","input-group-addon"],[9,"title","Show copynumber"],[7],[0,"\\n        Show copynumber\\n        "],[1,[25,"input",null,[["type","checked"],["checkbox",[19,0,["showCopynumber"]]]]],false],[0,"\\n      "],[8],[0,"\\n      "],[6,"span"],[9,"class","input-group-addon"],[9,"title","Overlap nodes"],[7],[0,"\\n        Overlap nodes\\n        "],[1,[25,"input",null,[["type","checked","disabled"],["checkbox",[19,0,["overlapNodes"]],[19,0,["hideCopynumber"]]]]],false],[0,"\\n      "],[8],[0,"\\n      "],[6,"span"],[9,"class","input-group-addon"],[9,"title","Change to radial layout"],[7],[0,"\\n        Radial layout\\n        "],[1,[25,"input",null,[["type","checked"],["checkbox",[19,0,["radialLayout"]]]]],false],[0,"\\n      "],[8],[0,"\\n      "],[6,"span"],[9,"class","input-group-addon"],[9,"title","Interpolate colors by date"],[7],[0,"\\n        Interpolate colors\\n        "],[1,[25,"input",null,[["type","checked"],["checkbox",[19,0,["rankColors"]]]]],false],[0,"\\n      "],[8],[0,"\\n      "],[6,"span"],[9,"class","input-group-addon"],[7],[0,"\\n        Node names\\n      "],[8],[0,"\\n"],[4,"power-select",null,[["options","selected","placeholder","onchange"],[[19,0,["nodeNameTypes"]],[19,0,["nodeNameType"]],"Node label",[25,"action",[[19,0,[]],[25,"mut",[[19,0,["nodeNameType"]]],null]],null]]],{"statements":[[0,"\\t  "],[1,[19,1,[]],false],[0,"\\n"]],"parameters":[1]},null],[0,"    "],[8],[0,"\\n  "],[8],[0,"\\n"],[8],[0,"\\n\\n"],[6,"div"],[9,"class","row"],[7],[0,"\\n  "],[6,"div"],[9,"class","col-md-12"],[9,"id","_tree_enclosure"],[7],[0,"\\n    "],[1,[25,"phylotree-widget",null,[["tree","copynumbers","sortState","do_copy_number","seqIdToNodeName","seqIdToNodeColor","seqIdToMotifColor","seqIdToMotif","radialLayout","showCopynumber","overlapNodes","heightScale"],[[19,0,["model","tree"]],[19,0,["model","copynumbers"]],[19,0,["sortState"]],true,[19,0,["seqIdToNodeName"]],[19,0,["seqIdToNodeColor"]],[19,0,["seqIdToMotifColor"]],[19,0,["model","sequences","idToMotif"]],[19,0,["radialLayout"]],[19,0,["showCopynumber"]],[19,0,["overlapNodes"]],[19,0,["heightScale"]]]]],false],[0,"\\n  "],[8],[0,"\\n"],[8],[0,"\\n"]],"hasEval":false}',meta:{moduleName:"flea-app/pods/session/trees/template.hbs"}})}),define("flea-app/pods/store/model",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0})
var t=Ember.getOwner,n={}
e.default=Ember.Object.extend({find:function(e,r){var s=r+e
return n[s]?n[s]:t(this).lookup("adapter:"+e).find(r).then(function(e){return n[s]=e,e})}})}),define("flea-app/resolver",["exports","ember-resolver"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=t.default}),define("flea-app/router",["exports","flea-app/config/environment"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0})
var n=Ember.Router.extend({location:t.default.locationType,rootURL:t.default.rootURL})
n.map(function(){this.route("session",{path:"/results/:session_id"},function(){this.route("trajectory",{path:"/trajectory"}),this.route("mds",{path:"/mds"}),this.route("protein",{path:"/protein"}),this.route("sequences",{path:"/sequences"}),this.route("trees",{path:"/trees"})})}),e.default=n}),define("flea-app/services/ajax",["exports","ember-ajax/services/ajax"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}})}),define("flea-app/services/resize",["exports","ember-resize/services/resize"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}})}),define("flea-app/services/text-measurer",["exports","ember-text-measurer/services/text-measurer"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}})}),define("flea-app/templates/application",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.HTMLBars.template({id:"UyMEVus2",block:'{"symbols":[],"statements":[[1,[18,"welcome-page"],false],[0,"\\n"],[0,"\\n"],[1,[18,"outlet"],false]],"hasEval":false}',meta:{moduleName:"flea-app/templates/application.hbs"}})}),define("flea-app/utils/parser",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0})
var t=function(){function e(e,t,n,r,s,a){this.message=e,this.expected=t,this.found=n,this.offset=r,this.line=s,this.column=a,this.name="SyntaxError"}return function(e,t){function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n}(e,Error),{SyntaxError:e,parse:function(t){function n(e){return k!==e&&(k>e&&(k=0,A={line:1,column:1,seenCR:!1}),function(e,n,r){var s,a
for(s=k;s<r;s++)"\n"===(a=t.charAt(s))?(e.seenCR||e.line++,e.column=1,e.seenCR=!1):"\r"===a||"\u2028"===a||"\u2029"===a?(e.line++,e.column=1,e.seenCR=!0):(e.column++,e.seenCR=!1)}(A,0,e),k=e),A}function r(e){q<N||(q>N&&(N=q,D=[]),D.push(e))}function s(r,s,a){var o=n(a),i=a<t.length?t.charAt(a):null
return null!==s&&function(e){var t=1
for(e.sort(function(e,t){return e.description<t.description?-1:e.description>t.description?1:0});t<e.length;)e[t-1]===e[t]?e.splice(t,1):t++}(s),new e(null!==r?r:function(e,t){var n,r,s,a=new Array(e.length)
for(s=0;s<e.length;s++)a[s]=e[s].description
return n=e.length>1?a.slice(0,-1).join(", ")+" or "+a[e.length-1]:a[0],r=t?'"'+function(e){function n(e){return e.charCodeAt(0).toString(16).toUpperCase()}return t.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\x08/g,"\\b").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\f/g,"\\f").replace(/\r/g,"\\r").replace(/[\x00-\x07\x0B\x0E\x0F]/g,function(e){return"\\x0"+n(e)}).replace(/[\x10-\x1F\x80-\xFF]/g,function(e){return"\\x"+n(e)}).replace(/[\u0180-\u0FFF]/g,function(e){return"\\u0"+n(e)}).replace(/[\u1080-\uFFFF]/g,function(e){return"\\u"+n(e)})}()+'"':"end of input","Expected "+n+" but "+r+" found."}(s,i),s,i,a,o.line,o.column)}function a(){var e,t
if(e=[],(t=o())!==f)for(;t!==f;)e.push(t),t=o()
else e=g
return e}function o(){var e
return(e=i())===f&&(e=l()),e}function i(){var e,n,s
return e=q,v.test(t.charAt(q))?(n=t.charAt(q),q++):(n=f,0===I&&r(b)),n!==f&&(s=u())!==f?(E=e,e=n=y(n,s)):(q=e,e=g),e}function l(){var e,n,s,a,o,i
if(e=q,91===t.charCodeAt(q)?(n=x,q++):(n=f,0===I&&r(_)),n!==f)if((s=d())!==f){if(a=[],v.test(t.charAt(q))?(o=t.charAt(q),q++):(o=f,0===I&&r(b)),o!==f)for(;o!==f;)a.push(o),v.test(t.charAt(q))?(o=t.charAt(q),q++):(o=f,0===I&&r(b))
else a=g
a!==f?(93===t.charCodeAt(q)?(o=P,q++):(o=f,0===I&&r(w)),o!==f&&(i=u())!==f?(E=e,e=n=M(s,a,i)):(q=e,e=g)):(q=e,e=g)}else q=e,e=g
else q=e,e=g
return e}function d(){var e,n
return e=q,R.test(t.charAt(q))?(n=t.charAt(q),q++):(n=f,0===I&&r(O)),n===f&&(n=j),n!==f&&(E=e,n=C(n)),e=n}function u(){var e,n
return e=q,T.test(t.charAt(q))?(n=t.charAt(q),q++):(n=f,0===I&&r(S)),n===f&&(n=j),n!==f&&(E=e,n=C(n)),e=n}var c,p=arguments.length>1?arguments[1]:{},f={},m={start:a},h=a,g=f,v=/^[A-Z]/,b={type:"class",value:"[A-Z]",description:"[A-Z]"},y=function(e,t){return{type:"amino",value:e,postmod:t}},x="[",_={type:"literal",value:"[",description:'"["'},P="]",w={type:"literal",value:"]",description:'"]"'},M=function(e,t,n){return{type:"include",value:t.join(""),premod:e,postmod:n}},j=null,R=/^[\S\s]/,O={type:"class",value:"[^]",description:"[^]"},C=function(e){return e||""},T=/^[*+]/,S={type:"class",value:"[*+]",description:"[*+]"},q=0,E=0,k=0,A={line:1,column:1,seenCR:!1},N=0,D=[],I=0
if("startRule"in p){if(!(p.startRule in m))throw new Error("Can't start parsing from rule \""+p.startRule+'".')
h=m[p.startRule]}if((c=h())!==f&&q===t.length)return c
throw c!==f&&q<t.length&&r({type:"end",description:"end of input"}),s(null,D,N)}}}()
e.default=t}),define("flea-app/utils/utils",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0})
var t=function(){function e(e,t){var n=[],r=!0,s=!1,a=void 0
try{for(var o,i=e[Symbol.iterator]();!(r=(o=i.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){s=!0,a=e}finally{try{!r&&i.return&&i.return()}finally{if(s)throw a}}return n}return function(t,n){if(Array.isArray(t))return t
if(Symbol.iterator in Object(t))return e(t,n)
throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),n=function(e){return Object.prototype.toString.call(e).slice(8,-1)},r=(e.isDate=function(e){return"Object"===n(e)},e.isString=function(e){return"String"===n(e)},e.parse_date=d3.time.format("%Y%m%d").parse,e.format_date=d3.time.format("%B %Y"),e.htmlTable1D=function(e,t){return r(e.map(function(e){return[e]}),t)},e.htmlTable=function(e,t){if(0===e.length)return"<table></table>"
var n='<table class="table-striped table table-hover">'
if(t){n+="<thead>",n+="<trow>"
for(var r=0;r<t.length;r++)n+="<th>",n+=t[r],n+="</th>"
n+="</trow>",n+="</thead>"}n+="<tbody>"
for(var s=0;s<e.length;s++){n+="<tr>"
for(var a=0;a<e[s].length;a++)n+="<td>",n+=e[s][a],n+="</td>"
n+="</tr>"}return n+="</tbody>",n+="</table>"}),s=(e.regexRanges=function(e,t){var n=[]
if(!e)return n
for(var r,s=new RegExp(e,"g");null!==(r=s.exec(t));)n.push([r.index,r.index+r[0].length-1])
return n},e.sumArray=function(e,t){var n=0
t||(t=function(e){return e})
for(var r=0;r<e.length;r++)n+=t(e[r])
return n},e.transformIndex=function(e,t,n){var r
return n&&(e-=1),r=e>=t.length?t[t.length-1]:t[e],n&&(r+=1),r},e.checkRange=function(e,n){var r=t(e,2),s=r[0],a=r[1],o=t(n,2),i=o[0],l=o[1]
if(s<i||s>l)throw"invalid start position"
if(a<i||a>l)throw"invalid stop position"
if(s>=a)throw"invalid range"}),a=(e.checkRanges=function(e,t){for(var n=0;n<e.length;n++)s(e[n],t)},e.oneIndex=function(e){if(e<0)throw"invalid index"
return e+1},e.zeroIndex=function(e){if(e<1)throw"invalid index"
return e-1})
e.alignmentTicks=function(e,t,n){var r=e[0],s=e[e.length-1],o=_.range(Math.ceil(r/n)*n,1+Math.floor(s/n)*n,n)
return 0===o[0]&&(o[0]=1),(o=o.map(function(e){return a(e)}))[0]!==r&&o.unshift(r),o[o.length-1]!==s&&o.push(s),o.map(function(e){return t[e]})},e.refToAlnCoords=function(e,t){for(var n=new Array(t),r=new Array(t),s=-1,a=0;a<e.length;a++){var o=e[a]
if(r[o]=a,o!==s&&(n[o]=a),s>-1)for(var i=s+1;i<o;i++)n[i]=a,r[i]=a-1
s=o}return[n,r]},e.mapIfPresent=function(e,t){return t in e?e[t]:t},e.insertNested=function(e,t,n){for(var r=0;r<t.length-1;r++){var s=t[r]
s in e||(e[s]={}),e=e[s]}e[t[t.length-1]]=n},e.seqIdToProperty=function(e,t){return e?e.reduce(function(e,n){return e[n.get("id")]=n.get(t),e},{}):{}}})
define("flea-app/config/environment",[],function(){try{var e="flea-app/config/environment",t=document.querySelector('meta[name="'+e+'"]').getAttribute("content"),n={default:JSON.parse(unescape(t))}
return Object.defineProperty(n,"__esModule",{value:!0}),n}catch(t){throw new Error('Could not read config from meta tag with name "'+e+'".')}}),runningTests||require("flea-app/app").default.create({name:"flea-app",version:"0.0.0+2f1a17e7"})
