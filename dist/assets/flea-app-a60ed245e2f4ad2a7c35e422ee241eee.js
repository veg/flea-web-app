define("flea-app/adapters/dates",["exports","ember","../config/environment","ic-ajax","../utils/utils"],function(e,t,s,n,a){"use strict";e["default"]=t["default"].Object.extend({find:function(e){var t=s["default"].baseURL+"data/"+e+"/dates";return n["default"](t).then(function(e){var t={};for(var s in e)if(e.hasOwnProperty(s)){var n=a.parse_date(s);t[n]=e[s]}return t})}})}),define("flea-app/adapters/frequencies",["exports","ember","../config/environment","ic-ajax"],function(e,t,s,n){"use strict";var a=t["default"].Object.extend({data:[],alnToRefCoords:function(){var e=this.get("data"),t=[];for(var s in e)e.hasOwnProperty(s)&&t.push([parseInt(s)-1,parseInt(e[s].HXB2)-1]);return t.sort(function(e,t){return e[0]-t[0]}),t.map(function(e){return e[1]})}.property("data.@each"),refToFirstAlnCoords:function(){for(var e,t=this.get("alnToRefCoords"),s=t[t.length-1],n=new Array(s),a=t.length-1;a>-1;a--)e=t[a],n[e]=a;return n}.property("alnToRefCoords"),refToLastAlnCoords:function(){for(var e,t=this.get("alnToRefCoords"),s=t[t.length-1],n=new Array(s),a=0;a<t.length;a++)e=t[a],n[e]=a;return n}.property("alnToRefCoords")});e["default"]=t["default"].Object.extend({find:function(e){var t=s["default"].baseURL+"data/"+e+"/frequencies";return n["default"](t).then(function(e){return a.create({data:e})})}})}),define("flea-app/adapters/neutralization",["exports","ember","../config/environment","ic-ajax"],function(e,t,s,n){"use strict";e["default"]=t["default"].Object.extend({find:function(e){var t=s["default"].baseURL+"data/"+e+"/neutralization";return n["default"](t).then(function(e){return e})}})}),define("flea-app/adapters/rates",["exports","ember","../config/environment","ic-ajax","../utils/utils"],function(exports,Ember,config,request,utils){"use strict";function positive_selection_positions(e){return e.map(function(e,t){return[t,e[2]]}).filter(function(e){return e[1]>=.95}).map(function(e){return e[0]+1})}var RateInfo=Ember["default"].Object.extend({date:null,rates:null}),RatesObject=Ember["default"].Object.extend({data:[],sortedRates:function(){var e=this.get("data"),t=e.filter(function(e){return"Combined"!==e.date}),s=e.filter(function(e){return"Combined"===e.date});return t.sort(function(e,t){return e.date-t.date}),t.splice(0,0,s[0]),t}.property("data.@each"),positiveSelection:function(){var e=this.get("sortedRates");return e.map(function(e){return positive_selection_positions(e.rates)})}.property("sortedRates")});exports["default"]=Ember["default"].Object.extend({find:function(session_id){var url=config["default"].baseURL+"data/"+session_id+"/rates";return request["default"](url).then(function(result){var new_result=[];for(var name in result)if(result.hasOwnProperty(name)){var d=name,array=eval(result[name]);"Combined"!==name&&(d=utils.parse_date(name)),new_result.push(RateInfo.create({date:d,rates:array}))}return RatesObject.create({data:new_result})})}})}),define("flea-app/adapters/sequences",["exports","ember","../config/environment","ic-ajax","../utils/utils"],function(e,t,s,n,a){"use strict";function r(e){var t=o.exec(e);return t?parseInt(t[1]):1}function i(e,s,n,i){return null!==s&&(s=a.parse_date(s)),t["default"].Object.create({id:e,date:s,copyNumber:r(e),sequence:n,type:i,selected:!0})}e["default"]=t["default"].Object.extend({find:function(e){var t=s["default"].baseURL+"data/"+e+"/sequences";return n["default"](t).then(function(e){var t=[];for(var s in e)if(e.hasOwnProperty(s))if("MRCA"!==s)if("Combined"!==s){var n=s,a=e[s];for(var r in a)if(a.hasOwnProperty(r)){var o=a[r];for(var l in o)if(o.hasOwnProperty(l)){var u=o[l],c=i(l,n,u,r);t.push(c)}}}else{var p=e[s];for(var h in p)if(p.hasOwnProperty(h)){var d=p[h],f=i(h,null,d,"Combined");t.push(f)}}else t.push(i("mrca",null,e[s],"MRCA"));return t})}});var o=/_([0-9]+)$/}),define("flea-app/adapters/structure",["exports","ember","../config/environment","ic-ajax"],function(e,t,s,n){"use strict";e["default"]=t["default"].Object.extend({find:function(){var e=s["default"].baseURL+"assets/env_structure.pdb";return n["default"](e).then(function(e){var t=pv.io.pdb(e);return t})}})}),define("flea-app/adapters/trajectory",["exports","ember","../config/environment","ic-ajax","../utils/utils"],function(e,t,s,n,a){"use strict";e["default"]=t["default"].Object.extend({find:function(e){var t=s["default"].baseURL+"data/"+e+"/rates_pheno";return n["default"](t).then(function(e){return e.forEach(function(e){e.Date=a.parse_date(String(e.Date));for(var t in e)"Segment"!==t&&"Date"!==t&&(e[t]=+e[t])}),e})}})}),define("flea-app/adapters/trees",["exports","ember","../config/environment","ic-ajax","../utils/utils"],function(e,t,s,n,a){"use strict";function r(e,s,n,r){return"Combined"!==e&&(e=a.parse_date(e)),t["default"].Object.create({date:e,region:s,distance:n,tree:r})}e["default"]=t["default"].Object.extend({find:function(e){var t=s["default"].baseURL+"data/"+e+"/trees";return n["default"](t).then(function(e){var t=[];for(var s in e)if(e.hasOwnProperty(s))for(var n in e[s])if(e[s].hasOwnProperty(n))for(var a in e[s][n])e[s][n].hasOwnProperty(a)&&t.push(r(s,n,a,e[s][n][a]));return t})}})}),define("flea-app/app",["exports","ember","ember/resolver","ember/load-initializers","./config/environment"],function(e,t,s,n,a){"use strict";t["default"].MODEL_FACTORY_INJECTIONS=!0;var r=t["default"].Application.extend({modulePrefix:a["default"].modulePrefix,podModulePrefix:a["default"].podModulePrefix,Resolver:s["default"]});n["default"](r,a["default"].modulePrefix),e["default"]=r}),define("flea-app/components/bootstrap-popover",["exports","ember"],function(e,t){"use strict";e["default"]=t["default"].Component.extend({tagName:"a",attributeBindings:["tabindex","dataToggle:data-toggle","dataTrigger:data-trigger","title","dataContent:data-content","placement"],classNames:["popover-link"],tabindex:"0",dataToggle:"popover",dataTrigger:"focus",title:"Title",dataContent:"Content",html:!0,placement:"auto right",didInsertElement:function(){this.$().popover({html:this.get("html"),placement:this.get("placement")})}.observes("dataContent","html","placement")})}),define("flea-app/components/gene-plots",["exports","ember"],function(e,t){"use strict";e["default"]=t["default"].Component.extend({tagName:"svg",attributeBindings:["width","height"],width:850,heightEach:80,labelHeight:25,margin:{top:20,right:0,bottom:50,left:30},height:function(){var e=this.get("margin");return e.top+e.bottom+this.get("names.length")*this.get("heightEach")+this.get("labelHeight")}.property("heightEach","margin","names.length","labelHeight"),didInsertElement:function(){this._updateChart()},innerWidth:function(){var e=this.get("margin");return this.get("width")-e.left-e.right}.property("width","margin"),innerHeight:function(){var e=this.get("margin");return this.get("height")-e.top-e.bottom}.property("height","margin"),innerGroupTransform:function(){var e=this.get("margin");return"translate(%@, %@)".fmt(e.left,e.top)}.property("margin"),onChartChange:function(){"inDOM"===this.state&&this._updateChart()}.observes("name.@each","data1.[].[]","data2.[].[]","positions.[].[]","labels.[]","width","height","heightEach","margin","yMax","labelHeight"),yMax:function(){var e=this.get("data1"),t=this.get("data2");return[d3.max(_.flatten(e)),d3.max(_.flatten(t))]}.property("data1.[].[]","data2.[].[]"),_updateChart:function(){var e=function(){h.domain(f.empty()?d.domain():f.extent());for(var e=0;e<x.length;e++)x[e].select("._pos_dS").attr("d",S[e][0]),g&&x[e].select("._pos_dN").attr("d",S[e][1]),x[e].selectAll(".selected_site").attr("cx",function(e){return h(e)});p.select(".pos.x.axis").call(v)},t=this.get("names"),s=this.get("data1"),n=this.get("data2"),a=this.get("positions"),r=this.get("labels"),i=this.get("innerWidth"),o=this.get("innerHeight"),l=this.get("heightEach"),u=this.get("url"),c=(this.get("margin"),s[0].length),p=d3.select("#"+this.get("elementId")).select(".inner");p.selectAll("path").remove(),p.selectAll("g").remove(),p.selectAll("defs").remove(),p.append("defs").append("clipPath").attr("id","clip").append("rect").attr("width",i).attr("height",o),p=p.append("g");for(var h=d3.scale.linear().range([0,i]).domain([1,c]),d=d3.scale.linear().range([0,i]).domain([1,c]),f=d3.svg.brush().x(d).on("brush",e),g=n.length>0,m=this.get("yMax"),b=d3.scale.linear().range([l,0]).domain([g?-m[1]:0,m[0]]),v=d3.svg.axis().scale(h).orient("bottom"),y=d3.svg.axis().scale(d).orient("top"),x=[],S=[],I=0;I<t.length;I++){var T=p.append("g").attr("transform","translate(0,"+l*I+")"),R=[];R[0]=d3.svg.area().x(function(e,t){return h(t+1)}).y0(function(){return b(0)}).y1(function(e){return b(e)}).interpolate("step"),g&&(R[1]=d3.svg.area().x(function(e,t){return h(t+1)}).y0(function(e){return b(-e)}).y1(function(){return b(0)}).interpolate("step")),S.push(R),T.append("text").attr("transform","translate(0,"+b(0)+") rotate (-90)").attr("y","0").attr("dy","-0.5em").style("text-anchor",g?"middle":"start").text(t[I]),T.append("path").datum(s[I]).attr("class","_pos_dS").attr("clip-path","url("+u+"#clip)").attr("d",R[0]),g&&T.append("path").datum(n[I]).attr("clip-path","url("+u+"#clip)").attr("class","_pos_dN").attr("d",R[1]),0===I?T.append("g").attr("class","x brush").call(f).selectAll("rect").attr("y",-6).attr("height",l+7):x.push(T),a.length>0&&T.selectAll(".selected_site").data(a[I]).enter().append("circle").attr("cx",function(e){return h(e)}).attr("cy",function(){return b(0)}).attr("r",4).attr("class","selected_site").attr("clip-path","url("+u+"#clip)").append("title").text(function(e){return"Codon "+e})}p.append("g").attr("class","pos x_overall axis").call(y).append("text").attr("transform","translate(0,0)").attr("dy","-.4em").attr("dx",".25em").style("text-anchor","start").text("Site");var D=this.get("labelHeight");if(p.append("g").attr("class","pos x axis").attr("transform","translate(0,"+(o-D)+")").call(v).append("text").attr("transform","translate(0,0)").attr("dy","+1.1em").attr("dx",".25em").style("text-anchor","start").text("Site"),r.length>0){var C={x:0,y:o-D+10,spacer:15,margin:5,font:10,x_step:100},_=["#2E66FF","#FFB314"],N=p.append("g").attr("class","gene_legend").attr("x",C.x).attr("y",C.y).attr("transform","translate("+C.x+","+C.y+")");N.selectAll("g").data(r).enter().append("g").each(function(e,t){var s=d3.select(this);s.append("rect").attr("y",C.spacer).attr("x",t*(C.spacer+C.margin+C.x_step)).attr("width",C.spacer).attr("height",C.spacer).style("fill",_[t]),s.append("text").attr("y",2*C.spacer).attr("x",t*(C.spacer+C.margin+C.x_step)+C.spacer+C.font/4).style("fill",_[t]).text(function(e){return e})})}}})}),define("flea-app/components/graph-axis",["exports","ember"],function(e,t){"use strict";e["default"]=t["default"].Component.extend({tagName:"g",classNames:["axis"],attributeBindings:["transform"],scale:null,orient:"bottom",ticks:10,tickValues:null,tickSize:15,tickFormat:null,tickPadding:15,rotate:0,_axis:null,d3Axis:function(){var e=this.get("_axis");return null===e&&(e=d3.svg.axis()),e.scale(this.get("scale")).orient(this.get("orient")).ticks(this.get("ticks")).tickValues(this.get("tickValues")).tickFormat(this.get("tickFormat")).tickSize(this.get("tickSize")).tickPadding(this.get("tickPadding")),this.set("_axis",e),e}.property("scale","orient","ticks","tickValues","tickSize","tickFormat","tickPadding"),didInsertElement:function(){this._updateAxis()},onD3AxisChange:function(){"inDOM"===this.state&&this._updateAxis()}.observes("d3Axis","rotate"),_updateAxis:function(){var e=this.get("d3Axis"),t=d3.select(this.$()[0]).call(e),s=this.get("rotate");0!==s&&t.selectAll("text").style("text-anchor","start").attr("transform","rotate("+s+")").attr("dx","0.5em").attr("dy","0.5em")}})}),define("flea-app/components/multi-select",["exports","ember","ember-cli-multiselect/components/multi-select"],function(e,t,s){"use strict";e["default"]=s["default"]}),define("flea-app/components/phylotree-widget",["exports","ember","../utils/utils"],function(e,t,s){"use strict";e["default"]=t["default"].Component.extend({tagName:"svg",attributeBindings:["width","height"],treeWidget:null,width:800,height:600,tree:null,seq_ids_to_dates:null,do_copy_number:!1,nodeNamer:function(){var e=this.get("seq_ids_to_dates");if(this.get("showDates")){var t=function(t){return s.format_date(e[t.name.toUpperCase()])};return t}return null}.property("seq_ids_to_dates","showDates"),nodeColorizer:function(){var e=this.get("seq_ids_to_dates"),t=d3.scale.category10(),s=function(s,n){s.style("fill",t(e[n.name.toUpperCase()]))};return s}.property("seq_ids_to_dates"),didInsertElement:function(){var e=(this.get("seq_ids_to_dates"),d3.layout.phylotree("body").size([this.get("height"),this.get("width")]).separation(function(){return 0}).style_nodes(this.get("nodeColorizer")).branch_name(this.get("nodeNamer")));if(e.node_span("equal"),this.get("do_copy_number")){var t=/_([0-9]+)$/;e.node_span(function(e){var s=t.exec(e.name);try{var n=Math.sqrt(parseFloat(s[1]));return n}catch(a){}return null}),e.options({"draw-size-bubbles":!0},!1)}else e.options({"draw-size-bubbles":!1},!1);e.options({selectable:!1},!1),this.set("treeWidget",e),this.update()},update:function(){var e=this.get("tree"),t=d3.select("#"+this.get("elementId")),s=this.get("treeWidget");s(e).svg(t).layout(),this.sort()}.observes("tree","treeWidget"),sort:function(){var e=this.get("sortState");"ascending"===e?this.sortNodes(!0):"descending"===e?this.sortNodes(!1):this.sortOriginal()}.observes("sortState"),sortNodes:function(e){var t=this.get("treeWidget");t.traverse_and_compute(function(e){var t=1;e.children&&e.children.length&&(t+=d3.max(e.children,function(e){return e.count_depth})),e.count_depth=t}),t.resort_children(function(t,s){return(t.count_depth-s.count_depth)*(e?1:-1)})},sortOriginal:function(){this.get("treeWidget").resort_children(function(e,t){return e.original_child_order-t.original_child_order})},space:function(){var e=this.get("spaceState");"neutral"!==e&&("compress"===e?this.compressSpacing():"expand"===e&&this.expandSpacing(),this.set("spaceState","neutral"))}.observes("spaceState"),expandSpacing:function(){var e=this.get("treeWidget");e.spacing_x(e.spacing_x()+1).update(!0)},compressSpacing:function(){var e=this.get("treeWidget");e.spacing_x(e.spacing_x()-1).update(!0)},updateNames:function(){var e=this.get("treeWidget");e.branch_name(this.get("nodeNamer")),e.update(!0)}.observes("nodeNamer")})}),define("flea-app/components/pv-wrapper",["exports","ember"],function(e,t){"use strict";e["default"]=t["default"].Component.extend({didInsertElement:function(){var e={width:1e3,height:800,antialias:!0,quality:"medium"},t={fontSize:10,fontColor:"rgba(0, 0, 0, 0.5)"},s=pv.Viewer(this.$()[0],e),n=this.get("structure"),a=this.get("data"),r=d3.min(a),i=d3.max(a);if(-r!=i)throw"coloring only works if -minval == maxval";var o=i-r;a=_.map(a,function(e){return(e-r)/o}),n.eachResidue(function(e){var n=e.num(),r=a[n];if(void 0===r&&(r=0),e.customData=function(){return r},n%10===0){var i="ref coord";s.label(i,n,e.atom(0).pos(),t)}});var l=pv.color.gradient(["darkblue","white","darkred"]);s.cartoon("protein",n,{color:pv.color.byResidueProp("customData",l)}),s.fitTo(n)}.observes("structure","data")})}),define("flea-app/components/sequence-range-controls",["exports","ember"],function(e,t){"use strict";e["default"]=t["default"].Component.extend({tagName:"",rangeStart:1,rangeStop:1,minCoord:1,maxCoord:1,myRangeStart:1,myRangeStop:1,fromController:function(){this.set("myRangeStart",+this.get("rangeStart")),this.set("myRangeStop",+this.get("rangeStop"))}.on("didInsertElement"),toController:function(){var e=+this.get("myRangeStart"),t=+this.get("myRangeStop"),s=+this.get("minCoord"),n=+this.get("maxCoord");s>e&&(e=this.set("myRangeStart",s)),t>n&&(this.set("myRangeStop",n),t=n),e>=s&&t>=e&&n>=t&&(this.set("rangeStart",+e),this.set("rangeStop",+t),this.set("myRangeStart",+e),this.set("myRangeStop",+t))},actions:{moveRange:function(e){var t=+this.get("rangeStart"),s=+this.get("rangeStop");this.get("minCoord")<=t+e&&s+e>=t+e&&s+e<=this.get("maxCoord")&&(this.set("myRangeStart",t+e),this.set("myRangeStop",s+e),this.toController())},setRange:function(e,t){this.set("myRangeStart",e),this.set("myRangeStop",t),this.toController()},display:function(){this.toController()}}})}),define("flea-app/components/sequence-viewer",["exports","ember"],function(e,t){"use strict";e["default"]=t["default"].Component.extend({groupedSequences:{},refCoords:null,selectedPositions:new t["default"].Set,selectDefault:!1,didInsertElement:function(){this.get("selectDefault")&&0===this.get("selectedPositions.length")&&this.selectAllPositive()},refHTML:function(){for(var e=[[],[],[],[]],t=-5,s=this.get("refCoords"),n=this.get("alnStart");n<=this.get("alnStop");n++){var a=s[n-1]+1,r="";r=10>a?"  "+a:100>a?" "+a:""+a,t===a&&(r="INS"),r=r.split("").map(function(e){return" "===e?"&nbsp":e});var i="";this.get("selectedPositions").contains(n)&&(i="selected_position"),e[0].push({character:r[0],_class:i,dataCoord:n}),e[1].push({character:r[1],_class:i,dataCoord:n}),e[2].push({character:r[2],_class:i,dataCoord:n}),this.get("markPositive")&&e[3].push({character:this.get("positiveSelection")[0].indexOf(n)>=0?"+":"&nbsp",dataCoord:n}),t=a}return e}.property("alnStart","alnStop","refCoords","markPositive","positiveSelection","selectedPositions","selectedPositions.[]"),selectAllPositive:function(){for(var e=this.get("positiveSelection")[0],s=this.get("alnStart"),n=this.get("alnStop"),a=new t["default"].Set,r=0;r<e.length;r++){var i=e[r];if(i>=s&&n>=i&&a.add(i),i>n)break}this.set("selectedPositions",a)},actions:{togglePosition:function(e){e=+e,this.get("selectedPositions").contains(e)?this.get("selectedPositions").remove(e):this.get("selectedPositions").add(e)},clearPositions:function(){this.get("selectedPositions").clear()},selectPositiveClicked:function(){this.selectAllPositive()}}})}),define("flea-app/components/timeseries-plot",["exports","ember"],function(e,t){"use strict";e["default"]=t["default"].Component.extend({tagName:"svg",attributeBindings:["width","height"],width:900,height:300,legendRight:!1,interpolation:"linear",ymin:null,data:[],data2:[],_margin:{top:20,right:50,bottom:60,left:50},margin:function(){var e=this.get("_margin"),t=this.get("seriesNames");if(this.get("legendRight")&&t.length>0){var s=Math.max.apply(null,t.map(function(e){return e.length}));e.right=20+10*s}return e}.property("seriesNames.[]","legendRight"),didInsertElement:function(){this.set("width",this.$().width()),this.set("height",this.$().height()),this._updateChart()},innerWidth:function(){var e=this.get("margin");return this.get("width")-e.left-e.right}.property("width","margin"),innerHeight:function(){var e=this.get("margin");return this.get("height")-e.top-e.bottom}.property("height","margin"),innerGroupTransform:function(){var e=this.get("margin");return"translate(%@, %@)".fmt(e.left,e.top)}.property("margin"),seriesNames:function(){var e=this.get("data"),t=this.get("data2"),s=e.map(function(e){return e.name}),n=t.map(function(e){return e.name});return s.concat(n)}.property("data.[]","data2.[]"),dates:function(){var e=this.get("data"),t=e.map(function(e){return e.values.map(function(e){return e.x})});return t=d3.set(d3.merge(t)).values(),t.map(function(e){return new Date(e)})}.property("data.[]"),xDomain:function(){return d3.extent(this.get("dates"))}.property("dates.[]"),xAxisTransform:function(){return"translate(0, %@)".fmt(this.get("innerHeight"))}.property("innerHeight"),xScale:function(){var e=this.get("xDomain");e=e.map(function(e){return new Date(e)});var t=d3.time.scale().domain(e).range([0,this.get("innerWidth")]);return t}.property("innerWidth","xDomain"),_yScale:function(e){var t=d3.max(e,function(e){return d3.max(e.values,function(e){return e.y})}),s=this.get("ymin");return null===s&&(s=d3.min(e,function(e){return d3.min(e.values,function(e){return e.y})})),d3.scale.linear().range([this.get("innerHeight"),0]).domain([s,t])},yScale:function(){return this._yScale(this.get("data"))}.property("innerHeight","data.[]","ymin"),yScale2:function(){return this._yScale(this.get("data2"))}.property("innerHeight","data2.[]","ymin"),yAxisTransform:function(){return"translate(%@, 0)".fmt(this.get("innerWidth"))}.property("innerHeight"),d3Line:function(){var e=this.get("xScale"),t=this.get("yScale");return d3.svg.line().x(function(t){return e(t.x)}).y(function(e){return t(e.y)}).interpolate(this.get("interpolation"))}.property("xScale","yScale"),d3Line2:function(){var e=this.get("xScale"),t=this.get("yScale2");return d3.svg.line().x(function(t){return e(t.x)}).y(function(e){return t(e.y)}).interpolate(this.get("interpolation"))}.property("xScale","yScale2"),xAxisFormat:function(){return d3.time.format("%B %Y")}.property(),xTickValues:function(){return this.get("dates")}.property("dates"),yAxisFormat:function(){return d3.format(".00")}.property(),colors:function(){var e=d3.scale.category10();return e.domain(this.get("seriesNames")),e}.property("seriesNames"),_updateData:function(e,t,s){var n=d3.select("#"+this.get("elementId")).select(".inner"),a=this.get("colors"),r=n.select(s).selectAll("path").data(e,function(e){return e.name});r.enter().append("path").attr("class","timeseries_line"),r.attr("d",function(e){return t(e.values)}).style("stroke",function(e){return a(e.name)}),r.exit().remove()},_updateChart:function(){this._updateData(this.get("data"),this.get("d3Line"),".lines"),this._updateData(this.get("data2"),this.get("d3Line2"),".lines2"),this._updateLegend()},onChartChange:function(){"inDOM"===this.state&&this._updateChart()}.observes("data","d3Line","seriesNames","xScale","yScale","yScale2"),_updateLegend:function(){var e=this.get("seriesNames"),t=this.get("colors"),s=0,n=25,a=10;this.get("legendRight")&&(s=this.get("innerWidth"),n=10,a=6);var r={x:s,y:0,spacer:n,margin:5,font:a},i=d3.select("#"+this.get("elementId")).select(".inner").select(".legend");i.selectAll("g").remove();var o=i.append("g").attr("class","timeseries_legend").attr("x",r.x).attr("y",r.y).attr("transform","translate("+r.x+","+r.y+")"),l=o.selectAll(".legend_panel");l.data(e,function(e){return e}).enter().append("g").attr("class","legend_panel").each(function(e,s){var n=d3.select(this);n.append("rect").attr("x",r.spacer).attr("y",s*(r.spacer+r.margin)).attr("width",r.spacer).attr("height",r.spacer).style("fill",function(){return t(e)}),n.append("text").attr("x",2*r.spacer+r.font/4).attr("y",(s+1)*(r.spacer+r.margin)-r.margin-r.spacer/2+r.font/2).style("fill",function(){return t(e)}).attr("font-family","monospace").text(function(e){return e})})}})}),define("flea-app/controllers/session/gene",["exports","ember","../../utils/utils"],function(e,t,s){"use strict";e["default"]=t["default"].Controller.extend({useEntropy:!1,markPositive:!0,needs:["application","session"],currentPath:function(){var e=this.get("controllers.application.baseURL"),t=this.get("controllers.application.currentPath"),s=this.get("controllers.session.session_id");return t=t.replace("session",s).replace(".","/"),e+t}.property("controllers.application.baseURL","controllers.application.currentPath","controllers.session.session_id"),labels:function(){return this.get("useEntropy")?["Entropy"]:["Mean dS","Mean dN"]}.property("useEntropy"),getRate:function(e,t){var s=e.map(function(e){return e.rates.map(function(e){return e[t]})});return s},meanDS:function(){var e=this.get("model.rates.sortedRates");return this.getRate(e,0)}.property("model.rates.sortedRates.[].[]"),meanDN:function(){var e=this.get("model.rates.sortedRates");return this.getRate(e,1)}.property("model.rates.sortedRates.[].[]"),entropy:function(){var e=this.get("model.rates.sortedRates");return this.getRate(e,4)}.property("model.rates.sortedRates.[].[]"),data1:function(){return this.get(this.get("useEntropy")?"entropy":"meanDS")}.property("useEntropy","entropy.[].[]","meanDS.[].[]"),data2:function(){return this.get("useEntropy")?[]:this.get("meanDN")}.property("useEntropy","entropy.[].[]","meanDN.[].[]"),structureData:function(){var e=this.get("meanDN"),t=this.get("meanDS"),s=_.zip(e[0],t[0]),n=Math.log(5),a=Math.log(.2),r=s.map(function(e){var t=Math.log(e[0]/e[1]);return t>n?t=n:a>t&&(t=a),t}),i=this.get("model.frequencies.refToFirstAlnCoords"),o=_.map(i,function(e){return r[e]||0});return o}.property("model.frequencies.refToFirstAlnCoords","meanDN","meanDS"),names:function(){var e=this.get("model.rates.sortedRates"),t=e.map(function(e){var t=e.date;return"Combined"===t?t:(s.isString(t)&&(t=s.parse_date(t)),s.format_date(t))});return t}.property("model.rates.sortedRates.[].[]"),positions:function(){return this.get("markPositive")?this.get("model.rates.positiveSelection"):[]}.property("markPositive","model.rates.positiveSelection")})}),define("flea-app/controllers/session/neutralization",["exports","ember","../../utils/utils"],function(e,t,s){"use strict";function n(e){return r(100*e)+"%"}function a(e,t,s){return t in e||(e[t]=s),e[t]}var r=d3.format(".2f");e["default"]=t["default"].Controller.extend({mabNames:function(){var e=this.get("model.neutralization"),t=[];for(var s in e)e.hasOwnProperty(s)&&t.push(s);return t.sort(),t}.property("model.neutralization.@each"),mabFeatures:function(){for(var e=this.get("model.neutralization"),t=this.get("seqIdToDate"),s={},n=this.get("mabNames"),r=0;r<n.length;r++){var i=n[r];if(e.hasOwnProperty(i))for(var o=e[i].predictions,l=a(s,i,{}),u=0;u<o.length;u++){var c=o[u];if(c.id in t)for(var p=t[c.id],h=+c.value,d=a(l,p,{}),f=a(d,"features",[]),g=c.features,m=0;m<g.length;m++)f.push({name:g[m],value:h>0})}}return s}.property("mabName.@each","model.neutralization.@each","seqIdToDate"),sortedDates:function(){var e=this.get("model.dates"),t=[];for(var s in e)e.hasOwnProperty(s)&&t.push(new Date(s));return t.sort(function(e,t){return t>e?-1:1}),t}.property("model.dates.@each"),headerNames:function(){var e=this.get("sortedDates"),t=e.map(function(e){return s.format_date(e)});return t.splice(0,0,"mab"),t}.property("sortedDate.@each"),tableData:function(){var e=d3.interpolateRgb("white","red"),t=this.get("mabFeatures"),a=this.get("sortedDates"),r=[];for(var i in t)if(t.hasOwnProperty(i)){var o=[];o.push({value:i,style:"",html:""});for(var l=0;l<a.length;l++){var u=a[l];if(t[i].hasOwnProperty(u)){var c=t[i][u].features,p=0,h=[],d=[];c.length>0&&(h=c.filter(function(e){return e.value}),d=c.filter(function(e){return!e.value}),p=h.length/(h.length+d.length));var f=c.reduce(function(e,t){return t.name in e||(e[t.name]=[0,0]),t.value?e[t.name][1]+=1:e[t.name][0]+=1,e},{}),g=["feature","susceptible","resistant"],m=[];for(var b in f)f.hasOwnProperty(b)&&m.push([b,f[b][0],f[b][1]]);var v=e(p);o.push({value:n(p),style:"background-color: "+v,html:s.htmlTable(m,g)})}}r.push(o)}return r}.property("mabFeature.@each","sortedDate.@each"),seqIdToDate:function(){var e=this.get("model.sequences");return e.reduce(function(e,t){return e[t.id]=t.date,e},{})}.property("model.sequences.@each")})}),define("flea-app/controllers/session/sequences",["exports","ember","../../utils/utils"],function(e,t,s){"use strict";function n(e){for(var t=0;t<e.length;t++){for(var s=e[t].sequences,n=0,a=0;a<s.length;a++)n+=s[a].copyNumber;for(var r=0;r<s.length;r++)s[r].percent=100*s[r].copyNumber/n}return e}function a(e){var t=_.groupBy(e,function(e){return e.sequence}),s=[];for(var n in t)if(t.hasOwnProperty(n)){for(var a=t[n],r=[],i=0,o=0;o<a.length;o++)r.push(a[o].ids[0]),i+=a[o].copyNumber;s.push({sequence:a[0].sequence,ids:r,copyNumber:i})}return s}function r(e){for(var t=0;t<e.length;t++)for(var n=e[t].sequences,a=0;a<n.length;a++)n[a].html=s.htmlTable1D(n[a].ids,["Sequence ID"]);return e}function i(e,t){for(var n=0;n<e.length;n++)for(var a=e[n].sequences,r=0;r<a.length;r++)a[r].highlights=s.regexRanges(t,a[r].sequence);return e}function o(e,t){for(var s=0;s<e.length;s++)for(var n=e[s].sequences,a=0;a<n.length;a++){var r=n[a];n[a].sequence=r.sequence.split("").map(function(e,s){return e===t[s]?".":e}).join("")}return e}var l="N\\-*[^P-]\\-*[ST]\\-*[^P-]";e["default"]=t["default"].ObjectController.extend({_selectedSequences:[],selectedSequences:"empty",rangeStart:160,rangeStop:200,minCoord:1,regexValue:l,regexDefault:l,_regex:"",markPositive:!0,selectedPositions:new t["default"].Set,regex:function(){var e=this.get("regexValue");if(0===e.length)return".^";try{{new RegExp(e,"g")}this.set("_regex",e)}catch(t){}return this.get("_regex")}.property("regexValue"),predefinedRegions:[{name:"V1",start:131,stop:156},{name:"V2",start:157,stop:196},{name:"V3",start:296,stop:330},{name:"V4",start:385,stop:418},{name:"V5",start:461,stop:471},{name:"MPER",start:662,stop:683}],maxCoord:function(){return this.get("model.frequencies.refToFirstAlnCoords").length}.property("model.frequencies.refToFirstAlnCoords"),filterSequenceTypes:function(e,t){return e.filter(function(e){return e.get("type")===t})},observedSequences:function(){var e=this.get("model.sequences");return this.filterSequenceTypes(e,"Observed")}.property("model.sequences.@each"),mrca:function(){var e=this.get("model.sequences");return this.filterSequenceTypes(e,"MRCA")[0]}.property("model.sequences.@each"),mrcaSlice:function(){var e=this.get("alnStart"),t=this.get("alnStop");return this.get("mrca").sequence.slice(e-1,t)}.property("alnStart","alnStop"),groupedSequences:function(){var e=this,t=e.get("selectedSequences");"empty"===t&&(t=this.get("observedSequences"));var l=[],u=this.get("alnStart"),c=this.get("alnStop"),p=this.get("mrcaSlice"),h=_.groupBy(t,function(e){return e.get("date")}),d=function(e){var t=e.sequence.slice(u-1,c);return{sequence:t,copyNumber:e.copyNumber,ids:[e.id]}};for(var f in h)if(h.hasOwnProperty(f)){var g=h[f].map(d);g=a(g),g.sort(function(e,t){return t.copyNumber-e.copyNumber}),l.push({date:new Date(f),sequences:g})}return l.sort(function(e,t){return e.date-t.date}),l.forEach(function(e){e.date=s.format_date(e.date)}),l=n(l),l=r(l),l=i(l,this.get("regex")),l=o(l,p)}.property("alnStart","alnStop","mrcaSlice","selectedSequences.@each","regex"),alnStart:function(){var e=this.get("rangeStart"),t=this.get("model.frequencies.refToFirstAlnCoords");return s.transformIndex(e,t)}.property("model.frequencies.refToFirstAlnCoords","rangeStart"),alnStop:function(){var e=this.get("rangeStop"),t=this.get("model.frequencies.refToLastAlnCoords");return s.transformIndex(e,t)}.property("model.frequencies.refToLastAlnCoords","rangeStop"),aaTrajectories:function(){var e=this.get("selectedSequences");"empty"===e&&(e=this.get("observedSequences"));var t=this.get("selectedPositions").toArray().sort(function(e,t){return e-t});if(0===t.length)return[];for(var s={},n={},a=0;a<e.length;a++){var r=e[a],i=t.map(function(e){return r.sequence[e-1]}).join("");s.hasOwnProperty(i)||(s[i]={}),s[i].hasOwnProperty(r.date)||(s[i][r.date]=0),s[i][r.date]+=r.copyNumber,n.hasOwnProperty(r.date)||(n[r.date]=0),n[r.date]+=r.copyNumber}var o=[];for(var i in s)if(s.hasOwnProperty(i)){var l=[];for(var u in n)if(n.hasOwnProperty(u)){var c=0;s[i].hasOwnProperty(u)&&(c=s[i][u]/n[u]),l.push({x:new Date(u),y:c})}o.push({name:i,values:l})}if(o.length>10){for(var p=[],h=0;h<o.length;h++){var d=o[h],f=_.max(d.values.map(function(e){return e.y}));p.push({name:d.name,max:f})}p.sort(function(e,t){return t.max-e.max});for(var g=_.partition(p.map(function(e){return e.name}),function(e,t){return 9>t}),m=g[0],b=(g[1],_.partition(o,function(e){return _.includes(m,e.name)})),o=b[0],v=b[1],y=v[0].values,x=1;x<v.length;x++)for(var S=v[x].values,I=0;I<S.length;I++)y[I].y+=S[I].y;o.push({name:"other",values:y})}return o}.property("selectedPositions.[]","selectedSequences.@each"),actions:{resetRegex:function(){this.set("regexValue",this.get("regexDefault"))},finalizeSelection:function(){this.set("selectedSequences",this.get("_selectedSequences"))}}})}),define("flea-app/controllers/session/trajectory",["exports","ember"],function(e,t){"use strict";function s(e,t,s){if(1===s.length)return n(e,t,s[0]);if(1===t.length)return a(e,t[0],s);throw"Must use either single region or single metric"}function n(e,t,s){for(var n=[],a=0;a<t.length;a++){for(var r=t[a],i={name:r},o=[],l=0;l<e.length;l++)if(r===e[l].Segment){var u={x:e[l].Date,y:e[l][s]};
o.push(u)}o.sort(function(e,t){return e.x-t.x}),i.values=o,n.push(i)}return n}function a(e,t,s){for(var n=[],a=0;a<s.length;a++){for(var r=s[a],i={name:r},o=[],l=0;l<e.length;l++)if(t===e[l].Segment){var u={x:e[l].Date,y:e[l][r]};o.push(u)}o.sort(function(e,t){return e.x-t.x}),i.values=o,n.push(i)}return n}e["default"]=t["default"].ObjectController.extend({regions:["gp160","signal","c1","v1","v2","c2","v3","c3","v4","c4","v5","c5","fusion","gp41ecto","mper","gp41endo"],selectedRegions:["gp160"],evoMetrics:["ds_divergence","dn_divergence","total_divergence","ds_diversity","dn_diversity","total_diversity"],selectedEvoMetrics:["ds_divergence","dn_divergence","total_divergence","total_diversity"],phenoMetrics:["Length","PNGS","IsoelectricPoint"],selectedPhenoMetrics:["Length","PNGS"],multipleRegions:function(){var e=this.get("selectedEvoMetrics.length")>1||this.get("selectedPhenoMetrics.length")>1;return e?!1:!0}.property("selectedEvoMetrics.length","selectedPhenoMetrics.length"),multipleMetrics:function(){var e=this.get("selectedRegions.length")>1;return e?!1:!0}.property("selectedRegions.length"),evoData:function(){var e=this.get("model"),t=this.get("selectedRegions"),n=this.get("selectedEvoMetrics");return s(e,t,n)}.property("model","selectedRegions.@each","selectedEvoMetrics.@each"),_phenoData:function(e){var t=this.get("model"),n=this.get("selectedRegions"),r=this.get("selectedPhenoMetrics");return n.length>1?s(t,n,r):r.length>1?a(t,n[0],[r[e]]):a(t,n[0],r)},phenoData:function(){var e=this._phenoData(0);return e}.property("model","selectedRegions.@each","selectedPhenoMetrics.@each"),phenoData2:function(){var e=[];return this.get("selectedPhenoMetrics.length")>1&&(e=this._phenoData(1)),e}.property("model","selectedRegions.@each","selectedPhenoMetrics.@each")})}),define("flea-app/controllers/session/trees",["exports","ember","../../utils/utils"],function(e,t,s){"use strict";e["default"]=t["default"].Controller.extend({_selectedGenomicRegion:"",_selectedTimePoint:"",_selectedDistanceMeasure:"",linkeToSelection:!0,showDates:!0,sortState:"ascending",spaceState:0,nestedTrees:function(){for(var e=this.get("model.trees"),t={},n=0;n<e.length;n++){var a=e[n];a.region in t||(t[a.region]={});var r=a.date;"Combined"!==r&&(r=s.format_date(a.date)),r in t[a.region]||(t[a.region][r]={}),a.distance in t[a.region][r]||(t[a.region][r][a.distance]=a.tree)}return t}.property("model.trees.@each"),genomicRegions:function(){var e=this.get("nestedTrees");return Object.keys(e)}.property("nestedTrees"),timePoints:function(){var e=this.get("nestedTrees"),t=this.get("selectedGenomicRegion"),s=Object.keys(e[t]),n=s.indexOf("Combined");return n>0&&s.splice(0,0,s.splice(n,1)[0]),s}.property("nestedTrees","selectedGenomicRegion"),distanceMeasures:function(){var e=this.get("nestedTrees"),t=this.get("selectedGenomicRegion"),s=this.get("selectedTimePoint");return Object.keys(e[t][s])}.property("nestedTrees","selectedGenomicRegion","selectedTimePoint"),handleSelection:function(e,t,s,n){return void 0===n?_.includes(e,this.get(t))||this.set(t,e[0]):_.includes(e,n)?this.set(t,n):this.set(t,e[0]),this.get(t)},selectedGenomicRegion:function(e,t,s){return this.handleSelection(this.get("genomicRegions"),"_selectedGenomicRegion",e,t,s)}.property("genomicRegions"),selectedTimePoint:function(e,t,s){return this.handleSelection(this.get("timePoints"),"_selectedTimePoint",e,t,s)}.property("timePoints"),selectedDistanceMeasure:function(e,t,s){return this.handleSelection(this.get("distanceMeasures"),"_selectedDistanceMeasure",e,t,s)}.property("distanceMeasures"),tree:function(){var e=this.get("selectedGenomicRegion"),t=this.get("selectedTimePoint"),s=this.get("selectedDistanceMeasure"),n=this.get("nestedTrees")[e][t][s];return n}.property("nestedTrees","selectedGenomicRegion","selectedTimePoints","selectedDistanceMeasure"),seqIdToDate:function(){var e=this.get("model.sequences");return e.reduce(function(e,t){return e[t.id]=t.date,e},{})}.property("model.sequences.@each"),actions:{setSortState:function(e){this.set("sortState",e)},setSpaceState:function(e){this.set("spaceState",e)}}})}),define("flea-app/helpers/amino-acid",["exports","ember"],function(e,t){"use strict";e["default"]=t["default"].Handlebars.makeBoundHelper(function(e,s){var n=e.split("").map(Handlebars.Utils.escapeExpression),a=0,r=n.map(function(e,t){var n="";return a<s.length&&t===s[a][0]&&(n+="<span class = 'pngs'>"),"."===e||"-"===e?n+=e:(e=e.toUpperCase(),n+='<span class="aa'+e+'">'+e+"</span>"),a<s.length&&t===s[a][1]&&(n+="</span>",a++),n});return new t["default"].Handlebars.SafeString(r.join(""))})}),define("flea-app/helpers/format-percent",["exports","ember"],function(e,t){"use strict";var s=d3.format(">5.2f");e["default"]=t["default"].Handlebars.makeBoundHelper(function(e){var n=Handlebars.Utils.escapeExpression(e);return new t["default"].Handlebars.SafeString(s(n))})}),define("flea-app/helpers/get-name",["exports","ember","ember-cli-multiselect/helpers/get-name"],function(e,t,s){"use strict";e["default"]=s["default"]}),define("flea-app/initializers/export-application-global",["exports","ember","../config/environment"],function(e,t,s){"use strict";function n(e,n){var a=t["default"].String.classify(s["default"].modulePrefix);s["default"].exportApplicationGlobal&&(window[a]=n)}e.initialize=n,e["default"]={name:"export-application-global",initialize:n}}),define("flea-app/initializers/inject-store",["exports","flea-app/models/store"],function(e,t){"use strict";e["default"]={name:"inject-store",initialize:function(e,s){s.register("store:main",t["default"]),s.inject("route","store","store:main"),s.inject("controller","store","store:main")}}}),define("flea-app/models/store",["exports","ember"],function(e,t){"use strict";var s={};e["default"]=t["default"].Object.extend({find:function(e,t){var n=t+e;if(s[n])return s[n];var a=this.container.lookup("adapter:"+e);return a.find(t).then(function(e){return s[n]=e,e})}})}),define("flea-app/router",["exports","ember","./config/environment"],function(e,t,s){"use strict";var n=t["default"].Router.extend({location:s["default"].locationType,baseURL:s["default"].baseURL,rootURL:"/"});n.map(function(){this.route("session",{path:"/:session_id"},function(){this.route("trajectory",{path:"/trajectory"}),this.route("gene",{path:"/gene"}),this.route("sequences",{path:"/sequences"}),this.route("trees",{path:"/trees"}),this.route("neutralization",{path:"/neutralization"})})}),e["default"]=n}),define("flea-app/routes/application",["exports","ember"],function(e,t){"use strict";e["default"]=t["default"].Route.extend({setupController:function(e,t){this._super(e,t),e.set("baseURL",this.router.get("baseURL")),e.set("rootURL",this.router.get("rootURL"))}})}),define("flea-app/routes/session",["exports","ember"],function(e,t){"use strict";e["default"]=t["default"].Route.extend({model:function(e){return{session_id:e.session_id}}})}),define("flea-app/routes/session/gene",["exports","ember"],function(e,t){"use strict";e["default"]=t["default"].Route.extend({model:function(){var e=this.modelFor("session").session_id;return t["default"].RSVP.hash({rates:this.store.find("rates",e),structure:this.store.find("structure",e),frequencies:this.store.find("frequencies",e)})}})}),define("flea-app/routes/session/index",["exports","ember"],function(e,t){"use strict";e["default"]=t["default"].Route.extend({redirect:function(){this.transitionTo("session.trajectory")}})}),define("flea-app/routes/session/neutralization",["exports","ember"],function(e,t){"use strict";e["default"]=t["default"].Route.extend({model:function(){var e=this.modelFor("session").session_id;return t["default"].RSVP.hash({neutralization:this.store.find("neutralization",e),sequences:this.store.find("sequences",e),dates:this.store.find("dates",e)})}})}),define("flea-app/routes/session/sequences",["exports","ember"],function(e,t){"use strict";e["default"]=t["default"].Route.extend({model:function(){var e=this.modelFor("session").session_id;return t["default"].RSVP.hash({sequences:this.store.find("sequences",e),frequencies:this.store.find("frequencies",e),rates:this.store.find("rates",e)})}})}),define("flea-app/routes/session/trajectory",["exports","ember"],function(e,t){"use strict";e["default"]=t["default"].Route.extend({model:function(){var e=this.modelFor("session").session_id;return this.store.find("trajectory",e)}})}),define("flea-app/routes/session/trees",["exports","ember"],function(e,t){"use strict";e["default"]=t["default"].Route.extend({model:function(){var e=this.modelFor("session").session_id;return t["default"].RSVP.hash({trees:this.store.find("trees",e),sequences:this.store.find("sequences",e)})}})}),define("flea-app/templates/application",["exports","ember"],function(e,t){"use strict";e["default"]=t["default"].Handlebars.template(function(e,s,n,a,r){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,t["default"].Handlebars.helpers),r=r||{};var i;i=n._triageMustache.call(s,"outlet",{hash:{},hashTypes:{},hashContexts:{},contexts:[s],types:["ID"],data:r}),r.buffer.push(i||0===i?i:"")})}),define("flea-app/templates/components/color-table",["exports","ember"],function(e,t){"use strict";e["default"]=t["default"].Handlebars.template(function(e,s,n,a,r){function i(e,t){var s,a="";return t.buffer.push("\n      <td>"),s=n._triageMustache.call(e,"h",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("</td>\n      "),a}function o(e,t){var s,a="";return t.buffer.push("\n    <tr>\n      "),s=n.each.call(e,"elt","in","row",{hash:{},hashTypes:{},hashContexts:{},inverse:d.noop,fn:d.program(4,l,t),contexts:[e,e,e],types:["ID","ID","ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\n    </tr>\n    "),a}function l(e,t){var s,a,r,i="";return t.buffer.push("\n      <td "),t.buffer.push(h(n["bind-attr"].call(e,{hash:{style:"elt.style"},hashTypes:{style:"ID"},hashContexts:{style:e},contexts:[],types:[],data:t}))),t.buffer.push(">\n        "),a=n["bootstrap-popover"]||e&&e["bootstrap-popover"],r={hash:{title:"",dataContent:"elt.html"},hashTypes:{title:"STRING",dataContent:"ID"},hashContexts:{title:e,dataContent:e},inverse:d.noop,fn:d.program(5,u,t),contexts:[],types:[],data:t},s=a?a.call(e,r):f.call(e,"bootstrap-popover",r),(s||0===s)&&t.buffer.push(s),t.buffer.push("\n      </td>\n    "),i}function u(e,t){var s,a="";return t.buffer.push("\n        "),s=n._triageMustache.call(e,"elt.value",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\n        "),a}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,t["default"].Handlebars.helpers),r=r||{};var c,p="",h=this.escapeExpression,d=this,f=n.helperMissing;return r.buffer.push('<table class="table table-hover table-condensed">\n  <thead>\n    <tr>\n      '),c=n.each.call(s,"h","in","header",{hash:{},hashTypes:{},hashContexts:{},inverse:d.noop,fn:d.program(1,i,r),contexts:[s,s,s],types:["ID","ID","ID"],data:r}),(c||0===c)&&r.buffer.push(c),r.buffer.push("\n    </tr>\n  </thead>\n  <tbody>\n    "),c=n.each.call(s,"row","in","data",{hash:{},hashTypes:{},hashContexts:{},inverse:d.noop,fn:d.program(3,o,r),contexts:[s,s,s],types:["ID","ID","ID"],data:r}),(c||0===c)&&r.buffer.push(c),r.buffer.push("\n</table>\n"),p})}),define("flea-app/templates/components/gene-plots",["exports","ember"],function(e,t){"use strict";e["default"]=t["default"].Handlebars.template(function(e,s,n,a,r){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,t["default"].Handlebars.helpers),r=r||{};var i="",o=this.escapeExpression;return r.buffer.push("<g "),r.buffer.push(o(n["bind-attr"].call(s,{hash:{transform:"innerGroupTransform",height:"height"},hashTypes:{transform:"STRING",height:"STRING"},hashContexts:{transform:s,height:s},contexts:[],types:[],data:r}))),r.buffer.push(' class="inner">\n</g>'),i})}),define("flea-app/templates/components/multi-select",["exports","ember"],function(e,t){"use strict";e["default"]=t["default"].Handlebars.template(function(e,s,n,a,r){function i(e,t){var s,a="";return t.buffer.push("Loading "),s=n._triageMustache.call(e,"name",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("..."),a}function o(e,t){var s,a="";return t.buffer.push("\n    "),s=n._triageMustache.call(e,"name",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),s=n["if"].call(e,"showRecordNum",{hash:{},hashTypes:{},hashContexts:{},inverse:m.noop,fn:m.program(4,l,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),a}function l(e,t){var s,a="";return t.buffer.push(" ("),s=n._triageMustache.call(e,"selectedRecordsNum",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push(")"),a}function u(e,t){var s,a,r,i="";return t.buffer.push('\n  <form role="form">\n    <div class="combo-box form-group">\n      '),t.buffer.push(v((a=n.input||e&&e.input,r={hash:{type:"text","class":"form-control",value:"searchText",placeholder:"Type to search",autofocus:"autofocus"},hashTypes:{type:"STRING","class":"STRING",value:"ID",placeholder:"STRING",autofocus:"STRING"},hashContexts:{type:e,"class":e,value:e,placeholder:e,autofocus:e},contexts:[],types:[],data:t},a?a.call(e,r):b.call(e,"input",r)))),t.buffer.push('\n      <br/>\n      <div class="toolbar">\n          <button '),t.buffer.push(v(n.action.call(e,"selectAll",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t}))),t.buffer.push(' type="button" class="btn btn-default">Select All</button>\n          <button '),t.buffer.push(v(n.action.call(e,"deselectAll",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t}))),t.buffer.push(' type="button" class="btn btn-default">De-select All</button>\n      </div>\n      <br/>\n\n      '),s=n["if"].call(e,"noRecords",{hash:{},hashTypes:{},hashContexts:{},inverse:m.program(9,p,t),fn:m.program(7,c,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\n\n      "),s=n["if"].call(e,"submit",{hash:{},hashTypes:{},hashContexts:{},inverse:m.noop,fn:m.program(12,d,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\n    </div>\n  </form>\n  "),i}function c(e,t){t.buffer.push('\n      <p><span class="label label-warning">Note:</span> No records matching your filter. Try * to get some records</p>\n      ')}function p(e,t){var s,a="";return t.buffer.push('\n      <table class="table table-hovered table-striped">\n      <tbody>\n        '),s=n.each.call(e,"r","in","filteredRecords",{hash:{},hashTypes:{},hashContexts:{},inverse:m.noop,fn:m.program(10,h,t),contexts:[e,e,e],types:["ID","ID","ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\n      </tbody>\n      </table>\n      "),a}function h(e,t){var s,a,r="";return t.buffer.push("\n        <tr>\n          <td>"),t.buffer.push(v((s=n.input||e&&e.input,a={hash:{type:"checkbox",name:"r.selected",checked:"r.selected"},hashTypes:{type:"STRING",name:"STRING",checked:"ID"},hashContexts:{type:e,name:e,checked:e},contexts:[],types:[],data:t},s?s.call(e,a):b.call(e,"input",a)))),t.buffer.push("</td>\n          <td><span "),t.buffer.push(v(n.action.call(e,"select","r",{hash:{},hashTypes:{},hashContexts:{},contexts:[e,e],types:["STRING","ID"],data:t}))),t.buffer.push(">"),t.buffer.push(v((s=n["get-name"]||e&&e["get-name"],a={hash:{},hashTypes:{},hashContexts:{},contexts:[e,e],types:["ID","ID"],data:t},s?s.call(e,"r","displayName",a):b.call(e,"get-name","r","displayName",a)))),t.buffer.push("</span></td>\n        </tr>\n        "),r}function d(e,t){var s,a="";return t.buffer.push('\n        <div class="actionbar">\n          <button '),t.buffer.push(v(n.action.call(e,"cancel",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t}))),t.buffer.push(' type="button" class="btn btn-danger">Cancel</button>\n          <button '),t.buffer.push(v(n.action.call(e,"submit",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t}))),t.buffer.push(' type="button" class="btn btn-primary">'),s=n._triageMustache.call(e,"submitText",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("</button>\n        </div>\n      "),a}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,t["default"].Handlebars.helpers),r=r||{};var f,g="",m=this,b=n.helperMissing,v=this.escapeExpression;return r.buffer.push("<div "),r.buffer.push(v(n["bind-attr"].call(s,{hash:{"class":":multi-select isOpen:open"},hashTypes:{"class":"STRING"},hashContexts:{"class":s},contexts:[],types:[],data:r}))),r.buffer.push('>\n  <button class="btn btn-default dropdown-toggle" '),r.buffer.push(v(n.action.call(s,"toggleOpen",{hash:{},hashTypes:{},hashContexts:{},contexts:[s],types:["STRING"],data:r}))),r.buffer.push(" "),r.buffer.push(v(n["bind-attr"].call(s,{hash:{disabled:"isLoading"},hashTypes:{disabled:"STRING"},hashContexts:{disabled:s},contexts:[],types:[],data:r}))),r.buffer.push(">\n    "),f=n["if"].call(s,"isLoading",{hash:{},hashTypes:{},hashContexts:{},inverse:m.program(3,o,r),fn:m.program(1,i,r),contexts:[s],types:["ID"],data:r}),(f||0===f)&&r.buffer.push(f),r.buffer.push(' <span class="caret"></span></button>\n  '),f=n["if"].call(s,"isOpen",{hash:{},hashTypes:{},hashContexts:{},inverse:m.noop,fn:m.program(6,u,r),contexts:[s],types:["ID"],data:r}),(f||0===f)&&r.buffer.push(f),r.buffer.push("\n</div>\n"),g})}),define("flea-app/templates/components/pv-wrapper",["exports","ember"],function(e,t){"use strict";e["default"]=t["default"].Handlebars.template(function(e,s,n,a,r){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,t["default"].Handlebars.helpers),r=r||{};var i="";return i})}),define("flea-app/templates/components/sequence-range-controls",["exports","ember"],function(e,t){"use strict";e["default"]=t["default"].Handlebars.template(function(e,s,n,a,r){function i(e,t){var s,a="";return t.buffer.push('\n<div class="input-group-btn">\n  <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown">Predefined\n    <span class="caret"></span></button>\n  <ul class="dropdown-menu">\n    '),s=n.each.call(e,"region","in","predefinedRegions",{hash:{},hashTypes:{},hashContexts:{},inverse:d.noop,fn:d.program(2,o,t),contexts:[e,e,e],types:["ID","ID","ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\n  </ul>\n</div>\n"),a}function o(e,t){var s,a="";return t.buffer.push("\n    <li>\n      <a "),t.buffer.push(h(n.action.call(e,"setRange","region.start","region.stop",{hash:{},hashTypes:{},hashContexts:{},contexts:[e,e,e],types:["STRING","ID","ID"],data:t}))),t.buffer.push(' class="seq-predef">\n        '),s=n._triageMustache.call(e,"region.name",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\n      </a>\n    </li>\n    "),a}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,t["default"].Handlebars.helpers),r=r||{};var l,u,c,p="",h=this.escapeExpression,d=this,f=n.helperMissing;return r.buffer.push('<div class="input-group-btn">\n  <button '),r.buffer.push(h(n.action.call(s,"moveRange",-5,{hash:{},hashTypes:{},hashContexts:{},contexts:[s,s],types:["STRING","INTEGER"],data:r}))),r.buffer.push(' type="button" class="btn btn-default btn-sm" title="Jump left">\n    <i class="fa fa-fast-backward" ></i>\n  </button>\n</div>\n<div class="input-group-btn">\n  <button '),r.buffer.push(h(n.action.call(s,"moveRange",-1,{hash:{},hashTypes:{},hashContexts:{},contexts:[s,s],types:["STRING","INTEGER"],data:r}))),r.buffer.push(' type="button" class="btn btn-default btn-sm" title="Move left">\n    <i class="fa fa-backward" ></i>\n  </button>\n</div>\n<span class="input-group-addon">From</span>\n'),r.buffer.push(h((u=n.input||s&&s.input,c={hash:{type:"number","class":"form-control",value:"myRangeStart",placeholder:"HXB2 coordinate (e.g. 160)",autofocus:"autofocus","focus-out":"display","insert-newline":"display"},hashTypes:{type:"STRING","class":"STRING",value:"ID",placeholder:"STRING",autofocus:"STRING","focus-out":"STRING","insert-newline":"STRING"},hashContexts:{type:s,"class":s,value:s,placeholder:s,autofocus:s,"focus-out":s,"insert-newline":s},contexts:[],types:[],data:r},u?u.call(s,c):f.call(s,"input",c)))),r.buffer.push('\n<span class="input-group-addon">To</span>\n'),r.buffer.push(h((u=n.input||s&&s.input,c={hash:{type:"number","class":"form-control",value:"myRangeStop",placeholder:"HXB2 coordinate (e.g. 200)",autofocus:"autofocus","focus-out":"display","insert-newline":"display"},hashTypes:{type:"STRING","class":"STRING",value:"ID",placeholder:"STRING",autofocus:"STRING","focus-out":"STRING","insert-newline":"STRING"},hashContexts:{type:s,"class":s,value:s,placeholder:s,autofocus:s,"focus-out":s,"insert-newline":s},contexts:[],types:[],data:r},u?u.call(s,c):f.call(s,"input",c)))),r.buffer.push('\n<div class="input-group-btn">\n  <button '),r.buffer.push(h(n.action.call(s,"moveRange",1,{hash:{},hashTypes:{},hashContexts:{},contexts:[s,s],types:["STRING","INTEGER"],data:r}))),r.buffer.push(' type="button" class="btn btn-default btn-sm" title="Move right">\n    <i class="fa fa-forward" ></i>\n  </button>\n</div>\n<div class="input-group-btn">\n  <button '),r.buffer.push(h(n.action.call(s,"moveRange",5,{hash:{},hashTypes:{},hashContexts:{},contexts:[s,s],types:["STRING","INTEGER"],data:r}))),r.buffer.push(' type="button" class="btn btn-default btn-sm" title="Jump right">\n    <i class="fa fa-fast-forward" ></i>\n  </button>\n</div>\n'),l=n["if"].call(s,"predefinedRegions",{hash:{},hashTypes:{},hashContexts:{},inverse:d.noop,fn:d.program(1,i,r),contexts:[s],types:["ID"],data:r}),(l||0===l)&&r.buffer.push(l),r.buffer.push("\n"),p})}),define("flea-app/templates/components/sequence-viewer",["exports","ember"],function(e,t){"use strict";e["default"]=t["default"].Handlebars.template(function(e,s,n,a,r){function i(e,t){var s,a="";return t.buffer.push("\n    "),s=n.each.call(e,"elt","in","row",{hash:{},hashTypes:{},hashContexts:{},inverse:v.noop,fn:v.program(2,o,t),contexts:[e,e,e],types:["ID","ID","ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\n    <br>\n    "),a}function o(e,t){var s="";return t.buffer.push("<span "),t.buffer.push(b(n["bind-attr"].call(e,{hash:{"class":"elt._class"},hashTypes:{"class":"ID"},hashContexts:{"class":e},contexts:[],types:[],data:t}))),t.buffer.push("\n                              "),t.buffer.push(b(n["bind-attr"].call(e,{hash:{"data-coord":"elt.dataCoord"},hashTypes:{"data-coord":"ID"},hashContexts:{"data-coord":e},contexts:[],types:[],data:t}))),t.buffer.push("\n                              "),t.buffer.push(b(n.action.call(e,"togglePosition","elt.dataCoord",{hash:{},hashTypes:{},hashContexts:{},contexts:[e,e],types:["STRING","ID"],data:t}))),t.buffer.push("\n                              >"),t.buffer.push(b(n._triageMustache.call(e,"elt.character",{hash:{unescaped:"true"},hashTypes:{unescaped:"STRING"},hashContexts:{unescaped:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("</span>"),s}function l(e,t){var s,a="";return t.buffer.push('\n    <tr>\n      <td class="seq-cell">'),s=n._triageMustache.call(e,"date",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push('</td>\n      <td class="seq-cell">\n        <ul class="list-unstyled">\n          '),s=n.each.call(e,"seq","in","sequences",{hash:{},hashTypes:{},hashContexts:{},inverse:v.noop,fn:v.program(5,u,t),contexts:[e,e,e],types:["ID","ID","ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push('\n        </ul>\n      </td>\n      <td class="seq-cell">\n        <ul class="list-unstyled">\n          '),s=n.each.call(e,"seq","in","sequences",{hash:{},hashTypes:{},hashContexts:{},inverse:v.noop,fn:v.program(7,c,t),contexts:[e,e,e],types:["ID","ID","ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push('\n        </ul>\n      </td>\n      <td class="seq-cell">\n        <ul class="list-unstyled">\n          '),s=n.each.call(e,"seq","in","sequences",{hash:{},hashTypes:{},hashContexts:{},inverse:v.noop,fn:v.program(10,h,t),contexts:[e,e,e],types:["ID","ID","ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\n        </ul>\n      </td>\n    </tr>\n    "),a}function u(e,t){var s,a,r="";return t.buffer.push("\n          <li>"),t.buffer.push(b((s=n["amino-acid"]||e&&e["amino-acid"],a={hash:{},hashTypes:{},hashContexts:{},contexts:[e,e],types:["ID","ID"],data:t},s?s.call(e,"seq.sequence","seq.highlights",a):y.call(e,"amino-acid","seq.sequence","seq.highlights",a)))),t.buffer.push("</li>\n          "),r}function c(e,t){var s,a,r,i="";return t.buffer.push("\n          <li>\n            "),a=n["bootstrap-popover"]||e&&e["bootstrap-popover"],r={hash:{title:"",dataContent:"seq.html",placement:"right"},hashTypes:{title:"STRING",dataContent:"ID",placement:"STRING"},hashContexts:{title:e,dataContent:e,placement:e},inverse:v.noop,fn:v.program(8,p,t),contexts:[],types:[],data:t},s=a?a.call(e,r):y.call(e,"bootstrap-popover",r),(s||0===s)&&t.buffer.push(s),t.buffer.push("\n          </li>\n          "),i}function p(e,t){var s,a="";return t.buffer.push("\n            "),s=n._triageMustache.call(e,"seq.copyNumber",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\n            "),a}function h(e,t){var s,a,r="";return t.buffer.push("\n          <li>"),t.buffer.push(b((s=n["format-percent"]||e&&e["format-percent"],a={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t},s?s.call(e,"seq.percent",a):y.call(e,"format-percent","seq.percent",a)))),t.buffer.push("%</li>\n          "),r}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,t["default"].Handlebars.helpers),r=r||{};var d,f,g,m="",b=this.escapeExpression,v=this,y=n.helperMissing;return r.buffer.push('<table class="table table-hover table-condensed nostretch sequence-viewer" id="sequence-viewer">\n  <thead>\n    <td class="seq-cell">HXB2 coord.<br>\n      <div>\n      <button title="Select positive sites" type="button" class="btn btn-default btn-sm" '),r.buffer.push(b(n.action.call(s,"selectPositiveClicked",{hash:{},hashTypes:{},hashContexts:{},contexts:[s],types:["STRING"],data:r}))),r.buffer.push('><i class="fa fa-plus"></i></button>\n      <button title="Clear sites" type="button" class="btn btn-default btn-sm" '),r.buffer.push(b(n.action.call(s,"clearPositions",{hash:{},hashTypes:{},hashContexts:{},contexts:[s],types:["STRING"],data:r}))),r.buffer.push('><i class="fa fa-remove"></i></button>\n      </div>\n    </td>\n    <td class="seq-cell ref-coords">\n    '),d=n.each.call(s,"row","in","refHTML",{hash:{},hashTypes:{},hashContexts:{},inverse:v.noop,fn:v.program(1,i,r),contexts:[s,s,s],types:["ID","ID","ID"],data:r}),(d||0===d)&&r.buffer.push(d),r.buffer.push('\n    </td>\n    <td class="seq-cell"></td>\n    <td class="seq-cell"></td>\n  </thead>\n  <tbody>\n    <tr>\n      <td class="seq-cell">MRCA</td>\n      <td class="seq-cell">'),r.buffer.push(b((f=n["amino-acid"]||s&&s["amino-acid"],g={hash:{},hashTypes:{},hashContexts:{},contexts:[s],types:["ID"],data:r},f?f.call(s,"mrca",g):y.call(s,"amino-acid","mrca",g)))),r.buffer.push('</td>\n      <td class="seq-cell"></td>\n      <td class="seq-cell"></td>\n    </tr>\n    '),d=n.each.call(s,"groupedSequences",{hash:{},hashTypes:{},hashContexts:{},inverse:v.noop,fn:v.program(4,l,r),contexts:[s],types:["ID"],data:r}),(d||0===d)&&r.buffer.push(d),r.buffer.push("\n  </tbody>\n</table>\n"),m})}),define("flea-app/templates/components/timeseries-plot",["exports","ember"],function(e,t){"use strict";e["default"]=t["default"].Handlebars.template(function(e,s,n,a,r){function i(e,t){var s,a,r="";return t.buffer.push("\n  "),t.buffer.push(h((s=n["graph-axis"]||e&&e["graph-axis"],a={hash:{"class":"y axis",transform:"yAxisTransform",orient:"right",scale:"yScale2",tickFormat:"yAxisFormat"},hashTypes:{"class":"STRING",transform:"ID",orient:"STRING",scale:"ID",tickFormat:"ID"},hashContexts:{"class":e,transform:e,orient:e,scale:e,tickFormat:e},contexts:[],types:[],data:t},s?s.call(e,a):p.call(e,"graph-axis",a)))),t.buffer.push("\n  "),r}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,t["default"].Handlebars.helpers),r=r||{};var o,l,u,c="",p=n.helperMissing,h=this.escapeExpression,d=this;return r.buffer.push("<g "),r.buffer.push(h(n["bind-attr"].call(s,{hash:{transform:"innerGroupTransform"},hashTypes:{transform:"STRING"},hashContexts:{transform:s},contexts:[],types:[],data:r}))),r.buffer.push(' class="inner">\n\n  '),r.buffer.push(h((l=n["graph-axis"]||s&&s["graph-axis"],u={hash:{"class":"x axis",transform:"xAxisTransform",scale:"xScale",tickFormat:"xAxisFormat",tickValues:"xTickValues",tickSize:12,tickPadding:3,rotate:45},hashTypes:{"class":"STRING",transform:"ID",scale:"ID",tickFormat:"ID",tickValues:"ID",tickSize:"INTEGER",tickPadding:"INTEGER",rotate:"INTEGER"},hashContexts:{"class":s,transform:s,scale:s,tickFormat:s,tickValues:s,tickSize:s,tickPadding:s,rotate:s},contexts:[],types:[],data:r},l?l.call(s,u):p.call(s,"graph-axis",u)))),r.buffer.push("\n\n  "),r.buffer.push(h((l=n["graph-axis"]||s&&s["graph-axis"],u={hash:{"class":"y axis",orient:"left",scale:"yScale",tickFormat:"yAxisFormat"},hashTypes:{"class":"STRING",orient:"STRING",scale:"ID",tickFormat:"ID"},hashContexts:{"class":s,orient:s,scale:s,tickFormat:s},contexts:[],types:[],data:r},l?l.call(s,u):p.call(s,"graph-axis",u)))),r.buffer.push("\n\n  "),o=n["if"].call(s,"data2",{hash:{},hashTypes:{},hashContexts:{},inverse:d.noop,fn:d.program(1,i,r),contexts:[s],types:["ID"],data:r}),(o||0===o)&&r.buffer.push(o),r.buffer.push('\n\n  <g class="lines"></g>\n\n  <g class="lines2"></g>\n\n  <g class="legend"></g>\n\n</g>\n'),c})}),define("flea-app/templates/session",["exports","ember"],function(e,t){"use strict";e["default"]=t["default"].Handlebars.template(function(e,s,n,a,r){function i(e,t){t.buffer.push("Evolutionary trajectory")}function o(e,t){t.buffer.push("Gene-wide information")}function l(e,t){t.buffer.push("Amino-acid sequences")}function u(e,t){t.buffer.push("Trees")}function c(e,t){t.buffer.push("Neutralization")}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,t["default"].Handlebars.helpers),r=r||{};var p,h,d,f="",g=this,m=n.helperMissing;return r.buffer.push("<div class='container' id='allofit'>\n  <ul class=\"nav nav-tabs\">\n    <li>"),h=n["link-to"]||s&&s["link-to"],d={hash:{"data-toggle":"tab"},hashTypes:{"data-toggle":"STRING"},hashContexts:{"data-toggle":s},inverse:g.noop,fn:g.program(1,i,r),contexts:[s,s],types:["STRING","ID"],data:r},p=h?h.call(s,"session.trajectory","model.session_id",d):m.call(s,"link-to","session.trajectory","model.session_id",d),(p||0===p)&&r.buffer.push(p),r.buffer.push("</li>\n    <li>"),h=n["link-to"]||s&&s["link-to"],d={hash:{"data-toggle":"tab"},hashTypes:{"data-toggle":"STRING"},hashContexts:{"data-toggle":s},inverse:g.noop,fn:g.program(3,o,r),contexts:[s,s],types:["STRING","ID"],data:r},p=h?h.call(s,"session.gene","model.session_id",d):m.call(s,"link-to","session.gene","model.session_id",d),(p||0===p)&&r.buffer.push(p),r.buffer.push("</li>\n    <li>"),h=n["link-to"]||s&&s["link-to"],d={hash:{"data-toggle":"tab"},hashTypes:{"data-toggle":"STRING"},hashContexts:{"data-toggle":s},inverse:g.noop,fn:g.program(5,l,r),contexts:[s,s],types:["STRING","ID"],data:r},p=h?h.call(s,"session.sequences","model.session_id",d):m.call(s,"link-to","session.sequences","model.session_id",d),(p||0===p)&&r.buffer.push(p),r.buffer.push("</li>\n    <li>"),h=n["link-to"]||s&&s["link-to"],d={hash:{"data-toggle":"tab"},hashTypes:{"data-toggle":"STRING"},hashContexts:{"data-toggle":s},inverse:g.noop,fn:g.program(7,u,r),contexts:[s,s],types:["STRING","ID"],data:r},p=h?h.call(s,"session.trees","model.session_id",d):m.call(s,"link-to","session.trees","model.session_id",d),(p||0===p)&&r.buffer.push(p),r.buffer.push("</li>\n    <li>"),h=n["link-to"]||s&&s["link-to"],d={hash:{"data-toggle":"tab"},hashTypes:{"data-toggle":"STRING"},hashContexts:{"data-toggle":s},inverse:g.noop,fn:g.program(9,c,r),contexts:[s,s],types:["STRING","ID"],data:r},p=h?h.call(s,"session.neutralization","model.session_id",d):m.call(s,"link-to","session.neutralization","model.session_id",d),(p||0===p)&&r.buffer.push(p),r.buffer.push("</li>\n  </ul>\n\n"),p=n._triageMustache.call(s,"outlet",{hash:{},hashTypes:{},hashContexts:{},contexts:[s],types:["ID"],data:r}),(p||0===p)&&r.buffer.push(p),r.buffer.push("\n\n</div>\n"),f
})}),define("flea-app/templates/session/error",["exports","ember"],function(e,t){"use strict";e["default"]=t["default"].Handlebars.template(function(e,s,n,a,r){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,t["default"].Handlebars.helpers),r=r||{},r.buffer.push('<div class="error-pane">\n  <div class="error-title">\n    Something went wrong.\n  </div>\n  <div class="error-message">\n    This message will be more informative in the future. Maybe some data is missing?\n  </div>\n</div>\n')})}),define("flea-app/templates/session/gene",["exports","ember"],function(e,t){"use strict";e["default"]=t["default"].Handlebars.template(function(e,s,n,a,r){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,t["default"].Handlebars.helpers),r=r||{};var i,o,l="",u=n.helperMissing,c=this.escapeExpression;return r.buffer.push(c((i=n["pv-wrapper"]||s&&s["pv-wrapper"],o={hash:{structure:"model.structure",data:"structureData"},hashTypes:{structure:"ID",data:"ID"},hashContexts:{structure:s,data:s},contexts:[],types:[],data:r},i?i.call(s,o):u.call(s,"pv-wrapper",o)))),r.buffer.push('\n\n<div class="input-group input-group-sm">\n  <span class="input-group-addon">\n    Use entropy\n    '),r.buffer.push(c((i=n.input||s&&s.input,o={hash:{type:"checkbox",name:"useEntropy",checked:"useEntropy"},hashTypes:{type:"STRING",name:"STRING",checked:"ID"},hashContexts:{type:s,name:s,checked:s},contexts:[],types:[],data:r},i?i.call(s,o):u.call(s,"input",o)))),r.buffer.push('\n  </span>\n  <span class="input-group-addon">\n    Mark positively selected sites\n    '),r.buffer.push(c((i=n.input||s&&s.input,o={hash:{type:"checkbox",name:"markPositive",checked:"markPositive"},hashTypes:{type:"STRING",name:"STRING",checked:"ID"},hashContexts:{type:s,name:s,checked:s},contexts:[],types:[],data:r},i?i.call(s,o):u.call(s,"input",o)))),r.buffer.push("\n  </span>\n</div>\n<br>\n"),r.buffer.push(c((i=n["gene-plots"]||s&&s["gene-plots"],o={hash:{width:1140,names:"names",data1:"data1",data2:"data2",positions:"positions",labels:"labels",url:"currentPath"},hashTypes:{width:"INTEGER",names:"ID",data1:"ID",data2:"ID",positions:"ID",labels:"ID",url:"ID"},hashContexts:{width:s,names:s,data1:s,data2:s,positions:s,labels:s,url:s},contexts:[],types:[],data:r},i?i.call(s,o):u.call(s,"gene-plots",o)))),r.buffer.push("\n"),l})}),define("flea-app/templates/session/loading",["exports","ember"],function(e,t){"use strict";e["default"]=t["default"].Handlebars.template(function(e,s,n,a,r){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,t["default"].Handlebars.helpers),r=r||{},r.buffer.push('<div class="loading-pane">\n  <div class="loading-message">\n    Fetching data from server\n  </div>\n\n  <div class="spinner">\n    <div class="rect1"></div>\n    <div class="rect2"></div>\n    <div class="rect3"></div>\n    <div class="rect4"></div>\n  <div class="rect5"></div>\n  </div>\n</div>\n')})}),define("flea-app/templates/session/neutralization",["exports","ember"],function(e,t){"use strict";e["default"]=t["default"].Handlebars.template(function(e,s,n,a,r){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,t["default"].Handlebars.helpers),r=r||{};var i,o,l="",u=n.helperMissing,c=this.escapeExpression;return r.buffer.push('<div class="row" id="neutralization">\n  <div class="col-md-12">\n    '),r.buffer.push(c((i=n["color-table"]||s&&s["color-table"],o={hash:{header:"headerNames",data:"tableData"},hashTypes:{header:"ID",data:"ID"},hashContexts:{header:s,data:s},contexts:[],types:[],data:r},i?i.call(s,o):u.call(s,"color-table",o)))),r.buffer.push("\n  </div>\n</div>\n\n"),l})}),define("flea-app/templates/session/sequences",["exports","ember"],function(e,t){"use strict";e["default"]=t["default"].Handlebars.template(function(e,s,n,a,r){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,t["default"].Handlebars.helpers),r=r||{};var i,o,l="",u=n.helperMissing,c=this.escapeExpression;return r.buffer.push('<div class = "row">\n  <div class = "col-md-12">\n    <div class="input-group input-group-sm">\n      '),r.buffer.push(c((i=n["sequence-range-controls"]||s&&s["sequence-range-controls"],o={hash:{rangeStart:"rangeStart",rangeStop:"rangeStop",minCoord:"minCoord",maxCoord:"maxCoord",predefinedRegions:"predefinedRegions"},hashTypes:{rangeStart:"ID",rangeStop:"ID",minCoord:"ID",maxCoord:"ID",predefinedRegions:"ID"},hashContexts:{rangeStart:s,rangeStop:s,minCoord:s,maxCoord:s,predefinedRegions:s},contexts:[],types:[],data:r},i?i.call(s,o):u.call(s,"sequence-range-controls",o)))),r.buffer.push("\n      "),r.buffer.push(c((i=n.input||s&&s.input,o={hash:{type:"text","class":"form-control",value:"regexValue",placeholder:"Pattern to highlight",autofocus:"autofocus"},hashTypes:{type:"STRING","class":"STRING",value:"ID",placeholder:"STRING",autofocus:"STRING"},hashContexts:{type:s,"class":s,value:s,placeholder:s,autofocus:s},contexts:[],types:[],data:r},i?i.call(s,o):u.call(s,"input",o)))),r.buffer.push('\n      <div class="input-group-btn">\n        <button '),r.buffer.push(c(n.action.call(s,"resetRegex",{hash:{},hashTypes:{},hashContexts:{},contexts:[s],types:["STRING"],data:r}))),r.buffer.push(' type="button"\n          class="btn btn-default btn-sm" title="Reset regexp">\n          <i class="fa fa-undo"></i>\n        </button>\n      </div>\n      <span class="input-group-addon">\n        Mark positively selected sites\n        '),r.buffer.push(c((i=n.input||s&&s.input,o={hash:{type:"checkbox",name:"markPositive",checked:"markPositive"},hashTypes:{type:"STRING",name:"STRING",checked:"ID"},hashContexts:{type:s,name:s,checked:s},contexts:[],types:[],data:r},i?i.call(s,o):u.call(s,"input",o)))),r.buffer.push('\n      </span>\n    </div>\n    <div class="input-group input-group-sm">\n      '),r.buffer.push(c((i=n["multi-select"]||s&&s["multi-select"],o={hash:{content:"observedSequences",name:"Sequences",selected:"_selectedSequences",displayName:"id",viewLimit:100,submit:"finalizeSelection",submitOnClose:!0},hashTypes:{content:"ID",name:"STRING",selected:"ID",displayName:"STRING",viewLimit:"INTEGER",submit:"STRING",submitOnClose:"BOOLEAN"},hashContexts:{content:s,name:s,selected:s,displayName:s,viewLimit:s,submit:s,submitOnClose:s},contexts:[],types:[],data:r},i?i.call(s,o):u.call(s,"multi-select",o)))),r.buffer.push('\n    </div>\n  </div>\n</div>\n<br>\n<div class = "row">\n  <div class = "col-md-12">\n    '),r.buffer.push(c((i=n["timeseries-plot"]||s&&s["timeseries-plot"],o={hash:{width:800,height:250,data:"aaTrajectories",legendRight:!0,ymin:0,interpolation:"monotone"},hashTypes:{width:"INTEGER",height:"INTEGER",data:"ID",legendRight:"BOOLEAN",ymin:"INTEGER",interpolation:"STRING"},hashContexts:{width:s,height:s,data:s,legendRight:s,ymin:s,interpolation:s},contexts:[],types:[],data:r},i?i.call(s,o):u.call(s,"timeseries-plot",o)))),r.buffer.push("\n\n    "),r.buffer.push(c((i=n["sequence-viewer"]||s&&s["sequence-viewer"],o={hash:{groupedSequences:"groupedSequences",alnStart:"alnStart",alnStop:"alnStop",mrca:"mrcaSlice",selectedPositions:"selectedPositions",markPositive:"markPositive",refCoords:"model.frequencies.alnToRefCoords",positiveSelection:"model.rates.positiveSelection",regex:"regex",selectDefault:!0},hashTypes:{groupedSequences:"ID",alnStart:"ID",alnStop:"ID",mrca:"ID",selectedPositions:"ID",markPositive:"ID",refCoords:"ID",positiveSelection:"ID",regex:"ID",selectDefault:"BOOLEAN"},hashContexts:{groupedSequences:s,alnStart:s,alnStop:s,mrca:s,selectedPositions:s,markPositive:s,refCoords:s,positiveSelection:s,regex:s,selectDefault:s},contexts:[],types:[],data:r},i?i.call(s,o):u.call(s,"sequence-viewer",o)))),r.buffer.push("\n  </div>\n</div>\n"),l})}),define("flea-app/templates/session/trajectory",["exports","ember"],function(e,t){"use strict";e["default"]=t["default"].Handlebars.template(function(e,s,n,a,r){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,t["default"].Handlebars.helpers),r=r||{};var i,o,l="",u=this.escapeExpression,c=n.helperMissing;return r.buffer.push('<div class="form-inline">\n  <div class="form-group">\n    <label for="evo_regions">Region(s) to plot</label>\n  </div>\n  <div class="form-group">\n    '),r.buffer.push(u(n.view.call(s,"bootstrap-multiselect",{hash:{multiple:!0,content:"regions",selection:"selectedRegions",allowMultiple:"multipleRegions",id:"evo_regions"},hashTypes:{multiple:"BOOLEAN",content:"ID",selection:"ID",allowMultiple:"ID",id:"STRING"},hashContexts:{multiple:s,content:s,selection:s,allowMultiple:s,id:s},contexts:[s],types:["ID"],data:r}))),r.buffer.push('\n  </div>\n\n  <div class="form-group">\n    <label for="evo_metrics">Evolutionary metrics</label>\n  </div>\n  <div class="form-group">\n    '),r.buffer.push(u(n.view.call(s,"bootstrap-multiselect",{hash:{multiple:!0,content:"evoMetrics",selection:"selectedEvoMetrics",allowMultiple:"multipleMetrics",id:"evo_metrics"},hashTypes:{multiple:"BOOLEAN",content:"ID",selection:"ID",allowMultiple:"ID",id:"STRING"},hashContexts:{multiple:s,content:s,selection:s,allowMultiple:s,id:s},contexts:[s],types:["ID"],data:r}))),r.buffer.push("\n  </div>\n\n</div>\n\n<div class = 'row'>\n  <div class = 'col-md-12'>\n    "),r.buffer.push(u((i=n["timeseries-plot"]||s&&s["timeseries-plot"],o={hash:{width:900,height:350,data:"evoData",ymin:0},hashTypes:{width:"INTEGER",height:"INTEGER",data:"ID",ymin:"INTEGER"},hashContexts:{width:s,height:s,data:s,ymin:s},contexts:[],types:[],data:r},i?i.call(s,o):c.call(s,"timeseries-plot",o)))),r.buffer.push('\n  </div>\n</div>\n\n<div class="form-inline">\n  <div class="form-group">\n    <label for="_pheno_metrics">Phenotype metrics</label>\n  </div>\n  <div class="form-group">\n    '),r.buffer.push(u(n.view.call(s,"bootstrap-multiselect",{hash:{multiple:!0,content:"phenoMetrics",selection:"selectedPhenoMetrics",allowMultiple:"multipleMetrics",maxSelected:2,id:"_pheno_metrics"},hashTypes:{multiple:"BOOLEAN",content:"ID",selection:"ID",allowMultiple:"ID",maxSelected:"INTEGER",id:"STRING"},hashContexts:{multiple:s,content:s,selection:s,allowMultiple:s,maxSelected:s,id:s},contexts:[s],types:["ID"],data:r}))),r.buffer.push("\n  </div>\n</div>\n\n<div class = 'row'>\n  <div class = 'col-md-12'>\n    "),r.buffer.push(u((i=n["timeseries-plot"]||s&&s["timeseries-plot"],o={hash:{width:900,height:350,data:"phenoData",data2:"phenoData2"},hashTypes:{width:"INTEGER",height:"INTEGER",data:"ID",data2:"ID"},hashContexts:{width:s,height:s,data:s,data2:s},contexts:[],types:[],data:r},i?i.call(s,o):c.call(s,"timeseries-plot",o)))),r.buffer.push("\n  </div>\n</div>\n"),l})}),define("flea-app/templates/session/trees",["exports","ember"],function(e,t){"use strict";e["default"]=t["default"].Handlebars.template(function(e,s,n,a,r){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,t["default"].Handlebars.helpers),r=r||{};var i,o,l="",u=this.escapeExpression,c=n.helperMissing;return r.buffer.push('<div class="row">\n  <div class="col-md-12">\n    <div class="input-group input-group-sm">\n      <span class="input-group-addon">\n        Genomic region\n      </span>\n      '),r.buffer.push(u(n.view.call(s,"select",{hash:{"class":"form-control",content:"genomicRegions",value:"selectedGenomicRegion"},hashTypes:{"class":"STRING",content:"ID",value:"ID"},hashContexts:{"class":s,content:s,value:s},contexts:[s],types:["STRING"],data:r}))),r.buffer.push('\n      <span class="input-group-addon">\n        Time point\n      </span>\n      '),r.buffer.push(u(n.view.call(s,"select",{hash:{"class":"form-control",content:"timePoints",value:"selectedTimePoint"},hashTypes:{"class":"STRING",content:"ID",value:"ID"},hashContexts:{"class":s,content:s,value:s},contexts:[s],types:["STRING"],data:r}))),r.buffer.push('\n      <span class="input-group-addon">\n        Distance measure\n      </span>\n      '),r.buffer.push(u(n.view.call(s,"select",{hash:{"class":"form-control",content:"distanceMeasures",value:"selectedDistanceMeasure"},hashTypes:{"class":"STRING",content:"ID",value:"ID"},hashContexts:{"class":s,content:s,value:s},contexts:[s],types:["STRING"],data:r}))),r.buffer.push('\n      <span class="input-group-addon"\n            title="Update the tree when the region selected in the sequence panel changes">\n        Link to selected region\n        '),r.buffer.push(u((i=n.input||s&&s.input,o={hash:{type:"checkbox",checked:"linkeToSelection"},hashTypes:{type:"STRING",checked:"ID"},hashContexts:{type:s,checked:s},contexts:[],types:[],data:r},i?i.call(s,o):c.call(s,"input",o)))),r.buffer.push('\n      </span>\n      <span class="input-group-addon">\n        Show dates\n        '),r.buffer.push(u((i=n.input||s&&s.input,o={hash:{type:"checkbox",checked:"showDates"},hashTypes:{type:"STRING",checked:"ID"},hashContexts:{type:s,checked:s},contexts:[],types:[],data:r},i?i.call(s,o):c.call(s,"input",o)))),r.buffer.push('\n      </span>\n    </div>\n  </div>\n</div>\n\n<div class=\'row\'>\n  <div class=\'col-md-12\'>\n    <div class="btn-toolbar" role="toolbar">\n      <div class="btn-group">\n        <button type="button" class="btn btn-default btn-sm" id="expand_spacing"\n                title="Expand spacing" '),r.buffer.push(u(n.action.call(s,"setSpaceState","expand",{hash:{},hashTypes:{},hashContexts:{},contexts:[s,s],types:["STRING","STRING"],data:r}))),r.buffer.push('>\n          <i class="fa fa-expand" ></i>\n        </button>\n        <button type="button" class="btn btn-default btn-sm" id="compress_spacing"\n                title="Compress spacing" '),r.buffer.push(u(n.action.call(s,"setSpaceState","compress",{hash:{},hashTypes:{},hashContexts:{},contexts:[s,s],types:["STRING","STRING"],data:r}))),r.buffer.push('>\n          <i class="fa fa-compress" ></i>\n        </button>\n        <button type="button" class="btn btn-default btn-sm" id="sort_ascending"\n                title="Sort deepest clades to the bottom" '),r.buffer.push(u(n.action.call(s,"setSortState","ascending",{hash:{},hashTypes:{},hashContexts:{},contexts:[s,s],types:["STRING","STRING"],data:r}))),r.buffer.push('>\n          <i class="fa fa-sort-amount-asc" ></i>\n        </button>\n        <button type="button" class="btn btn-default btn-sm" id="sort_descending"\n                title="Sort deepest clades to the top" '),r.buffer.push(u(n.action.call(s,"setSortState","descending",{hash:{},hashTypes:{},hashContexts:{},contexts:[s,s],types:["STRING","STRING"],data:r}))),r.buffer.push('>\n          <i class="fa fa-sort-amount-desc" ></i>\n        </button>\n        <button type="button" class="btn btn-default btn-sm" id="sort_original"\n                title="Restore original order" '),r.buffer.push(u(n.action.call(s,"setSortState","original",{hash:{},hashTypes:{},hashContexts:{},contexts:[s,s],types:["STRING","STRING"],data:r}))),r.buffer.push(">\n          <i class=\"fa fa-sort\" ></i>\n        </button>\n      </div>\n    </div>\n  </div>\n</div>\n\n<div class='row'>\n  <div class='col-md-12' id='_tree_enclosure'>\n    "),r.buffer.push(u((i=n["phylotree-widget"]||s&&s["phylotree-widget"],o={hash:{tree:"tree",seq_ids_to_dates:"seqIdToDate",sortState:"sortState",spaceState:"spaceState",showDates:"showDates"},hashTypes:{tree:"ID",seq_ids_to_dates:"ID",sortState:"ID",spaceState:"ID",showDates:"ID"},hashContexts:{tree:s,seq_ids_to_dates:s,sortState:s,spaceState:s,showDates:s},contexts:[],types:[],data:r},i?i.call(s,o):c.call(s,"phylotree-widget",o)))),r.buffer.push("\n  </div>\n</div>\n"),l})}),define("flea-app/utils/utils",["exports"],function(e){"use strict";var t=function(e){return Object.prototype.toString.call(e).slice(8,-1)},s=function(e){return"Object"===t(e)},n=function(e){return"String"===t(e)},a=d3.time.format("%Y%m%d").parse,r=d3.time.format("%B %Y"),i=function(e,t){return o(e.map(function(e){return[e]}),t)},o=function(e,t){if(0===e.length)return"<table></table>";var s='<table class="table-striped table table-hover">';if(t){s+="<thead>",s+="<trow>";for(var n=0;n<t.length;n++)s+="<th>",s+=t[n],s+="</th>";s+="</trow>",s+="</thead>"}s+="<tbody>";for(var a=0;a<e.length;a++){s+="<tr>";for(var r=0;r<e[a].length;r++)s+="<td>",s+=e[a][r],s+="</td>";s+="</tr>"}return s+="</tbody>",s+="</table>"},l=function(e,t){for(var s,n=[],a=new RegExp(e,"g");null!==(s=a.exec(t));)n.push([s.index,s.index+s[0].length-1]);return n},u=function(e,t){var s=0;t||(t=function(e){return e});for(var n=0;n<e.length;n++)s+=t(e[n]);return s},c=function(e,t){e-=1;var s=-1;return s=e>=t.length?t[t.length-1]:t[e],s+1};e.isDate=s,e.isString=n,e.parse_date=a,e.format_date=r,e.htmlTable1D=i,e.htmlTable=o,e.regexRanges=l,e.sumArray=u,e.transformIndex=c}),define("flea-app/views/bootstrap-multiselect",["exports","ember"],function(e,t){"use strict";e["default"]=t["default"].Select.extend({allowMultiple:!0,maxSelected:-1,didInsertElement:function(){this.$().multiselect(),this.updateDisabled(),this.updateMultiple()},updateDisabled:function(){var e=this.get("maxSelected");if(e>0){var t=this.get("selection.length");if(t>=e){var s=this.$("option").filter(function(){return!$(this).is(":selected")});s.each(function(){var e=$('input[value="'+$(this).val()+'"]');e.prop("disabled",!0),e.parent("li").addClass("disabled")})}else this.$("option").each(function(){var e=$('input[value="'+$(this).val()+'"]');e.prop("disabled",!1),e.parent("li").removeClass("disabled")})}}.observes("selection.length","maxSelected"),updateMultiple:function(){this.get("allowMultiple")?this.$().attr("multiple","multiple"):this.$().removeAttr("multiple"),this.$().multiselect("rebuild")}.observes("allowMultiple")}),t["default"].Handlebars.helper("bootstrap-multiselect",t["default"].BootstrapMultiselect)}),define("flea-app/config/environment",["ember"],function(e){var t="flea-app";try{var s=t+"/config/environment",n=e["default"].$('meta[name="'+s+'"]').attr("content"),a=JSON.parse(unescape(n));return{"default":a}}catch(r){throw new Error('Could not read config from meta tag with name "'+s+'".')}}),runningTests?require("flea-app/tests/test-helper"):require("flea-app/app")["default"].create({});