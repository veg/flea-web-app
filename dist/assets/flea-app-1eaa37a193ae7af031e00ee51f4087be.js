"use strict"
define("flea-app/adapters/session",["exports","flea-app/config/environment","ember-decorators/object","flea-app/models/coordinates-object","flea-app/models/sequence-object","flea-app/models/sequences-object","flea-app/models/dates-object","flea-app/utils/utils"],function(e,t,n,r,o,i,a,s){function l(e){var t=c("mrca",e.reference),n=c("mrca",e.mrca),r=R.map(function(e){return c(e.name,e.sequence)},e.sequences),o=R.map(function(e){return c(e.name,e.sequence,(0,s.parse_date)(e.date),e.copynumber,e.x,e.y)},e.sequences)
return i.default.create({reference:t,mrca:n,observed:o,ancestors:r})}function c(e,t,n,r,i,a){return o.default.create({name:e,sequence:t,date:n,copynumber:r,x:i,y:a})}Object.defineProperty(e,"__esModule",{value:!0})
var u,d
e.default=Ember.Object.extend({ajax:Ember.inject.service(),find:function(e){var n=t.default.apiURL+"sessions/"+e
return this.get("ajax").request(n).then(function(e){return e.coordinates=r.default.create({data:e.coordinates}),e.dates=a.default.create({dates:R.map(function(e){return{name:e.name,date:(0,s.parse_date)(e.date)}},e.dates)}),e.sequences=l(e),e.proteinMetrics=p.create({data:e.protein_metrics}),delete e.protein_metrics,e.pdb=pv.io.pdb(e.pdb.join("\n")),e.predefinedRegions=R.map(function(e){return{name:e.name,start:e.start-1,stop:e.stop}},e.predefined_regions),delete e.predefined_regions,t.default.fleaMode&&(e.regionMetrics=e.region_metrics,delete e.region_metrics),e})}})
var p=Ember.Object.extend((u=(0,n.computed)("data.[]","selectionThreshold"),d={data:[],selectionThreshold:.95,positiveSelection:function(e,t){var n=R.find(R.propEq("name","dNdS"),e.paired)
if(!n)return{}
var r=R.find(R.propEq("name","Mean dN"),n.data),o={}
return R.forEach(function(e){var n=(0,s.maybe_parse_date)(e.date),r=e.values,i=R.filter(function(e){return r[e]>t},R.range(0,r.length))
o[n]=i},r.data),o}},function(e,t,n,r,o){var i={}
Object.keys(r).forEach(function(e){i[e]=r[e]}),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=n.slice().reverse().reduce(function(n,r){return r(e,t,n)||n},i),o&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(o):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null)}(d,"positiveSelection",[u],Object.getOwnPropertyDescriptor(d,"positiveSelection"),d),d))}),define("flea-app/app",["exports","flea-app/resolver","ember-load-initializers","flea-app/config/environment"],function(e,t,n,r){Object.defineProperty(e,"__esModule",{value:!0})
var o=Ember.Application.extend({modulePrefix:r.default.modulePrefix,podModulePrefix:r.default.podModulePrefix,Resolver:t.default});(0,n.default)(o,r.default.modulePrefix),e.default=o}),define("flea-app/components/basic-dropdown",["exports","ember-basic-dropdown/components/basic-dropdown"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}})}),define("flea-app/components/basic-dropdown/content-element",["exports","ember-basic-dropdown/components/basic-dropdown/content-element"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}})}),define("flea-app/components/basic-dropdown/content",["exports","ember-basic-dropdown/components/basic-dropdown/content"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}})}),define("flea-app/components/basic-dropdown/trigger",["exports","ember-basic-dropdown/components/basic-dropdown/trigger"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}})}),define("flea-app/components/c3-chart",["exports","ember-c3/components/c3-chart"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}})}),define("flea-app/components/ember-wormhole",["exports","ember-wormhole/components/ember-wormhole"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}})}),define("flea-app/components/power-select-multiple",["exports","ember-power-select/components/power-select-multiple"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}})}),define("flea-app/components/power-select-multiple/trigger",["exports","ember-power-select/components/power-select-multiple/trigger"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}})}),define("flea-app/components/power-select",["exports","ember-power-select/components/power-select"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}})}),define("flea-app/components/power-select/before-options",["exports","ember-power-select/components/power-select/before-options"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}})}),define("flea-app/components/power-select/options",["exports","ember-power-select/components/power-select/options"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}})}),define("flea-app/components/power-select/placeholder",["exports","ember-power-select/components/power-select/placeholder"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}})}),define("flea-app/components/power-select/power-select-group",["exports","ember-power-select/components/power-select/power-select-group"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}})}),define("flea-app/components/power-select/search-message",["exports","ember-power-select/components/power-select/search-message"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}})}),define("flea-app/components/power-select/trigger",["exports","ember-power-select/components/power-select/trigger"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}})}),define("flea-app/components/range-slider",["exports","ui-slider/components/range-slider"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}})}),define("flea-app/components/ui-slider",["exports","ui-slider/components/ui-slider"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}})}),define("flea-app/helpers/and",["exports","ember-truth-helpers/helpers/and"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}}),Object.defineProperty(e,"and",{enumerable:!0,get:function(){return t.and}})}),define("flea-app/helpers/app-version",["exports","flea-app/config/environment","ember-cli-app-version/utils/regexp"],function(e,t,n){function r(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}
return t.hideSha?o.match(n.versionRegExp)[0]:t.hideVersion?o.match(n.shaRegExp)[0]:o}Object.defineProperty(e,"__esModule",{value:!0}),e.appVersion=r
var o=t.default.APP.version
e.default=Ember.Helper.helper(r)}),define("flea-app/helpers/cancel-all",["exports","ember-concurrency/-helpers"],function(e,t){function n(e){var n=e[0]
return n&&"function"==typeof n.cancelAll||Ember.assert("The first argument passed to the `cancel-all` helper should be a Task or TaskGroup (without quotes); you passed "+n,!1),(0,t.taskHelperClosure)("cancelAll",[n,r])}Object.defineProperty(e,"__esModule",{value:!0}),e.cancelHelper=n
var r="the 'cancel-all' template helper was invoked"
e.default=Ember.Helper.helper(n)}),define("flea-app/helpers/ember-power-select-is-group",["exports","ember-power-select/helpers/ember-power-select-is-group"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}}),Object.defineProperty(e,"emberPowerSelectIsGroup",{enumerable:!0,get:function(){return t.emberPowerSelectIsGroup}})}),define("flea-app/helpers/ember-power-select-is-selected",["exports","ember-power-select/helpers/ember-power-select-is-selected"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}}),Object.defineProperty(e,"emberPowerSelectIsSelected",{enumerable:!0,get:function(){return t.emberPowerSelectIsSelected}})}),define("flea-app/helpers/ember-power-select-true-string-if-present",["exports","ember-power-select/helpers/ember-power-select-true-string-if-present"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}}),Object.defineProperty(e,"emberPowerSelectTrueStringIfPresent",{enumerable:!0,get:function(){return t.emberPowerSelectTrueStringIfPresent}})}),define("flea-app/helpers/eq",["exports","ember-truth-helpers/helpers/equal"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}}),Object.defineProperty(e,"equal",{enumerable:!0,get:function(){return t.equal}})}),define("flea-app/helpers/format-percent",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0})
var t=d3.format(">5.2f")
e.default=Ember.Helper.helper(function(e){var n=e[0],r=Ember.Handlebars.Utils.escapeExpression(n)
return new Ember.String.htmlSafe(t(r))})}),define("flea-app/helpers/gt",["exports","ember-truth-helpers/helpers/gt"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}}),Object.defineProperty(e,"gt",{enumerable:!0,get:function(){return t.gt}})}),define("flea-app/helpers/gte",["exports","ember-truth-helpers/helpers/gte"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}}),Object.defineProperty(e,"gte",{enumerable:!0,get:function(){return t.gte}})}),define("flea-app/helpers/is-array",["exports","ember-truth-helpers/helpers/is-array"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}}),Object.defineProperty(e,"isArray",{enumerable:!0,get:function(){return t.isArray}})})
define("flea-app/helpers/is-equal",["exports","ember-truth-helpers/helpers/is-equal"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}}),Object.defineProperty(e,"isEqual",{enumerable:!0,get:function(){return t.isEqual}})}),define("flea-app/helpers/lt",["exports","ember-truth-helpers/helpers/lt"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}}),Object.defineProperty(e,"lt",{enumerable:!0,get:function(){return t.lt}})}),define("flea-app/helpers/lte",["exports","ember-truth-helpers/helpers/lte"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}}),Object.defineProperty(e,"lte",{enumerable:!0,get:function(){return t.lte}})}),define("flea-app/helpers/not-eq",["exports","ember-truth-helpers/helpers/not-equal"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}}),Object.defineProperty(e,"notEq",{enumerable:!0,get:function(){return t.notEq}})}),define("flea-app/helpers/not",["exports","ember-truth-helpers/helpers/not"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}}),Object.defineProperty(e,"not",{enumerable:!0,get:function(){return t.not}})}),define("flea-app/helpers/or",["exports","ember-truth-helpers/helpers/or"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}}),Object.defineProperty(e,"or",{enumerable:!0,get:function(){return t.or}})}),define("flea-app/helpers/perform",["exports","ember-concurrency/-helpers"],function(e,t){function n(e,n){return(0,t.taskHelperClosure)("perform",e,n)}Object.defineProperty(e,"__esModule",{value:!0}),e.performHelper=n,e.default=Ember.Helper.helper(n)}),define("flea-app/helpers/task",["exports"],function(e){function t(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t]
return n}return Array.from(e)}function n(e){return Array.isArray(e)?e:Array.from(e)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.Helper.helper(function(e){var r=n(e),o=r[0],i=r.slice(1)
return o._curry.apply(o,t(i))})}),define("flea-app/helpers/xor",["exports","ember-truth-helpers/helpers/xor"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}}),Object.defineProperty(e,"xor",{enumerable:!0,get:function(){return t.xor}})}),define("flea-app/initializers/app-version",["exports","ember-cli-app-version/initializer-factory","flea-app/config/environment"],function(e,t,n){Object.defineProperty(e,"__esModule",{value:!0})
var r=n.default.APP,o=r.name,i=r.version
e.default={name:"App Version",initialize:(0,t.default)(o,i)}}),define("flea-app/initializers/component-prop-types",["exports","ember-prop-types/initializers/component-prop-types"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}}),Object.defineProperty(e,"initialize",{enumerable:!0,get:function(){return t.initialize}})}),define("flea-app/initializers/container-debug-adapter",["exports","ember-resolver/resolvers/classic/container-debug-adapter"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"container-debug-adapter",initialize:function(){var e=arguments[1]||arguments[0]
e.register("container-debug-adapter:main",t.default),e.inject("container-debug-adapter:main","namespace","application:main")}}}),define("flea-app/initializers/ember-concurrency",["exports","ember-concurrency"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"ember-concurrency",initialize:function(){}}}),define("flea-app/initializers/export-application-global",["exports","flea-app/config/environment"],function(e,t){function n(){var e=arguments[1]||arguments[0]
if(!1!==t.default.exportApplicationGlobal){var n
if("undefined"!=typeof window)n=window
else if("undefined"!=typeof global)n=global
else{if("undefined"==typeof self)return
n=self}var r,o=t.default.exportApplicationGlobal
r="string"==typeof o?o:Ember.String.classify(t.default.modulePrefix),n[r]||(n[r]=e,e.reopen({willDestroy:function(){this._super.apply(this,arguments),delete n[r]}}))}}Object.defineProperty(e,"__esModule",{value:!0}),e.initialize=n,e.default={name:"export-application-global",initialize:n}}),define("flea-app/initializers/inject-store",["exports","flea-app/pods/store/model"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"inject-store",initialize:function(e){e.register("store:main",t.default),e.inject("route","store","store:main"),e.inject("controller","store","store:main")}}}),define("flea-app/initializers/resize",["exports","ember-resize/services/resize","flea-app/config/environment"],function(e,t,n){function r(){var e=arguments[1]||arguments[0],r=n.default.resizeServiceDefaults,o=r.injectionFactories
e.register("config:resize-service",r,{instantiate:!1}),e.register("service:resize",t.default),e.inject("service:resize","resizeServiceDefaults","config:resize-service"),o.forEach(function(t){e.inject(t,"resizeService","service:resize")})}Object.defineProperty(e,"__esModule",{value:!0}),e.initialize=r,e.default={name:"resize",initialize:r}}),define("flea-app/mixins/color-label-mixin",["exports","flea-app/utils/utils","ember-decorators/object","ember-awesome-macros","ember-macro-helpers/raw"],function(e,t,n,r,o){function i(e,t,n,r,o){var i={}
return Object.keys(r).forEach(function(e){i[e]=r[e]}),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=n.slice().reverse().reduce(function(n,r){return r(e,t,n)||n},i),o&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(o):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i}Object.defineProperty(e,"__esModule",{value:!0})
var a,s,l,c,u,d,p,f,m,g,b,h
e.default=Ember.Mixin.create((a=(0,n.computed)("nodeNameType","nameMapper","nameToBlank","seqNameToSelf","seqNameToVisitCode","model.sequences.nameToMotif"),s=(0,n.computed)("seqs.[]"),l=(0,n.computed)("seqNames"),c=(0,n.computed)("seqNames"),u=(0,n.computed)("seqNames"),d=(0,n.computed)("realSeqNames","seqNameToDate","model.dates.dateToName"),p=(0,n.computed)("rankColors","model.dates.sortedDateObjs"),f=(0,n.computed)("rankColors","model.dates.sortedVisitCodes","model.dates.sortedDateObjs"),m=(0,n.computed)("model.sequences.nameToMotif"),g=(0,n.computed)("model.sequences.seqNameToDate","colorScaleTimePoint"),b=(0,n.computed)("model.sequences.nameToMotif","colorScaleMotif","nodeNameType"),h={nodeNameTypes:["none","visit_code","seq_name","motif"],nodeNameType:"none",rankColors:!1,seqs:Ember.computed.alias("model.sequences.observedAndMrca"),seqNameToDate:Ember.computed.alias("model.sequences.seqNameToDate"),nameMapper:{none:"seqNameToBlank",seq_name:"seqNameToSelf",visit_code:"seqNameToVisitCode",motif:"model.sequences.nameToMotif"},seqNameToNodeName:function(e,t){return this.get(t[e])},seqNames:function(e){return R.pluck("name",e)},realSeqNames:function(e){return R.filter(function(e){return"mrca"!==e.toLowerCase()},e)},seqNameToBlank:function(e){return R.zipObj(e,R.repeat("",e.length))},seqNameToSelf:function(e){return R.zipObj(e,e)},seqNameToVisitCode:function(e,t,n){var r=R.map(function(e){return n[t[e]]},e),o=R.zipObj(e,r)
return o.mrca="mrca",o},makeColorScale:function(e,t,n){if(n||(n=t),t.length!==n.length)throw"lengths do not match"
var r=R.zipObj(t,n),o=void 0,i=void 0
e?(i=n.length,o=d3.scale.ordinal().domain(n).range(R.range(0,n.length))):(i=1,o=d3.time.scale().domain(d3.extent(n)).range([0,1]))
var a=["red","orange","yellow","green","blue","indigo"],s=i/(a.length-1),l=d3.range(0,i+s/2,s),c=d3.scale.linear().domain(l).range(a).interpolate(d3.interpolateLab)
return function(e){return c(o(r[e]))}},colorScaleTimePoint:function(e,t){var n=R.pluck("date",t)
return this.makeColorScale(e,n)},colorScaleVisitCode:function(e,t,n){var r=R.pluck("date",n)
return this.makeColorScale(e,t,r)},colorScaleMotif:function(e){var t=R.uniq(R.values(e))
return(t.length>10?d3.scale.category20():d3.scale.category10()).domain(t)},seqNameToTimePointColor:function(e,t){return R.map(t,e)},seqNameToMotifColor:function(e,t,n){return R.map(t,e)},selectNodeNameType:function(e){null!=e&&this.set("nodeNameType",e)}},i(h,"seqNameToNodeName",[a],Object.getOwnPropertyDescriptor(h,"seqNameToNodeName"),h),i(h,"seqNames",[s],Object.getOwnPropertyDescriptor(h,"seqNames"),h),i(h,"realSeqNames",[l],Object.getOwnPropertyDescriptor(h,"realSeqNames"),h),i(h,"seqNameToBlank",[c],Object.getOwnPropertyDescriptor(h,"seqNameToBlank"),h),i(h,"seqNameToSelf",[u],Object.getOwnPropertyDescriptor(h,"seqNameToSelf"),h),i(h,"seqNameToVisitCode",[d],Object.getOwnPropertyDescriptor(h,"seqNameToVisitCode"),h),i(h,"colorScaleTimePoint",[p],Object.getOwnPropertyDescriptor(h,"colorScaleTimePoint"),h),i(h,"colorScaleVisitCode",[f],Object.getOwnPropertyDescriptor(h,"colorScaleVisitCode"),h),i(h,"colorScaleMotif",[m],Object.getOwnPropertyDescriptor(h,"colorScaleMotif"),h),i(h,"seqNameToTimePointColor",[g],Object.getOwnPropertyDescriptor(h,"seqNameToTimePointColor"),h),i(h,"seqNameToMotifColor",[b],Object.getOwnPropertyDescriptor(h,"seqNameToMotifColor"),h),i(h,"selectNodeNameType",[n.action],Object.getOwnPropertyDescriptor(h,"selectNodeNameType"),h),h))}),define("flea-app/mixins/d3-plot-mixin",["exports","ember-decorators/object"],function(e,t){function n(e,t,n,r,o){var i={}
return Object.keys(r).forEach(function(e){i[e]=r[e]}),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=n.slice().reverse().reduce(function(n,r){return r(e,t,n)||n},i),o&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(o):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i}Object.defineProperty(e,"__esModule",{value:!0})
var r,o,i,a,s,l,c,u,d=Ember.run.once
e.default=Ember.Mixin.create((r=(0,t.observes)("data.[]"),o=(0,t.computed)("width","margins"),i=(0,t.computed)("height","margins"),a=(0,t.computed)("margins"),s=(0,t.computed)("innerHeight"),l=(0,t.computed)("innerWidth"),c={tagName:"svg",attributeBindings:["width","height"],width:100,height:100,margins:{top:5,right:5,bottom:5,left:5},data:null,didInsertElement:function(){this._super.apply(this,arguments),this._updateChart()},_updateChart:function(){},onChartChange:function(){"inDOM"===this._state&&d(this,"_updateChart")},innerWidth:function(e,t){return e-t.left-t.right},innerHeight:function(e,t){return e-t.top-t.bottom},innerGroupTransform:function(e){return"translate("+e.left+", "+e.top+")"},xAxisTransform:function(e){return"translate(0, "+e+")"},yAxisTransform:function(e){return"translate("+e+", 0)"}},n(c,"onChartChange",[r],(u=Object.getOwnPropertyDescriptor(c,"onChartChange"),u=u?u.value:void 0,{enumerable:!0,configurable:!0,writable:!0,initializer:function(){return u}}),c),n(c,"innerWidth",[o],Object.getOwnPropertyDescriptor(c,"innerWidth"),c),n(c,"innerHeight",[i],Object.getOwnPropertyDescriptor(c,"innerHeight"),c),n(c,"innerGroupTransform",[a],Object.getOwnPropertyDescriptor(c,"innerGroupTransform"),c),n(c,"xAxisTransform",[s],Object.getOwnPropertyDescriptor(c,"xAxisTransform"),c),n(c,"yAxisTransform",[l],Object.getOwnPropertyDescriptor(c,"yAxisTransform"),c),c))}),define("flea-app/mixins/resize-aware",["exports","ember-resize/mixins/resize-aware"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}})}),define("flea-app/mixins/width-height-mixin",["exports","ember-resize/mixins/resize-aware"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.Mixin.create(t.default,{doResize:function(e){var t=e.$()
if(t){var n=t.parents("div").width(),r=t.parents("div").height()
e.set("width",n),e.set("height",r)}},init:function(){var e=this
this._super.apply(this,arguments)
var t=this
this.get("resizeService").on("didResize",function(){e.doResize(t)}),this.get("resizeService").on("debouncedDidResize",function(){e.doResize(t)})},didInsertElement:function(){this.doResize(this),this._super.apply(this,arguments)}})}),define("flea-app/mixins/width-mixin",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.Mixin.create({doResize:function(e){var t=e.$()
if(t){var n=t.parents("div").width()
e.set("width",n)}},init:function(){var e=this
this._super.apply(this,arguments)
var t=this
this.get("resizeService").on("didResize",function(){e.doResize(t)}),this.get("resizeService").on("debouncedDidResize",function(){e.doResize(t)})},didInsertElement:function(){this.doResize(this),this._super.apply(this,arguments)}})}),define("flea-app/models/coordinates-object",["exports","flea-app/utils/utils","ember-decorators/object"],function(e,t,n){function r(e,t,n,r,o){var i={}
return Object.keys(r).forEach(function(e){i[e]=r[e]}),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=n.slice().reverse().reduce(function(n,r){return r(e,t,n)||n},i),o&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(o):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i}Object.defineProperty(e,"__esModule",{value:!0})
var o,i,a,s,l,c,u,d,p,f,m
e.default=Ember.Object.extend((o=(0,n.computed)("alnToRefCoords"),i=(0,n.computed)("data.[]"),a=(0,n.observes)("alnToRefCoords"),s=(0,n.computed)("alnToRefCoords","refRange"),l=(0,n.computed)("alnToRefCoords","refRange"),c={data:[],refRange:function(e){return[e[0],e[e.length-1]+1]},alnToRefCoords:function(e){return e.map(function(e){return(0,t.zeroIndex)(e)})},refToAlnCoords:function(){for(var e=this.get("alnToRefCoords"),t=this.get("refRange")[1],n=new Array(t),r=new Array(t),o=-1,i=0;i<e.length;i++){var a=e[i]
if(r[a]=i,a!==o&&(n[a]=i),o>-1)for(var s=o+1;s<a;s++)n[s]=i,r[s]=i-1
o=a}return[n,r]},refToFirstAlnCoords:function(e,n){return(0,t.refToAlnCoords)(e,n[1])[0]},refToLastAlnCoords:function(e,n){return(0,t.refToAlnCoords)(e,n[1])[1]}},r(c,"refRange",[o],(u=Object.getOwnPropertyDescriptor(c,"refRange"),u=u?u.value:void 0,{enumerable:!0,configurable:!0,writable:!0,initializer:function(){return u}}),c),r(c,"alnToRefCoords",[i],(d=Object.getOwnPropertyDescriptor(c,"alnToRefCoords"),d=d?d.value:void 0,{enumerable:!0,configurable:!0,writable:!0,initializer:function(){return d}}),c),r(c,"refToAlnCoords",[a],(p=Object.getOwnPropertyDescriptor(c,"refToAlnCoords"),p=p?p.value:void 0,{enumerable:!0,configurable:!0,writable:!0,initializer:function(){return p}}),c),r(c,"refToFirstAlnCoords",[s],(f=Object.getOwnPropertyDescriptor(c,"refToFirstAlnCoords"),f=f?f.value:void 0,{enumerable:!0,configurable:!0,writable:!0,initializer:function(){return f}}),c),r(c,"refToLastAlnCoords",[l],(m=Object.getOwnPropertyDescriptor(c,"refToLastAlnCoords"),m=m?m.value:void 0,{enumerable:!0,configurable:!0,writable:!0,initializer:function(){return m}}),c),c))}),define("flea-app/models/dates-object",["exports","ember-decorators/object"],function(e,t){function n(e,t,n,r,o){var i={}
return Object.keys(r).forEach(function(e){i[e]=r[e]}),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=n.slice().reverse().reduce(function(n,r){return r(e,t,n)||n},i),o&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(o):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i}Object.defineProperty(e,"__esModule",{value:!0})
var r,o,i,a,s
e.default=Ember.Object.extend((r=(0,t.computed)("dates.[]"),o=(0,t.computed)("dates.[]"),i=(0,t.computed)("sortedDateObjs"),a=(0,t.computed)("sortedDateObjs"),s={dates:[],dateToName:function(e){return R.zipObj(R.pluck("date",e),R.pluck("name",e))},sortedDateObjs:function(e){return R.sort(function(e,t){return e.date-t.date},e)},sortedVisitCodes:function(e){return R.pluck("name",e)},sortedDates:function(e){return R.pluck("date",e)}},n(s,"dateToName",[r],Object.getOwnPropertyDescriptor(s,"dateToName"),s),n(s,"sortedDateObjs",[o],Object.getOwnPropertyDescriptor(s,"sortedDateObjs"),s),n(s,"sortedVisitCodes",[i],Object.getOwnPropertyDescriptor(s,"sortedVisitCodes"),s),n(s,"sortedDates",[a],Object.getOwnPropertyDescriptor(s,"sortedDates"),s),s))}),define("flea-app/models/sequence-object",["exports","ember-awesome-macros/string","ember-macro-helpers/raw"],function(e,t,n){Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.Object.extend({name:null,sequence:null,date:null,copynumber:null,x:null,y:null,aminoAcids:(0,t.split)("sequence",(0,n.default)(""))})}),define("flea-app/models/sequences-object",["exports","flea-app/utils/utils","ember-decorators/object"],function(e,t,n){function r(e,t,n,r,o){var i={}
return Object.keys(r).forEach(function(e){i[e]=r[e]}),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=n.slice().reverse().reduce(function(n,r){return r(e,t,n)||n},i),o&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(o):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i}Object.defineProperty(e,"__esModule",{value:!0})
var o,i,a,s,l,c,u
e.default=Ember.Object.extend((o=(0,n.computed)("observed.[]","mrca"),i=(0,n.computed)("observedAndMrca.[]","ancestors.[]","selectedPositions.[]"),a=(0,n.computed)("observedAndMrca.[]"),s={reference:null,mrca:null,observed:[],ancestors:[],selectedPositions:[],observedAndMrca:function(e,t){return[t].concat(e)},nameToMotif:function(){var e=this.get("observedAndMrca"),t=this.get("ancestors"),n=e.concat(t),r=this.get("selectedPositions").sort(function(e,t){return e-t}),o=R.map(R.prop("name"),n),i=R.map(function(e){return r.map(function(t){return e.get("sequence")[t]}).join("")},n)
return R.zipObj(o,i)},seqNameToDate:function(){return(0,t.seqNameToProperty)(this.get("observedAndMrca"),"date")}},r(s,"observedAndMrca",[o],(l=Object.getOwnPropertyDescriptor(s,"observedAndMrca"),l=l?l.value:void 0,{enumerable:!0,configurable:!0,writable:!0,initializer:function(){return l}}),s),r(s,"nameToMotif",[i],(c=Object.getOwnPropertyDescriptor(s,"nameToMotif"),c=c?c.value:void 0,{enumerable:!0,configurable:!0,writable:!0,initializer:function(){return c}}),s),r(s,"seqNameToDate",[a],(u=Object.getOwnPropertyDescriptor(s,"seqNameToDate"),u=u?u.value:void 0,{enumerable:!0,configurable:!0,writable:!0,initializer:function(){return u}}),s),s))}),define("flea-app/pods/application/controller",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0})
var t=Ember.Controller
e.default=t.extend({})}),define("flea-app/pods/application/route",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.Route.extend({setupController:function(e,t){this._super(e,t),e.set("rootURL",this.router.get("rootURL"))}})}),define("flea-app/pods/application/template",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.HTMLBars.template({id:"1k907urf",block:'{"symbols":[],"statements":[[1,[18,"outlet"],false],[0,"\\n"]],"hasEval":false}',meta:{moduleName:"flea-app/pods/application/template.hbs"}})}),define("flea-app/pods/components/alignment-overview/component",["exports","ember-decorators/object","ember-prop-types","flea-app/utils/utils","flea-app/mixins/width-mixin"],function(e,t,n,r,o){function i(e,t,n,r,o){var i={}
return Object.keys(r).forEach(function(e){i[e]=r[e]}),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=n.slice().reverse().reduce(function(n,r){return r(e,t,n)||n},i),o&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(o):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i}Object.defineProperty(e,"__esModule",{value:!0})
var a,s,l,c,u,d,p,f,m,g,b,h,v,y,O,P,x
e.default=Ember.Component.extend(o.default,(a=(0,t.computed)("labelHeight","mainHeight","axisHeight","margins"),s=(0,t.computed)("width","margins"),l=(0,t.computed)("height","margins"),c=(0,t.observes)("margins"),u=(0,t.observes)("labelHeight"),d=(0,t.computed)("validAlnRange","innerWidth"),p=(0,t.observes)("innerWidth","mainHeight"),f=(0,t.observes)("refToFirstAlnCoords.[]","alnToRefCoords.[]","tick","xscale","labelHeight","mainHeight"),m=(0,t.observes)("xscale","refToFirstAlnCoords.[]","refToLastAlnCoords.[]","predefinedRegions","labelHeight"),g=(0,t.observes)("alnToRefCoords","xscale","mainHeight"),b=(0,t.computed)("alnToRefCoords"),h=(0,t.observes)("insertions","mainHeight","xscale"),v=(0,t.observes)("xscale","markPositive","positiveSelection","mainHeight"),y=(0,t.observes)("xscale","selectedPositions.[]","mainHeight"),O=(0,t.computed)("alnRanges"),P=(0,t.observes)("xscale","closedRanges","innerWidth","mainHeight","validAlnRange"),x={propTypes:{alnRanges:n.PropTypes.EmberObject,validAlnRange:n.PropTypes.EmberObject,selectedPositions:n.PropTypes.EmberObject,predefinedRegions:n.PropTypes.EmberObject,alnToRefCoords:n.PropTypes.EmberObject,refToFirstAlnCoords:n.PropTypes.EmberObject,refToLastAlnCoords:n.PropTypes.EmberObject,labelHeight:n.PropTypes.number,mainHeight:n.PropTypes.number,axisHeight:n.PropTypes.number,tick:n.PropTypes.number},getDefaultProps:function(){return{labelHeight:15,mainHeight:30,axisHeight:20,margins:{top:0,right:5,bottom:0,left:5},tick:100}},tagName:"svg",attributeBindings:["width","height"],classNames:["alignment-overview"],shiftKey:!1,height:function(e,t,n,r){return e+t+n+r.top+r.bottom},innerWidth:function(e,t){return e-t.left-t.right},innerHeight:function(e,t){return e-t.top-t.bottom},transformGroup:function(){var e=this.get("margins")
d3.select("#"+this.get("elementId")).select(".overview").attr("transform","translate("+e.left+","+e.top+")")},transformMain:function(){var e=this.get("labelHeight")
d3.select("#"+this.get("elementId")).select(".overview").select(".main").attr("transform","translate(0,"+e+")")},xscale:function(e,t){return d3.scale.linear().domain(e).range([0,t])},didInsertElement:function(){this._super.apply(this,arguments),this.transformGroup(),this.transformMain(),this.drawTrack(),this.drawAxis(),this.drawLabels(),this.drawRanges(),this.drawSelected(),this.drawInsertions(),this.drawPositive(),this.makeBrush()
var e=this,t=function(){"inDOM"===e._state&&e.set("shiftKey",d3.event.shiftKey)}
d3.select(window).on("keydown",t),d3.select(window).on("keyup",t)},drawTrack:function(){var e=this.get("innerWidth"),t=this.get("mainHeight"),n=[{x1:0,y1:t/2,x2:e,y2:t/2,name:"middle"},{x1:0,y1:t/3,x2:0,y2:2*t/3,name:"left"},{x1:e-1,y1:t/3,x2:e-1,y2:2*t/3,name:"right"}],r=d3.select("#"+this.get("elementId")).select(".overview").select(".main").select(".track").selectAll("line").data(n,function(e){return e.name})
r.exit().remove(),r.enter().append("line"),r.attr("x1",function(e){return e.x1}).attr("y1",function(e){return e.y1}).attr("x2",function(e){return e.x2}).attr("y2",function(e){return e.y2}).attr("stroke-width",1).attr("stroke","black")},drawAxis:function(){var e=this.get("refToFirstAlnCoords"),t=this.get("alnToRefCoords"),n=this.get("tick"),o=this.get("xscale"),i=this.get("labelHeight"),a=this.get("mainHeight"),s=(0,r.alignmentTicks)(t,e,n),l=d3.svg.axis().scale(o).orient("bottom").tickValues(s).tickFormat(function(e){return(0,r.oneIndex)(t[e])})
d3.select("#"+this.get("elementId")).select(".overview").select(".axis").attr("class","x axis").attr("transform","translate(0,"+(i+a)+")").call(l)},drawLabels:function(){var e=this.get("xscale"),t=this.get("refToFirstAlnCoords"),n=this.get("refToLastAlnCoords"),o=this.get("predefinedRegions"),i=this.get("labelHeight"),a=d3.select("#"+this.get("elementId")).select(".labels"),s=i,l=s/2,c=this,u=a.selectAll("text").data(o,function(e){return e.name}),d=function(e,o){return n[(0,r.zeroIndex)(o)]-t[e]}
u.exit().remove(),u.enter().append("text").style("text-anchor","middle").style("dominant-baseline","middle").text(function(e){return e.name}).attr("font-family","sans-serif").attr("font-size","8px"),u.attr("x",function(n){return e(t[n.start]+d(n.start,n.stop)/2)}).attr("y",function(){return l})
var p=a.selectAll("rect").data(o,function(e){return e.name})
p.exit().remove(),p.enter().append("rect").on("click",function(e){var t=[e.start,e.stop]
c.get("shiftKey")?c.sendAction("addRange",t):c.sendAction("setRanges",[t])}.bind(this)).style("cursor","pointer").attr("height",function(){return s}).attr("stroke-width",1).attr("stroke","black").attr("fill-opacity",0),p.attr("x",function(n){return e((0,r.transformIndex)(n.start,t,!1))}).attr("y",function(){return 0}).attr("width",function(t){return e(d(t.start,t.stop))})},makeBrush:function(){var e=this.get("alnToRefCoords"),t=this.get("xscale"),n=this.get("mainHeight"),o=d3.select("#"+this.get("elementId")).select(".overview").select(".main").select(".brush"),i=d3.svg.brush(),a=this
i.x(t).on("brushend",function(){var t=i.extent(),n=[(0,r.transformIndex)(d3.round(t[0],0),e,!1),(0,r.transformIndex)(d3.round(t[1],0),e,!1)+1]
a.get("shiftKey")?a.sendAction("addRange",n):a.sendAction("setRanges",[n]),i.clear(),o.call(i)}),o.call(i).selectAll("rect").attr("height",n)},insertions:function(e){for(var t=[],n=!1,r=-1,o=-1,i=e.length,a=1;a<e.length;a++)n||e[a-1]!==e[a]?n&&e[a-1]!==e[a]?(o=a-1,n=!1,t.push([r,o])):n&&a+1===i&&(o=a,n=!1,t.push([r,o])):(n=!0,r=a)
return t},drawInsertions:function(){var e=this.get("insertions"),t=this.get("mainHeight"),n=this.get("xscale"),r=t/2,o=d3.select("#"+this.get("elementId")).select(".overview").select(".main").select(".insertions").selectAll("line").data(e,function(e){return String(e)})
o.exit().remove(),o.enter().append("line").attr("stroke-width",3).attr("stroke","black"),o.attr("x1",function(e){return n(e[0])}).attr("y1",function(){return r}).attr("x2",function(e){return n(e[1])}).attr("y2",function(){return r})},drawPositive:function(){var e=this.get("xscale"),t=this.get("markPositive"),n=this.get("positiveSelection"),r=this.get("mainHeight")
if(n){var o=[]
t&&(o=n)
var i=r,a=d3.select("#"+this.get("elementId")).select(".overview").select(".main").select(".positive").selectAll("line").data(o)
a.exit().remove(),a.enter().append("line").attr("stroke-width",1).attr("stroke","green"),a.attr("x1",function(t){return e(t)}).attr("y1",function(){return i/3}).attr("x2",function(t){return e(t)}).attr("y2",function(){return 2*i/3})}},drawSelected:function(){var e=this.get("xscale"),t=this.get("selectedPositions"),n=this.get("mainHeight"),r=d3.select("#"+this.get("elementId")).select(".overview").select(".main").select(".selected").selectAll("line").data(t)
r.exit().remove(),r.enter().append("line").attr("stroke-width",1).attr("stroke","red"),r.attr("x1",function(t){return e(t)}).attr("y1",function(){return 0}).attr("x2",function(t){return e(t)}).attr("y2",function(){return n})},closedRanges:function(e){return e.map(function(e){return[e[0],e[1]-1]})},drawRanges:function(){var e=this.get("xscale"),t=this.get("closedRanges"),n=this.get("innerWidth"),r=this.get("mainHeight"),o=this.get("validAlnRange"),i=d3.select("#"+this.get("elementId")).select(".overview").select(".main").select(".ranges"),a=this,s=d3.behavior.drag().on("drag",function(){var e=+d3.event.dx,t=+this.getAttribute("width"),r=+this.getAttribute("x")+e
r>=0&&r+t+1<=n&&d3.select(this).attr("x",r)}).on("dragend",function(){var t=+this.getAttribute("idx"),n=+this.getAttribute("x"),r=+this.getAttribute("width"),i=d3.round(e.invert(n),0),s=i+d3.round(e.invert(r))+1
i=Math.max(i,o[0]),s=Math.min(s,o[1]),a.sendAction("updateRange",t,[i,s])})
i.selectAll("rect").remove(),i.selectAll("rect").data(t).enter().append("rect").attr("x",function(t){return e(t[0])}).attr("y",function(){return 0}).attr("idx",function(e,t){return t}).attr("width",function(t){return e(t[1]-t[0])}).attr("height",function(){return r}).attr("stroke-width",1).attr("stroke","blue").style("fill","blue").attr("fill-opacity",.1).call(s).on("click",function(e,t){d3.event.defaultPrevented||a.sendAction("rmRange",t)})}},i(x,"height",[a],Object.getOwnPropertyDescriptor(x,"height"),x),i(x,"innerWidth",[s],Object.getOwnPropertyDescriptor(x,"innerWidth"),x),i(x,"innerHeight",[l],Object.getOwnPropertyDescriptor(x,"innerHeight"),x),i(x,"transformGroup",[c],Object.getOwnPropertyDescriptor(x,"transformGroup"),x),i(x,"transformMain",[u],Object.getOwnPropertyDescriptor(x,"transformMain"),x),i(x,"xscale",[d],Object.getOwnPropertyDescriptor(x,"xscale"),x),i(x,"drawTrack",[p],Object.getOwnPropertyDescriptor(x,"drawTrack"),x),i(x,"drawAxis",[f],Object.getOwnPropertyDescriptor(x,"drawAxis"),x),i(x,"drawLabels",[m],Object.getOwnPropertyDescriptor(x,"drawLabels"),x),i(x,"makeBrush",[g],Object.getOwnPropertyDescriptor(x,"makeBrush"),x),i(x,"insertions",[b],Object.getOwnPropertyDescriptor(x,"insertions"),x),i(x,"drawInsertions",[h],Object.getOwnPropertyDescriptor(x,"drawInsertions"),x),i(x,"drawPositive",[v],Object.getOwnPropertyDescriptor(x,"drawPositive"),x),i(x,"drawSelected",[y],Object.getOwnPropertyDescriptor(x,"drawSelected"),x),i(x,"closedRanges",[O],Object.getOwnPropertyDescriptor(x,"closedRanges"),x),i(x,"drawRanges",[P],Object.getOwnPropertyDescriptor(x,"drawRanges"),x),x))}),define("flea-app/pods/components/alignment-overview/template",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.HTMLBars.template({id:"5roy6vnH",block:'{"symbols":[],"statements":[[6,"g"],[9,"class","overview"],[7],[0,"\\n  "],[6,"g"],[9,"class","labels"],[7],[8],[0,"\\n  "],[6,"g"],[9,"class","main"],[7],[0,"\\n    "],[6,"g"],[9,"class","track"],[7],[8],[0,"\\n    "],[6,"g"],[9,"class","insertions"],[7],[8],[0,"\\n    "],[6,"g"],[9,"class","selected"],[7],[8],[0,"\\n    "],[6,"g"],[9,"class","positive"],[7],[8],[0,"\\n    "],[6,"g"],[9,"class","brush"],[7],[8],[0,"\\n    "],[6,"g"],[9,"class","ranges"],[7],[8],[0,"\\n  "],[8],[0,"\\n  "],[6,"g"],[9,"class","axis"],[7],[8],[0,"\\n"],[8],[0,"\\n"]],"hasEval":false}',meta:{moduleName:"flea-app/pods/components/alignment-overview/template.hbs"}})})
define("flea-app/pods/components/bootstrap-popover/component",["exports","ember-decorators/object"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0})
var n,r,o
e.default=Ember.Component.extend((n=(0,t.observes)("dataContent","html","placement"),r={tagName:"a",attributeBindings:["tabindex","dataToggle:data-toggle","dataTrigger:data-trigger","title","dataContent:data-content","placement"],classNames:["popover-link"],tabindex:"0",dataToggle:"popover",dataTrigger:"focus",title:"Title",dataContent:"Content",html:!0,placement:"auto right",didInsertElement:function(){this._super.apply(this,arguments),this.$().popover({html:this.get("html"),placement:this.get("placement")})}},function(e,t,n,r,o){var i={}
Object.keys(r).forEach(function(e){i[e]=r[e]}),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=n.slice().reverse().reduce(function(n,r){return r(e,t,n)||n},i),o&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(o):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null)}(r,"didInsertElement",[n],(o=Object.getOwnPropertyDescriptor(r,"didInsertElement"),o=o?o.value:void 0,{enumerable:!0,configurable:!0,writable:!0,initializer:function(){return o}}),r),r))}),define("flea-app/pods/components/d3-legend/component",["exports","ember-decorators/object","ember-prop-types"],function(e,t,n){Object.defineProperty(e,"__esModule",{value:!0})
var r,o,i=Ember.run.once
e.default=Ember.Component.extend((r=(0,t.observes)("legendLabels.[]","legendColors"),o={propTypes:{legendLabels:n.PropTypes.EmberObject.isRequired,legendColors:n.PropTypes.EmberObject.isRequired,xCoord:n.PropTypes.number,yCoord:n.PropTypes.number},getDefaultProps:function(){return{xCoord:0,yCoord:0}},tagName:"g",classNames:["legend"],didInsertElement:function(){this._super.apply(this,arguments),this._updateLegend()},onChartChange:function(){"inDOM"===this._state&&i(this,"_updateLegend")},_updateLegend:function(){var e=this.get("legendLabels"),t=this.get("legendColors"),n={x:this.get("xCoord"),y:this.get("yCoord"),spacer:25,margin:5,font:10},r=d3.select("#"+this.get("elementId"))
r.selectAll("g").remove(),r.append("g").attr("class","d3_legend").attr("x",n.x).attr("y",n.y).attr("transform","translate("+n.x+","+n.y+")").selectAll(".legend_panel").data(e,function(e){return e}).enter().append("g").attr("class","legend_panel").each(function(e,r){var o=d3.select(this)
o.append("rect").attr("x",n.spacer).attr("y",r*(n.spacer+n.margin)).attr("width",n.spacer).attr("height",n.spacer).style("fill",function(){return t(e)}),o.append("text").attr("x",2*n.spacer+n.font/4).attr("y",(r+1)*(n.spacer+n.margin)-n.margin-n.spacer/2+n.font/2).style("fill",function(){return t(e)}).attr("font-family","monospace").text(function(e){return e})})}},function(e,t,n,r,o){var i={}
Object.keys(r).forEach(function(e){i[e]=r[e]}),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=n.slice().reverse().reduce(function(n,r){return r(e,t,n)||n},i),o&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(o):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null)}(o,"onChartChange",[r],Object.getOwnPropertyDescriptor(o,"onChartChange"),o),o))}),define("flea-app/pods/components/d3-legend/template",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.HTMLBars.template({id:"iq4c4o5i",block:'{"symbols":[],"statements":[[0,"\\n"]],"hasEval":false}',meta:{moduleName:"flea-app/pods/components/d3-legend/template.hbs"}})}),define("flea-app/pods/components/graph-axis/component",["exports","ember-decorators/object"],function(e,t){function n(e,t,n,r,o){var i={}
return Object.keys(r).forEach(function(e){i[e]=r[e]}),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=n.slice().reverse().reduce(function(n,r){return r(e,t,n)||n},i),o&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(o):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i}Object.defineProperty(e,"__esModule",{value:!0})
var r,o,i,a=Ember.run.once
e.default=Ember.Component.extend((r=(0,t.computed)("scale","orient","ticks","tickValues","tickSize","tickFormat","tickPadding"),o=(0,t.observes)("d3Axis","rotate"),i={tagName:"g",classNames:["axis"],attributeBindings:["transform"],scale:null,orient:"bottom",ticks:10,tickValues:null,tickSize:5,tickFormat:null,tickPadding:5,rotate:0,d3Axis:function(e,t,n,r,o,i,a){var s=d3.svg.axis()
return s.scale(e).orient(t).ticks(n).tickValues(r).tickFormat(i).tickSize(o).tickPadding(a),s},didInsertElement:function(){this._super.apply(this,arguments),this._updateAxis()},onD3AxisChange:function(){"inDOM"===this._state&&a(this,"_updateAxis")},_updateAxis:function(){var e=this.get("d3Axis"),t=d3.select("#"+this.get("elementId")).call(e),n=this.get("rotate")
n&&t.selectAll("text").style("text-anchor","start").attr("transform","rotate("+n+")").attr("dx","0.5em").attr("dy","0.5em")}},n(i,"d3Axis",[r],Object.getOwnPropertyDescriptor(i,"d3Axis"),i),n(i,"onD3AxisChange",[o],Object.getOwnPropertyDescriptor(i,"onD3AxisChange"),i),i))}),define("flea-app/pods/components/mds-viewer/component",["exports","ember-decorators/object","ember-prop-types","flea-app/mixins/d3-plot-mixin","flea-app/mixins/width-height-mixin"],function(e,t,n,r,o){function i(e,t,n,r,o){var i={}
return Object.keys(r).forEach(function(e){i[e]=r[e]}),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=n.slice().reverse().reduce(function(n,r){return r(e,t,n)||n},i),o&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(o):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i}Object.defineProperty(e,"__esModule",{value:!0})
Ember.Object
var a,s,l,c,u,d,p,f,m,g=Ember.run.once
e.default=Ember.Component.extend(r.default,o.default,(a=(0,t.computed)("data.[]"),s=(0,t.computed)("data.[]"),l=(0,t.computed)("innerWidth","xDomain"),c=(0,t.computed)("innerHeight","yDomain"),u=(0,t.computed)("data.[]"),d=(0,t.computed)("cnDomain","cnScale"),p=(0,t.computed)("cnDomain"),f=(0,t.observes)("data.[]","nameToNodeColor","nameToMotif","nameToMotifColor","xScale","yScale","cnScale","highlightedNodes"),m={propTypes:{data:n.PropTypes.EmberObject.isRequired,nameToNodeLabel:n.PropTypes.EmberObject.isRequired,nameToNodeColor:n.PropTypes.EmberObject.isRequired,nameToMotifColor:n.PropTypes.EmberObject.isRequired,nameToMotif:n.PropTypes.EmberObject.isRequired,legendLabels:n.PropTypes.EmberObject.isRequired,legendColors:n.PropTypes.EmberObject.isRequired,highlightedNodes:n.PropTypes.EmberObject},getDefaultProps:function(){return{highlightedNodes:[]}},legendLabels:[],legendColors:null,xDomain:function(e){return d3.extent(e.map(function(e){return e.x}))},yDomain:function(e){return d3.extent(e.map(function(e){return e.y}))},scale:function(e,t,n){return d3.scale.linear().domain(e).range([t,n])},xScale:function(e,t){return this.scale(t,0,e)},yScale:function(e,t){return this.scale(t,e,0)},cnDomain:function(e){return[0,d3.max(R.pluck("copynumber",e))]},margin:function(e,t){var n=e[1],r=t,o=Math.sqrt(r(n))
return{top:o,right:o,bottom:o,left:o}},cnScale:function(e){return d3.scale.linear().domain(e).range([1,500])},onChartChange:function(){"inDOM"===this._state&&g(this,"_updateChart")},_updateChart:function(){var e=d3.select("#"+this.get("elementId")).select(".inner").select(".circles"),t=this.get("data"),n=this.get("xScale"),r=this.get("yScale"),o=this.get("cnScale"),i=this.get("nameToNodeColor"),a=this.get("nameToMotif"),s=this.get("nameToMotifColor"),l=this.get("highlightedNodes"),c=e.selectAll("circle").data(t,function(e){return e.name})
d3.select("body").select(".tooltip").remove()
var u=d3.select("body").append("div").attr("class","tooltip").style("opacity",0)
c.enter().append("circle"),c.exit().remove(),c.attr("cx",function(e){return n(e.x)}).attr("cy",function(e){return r(e.y)}).attr("r",function(e){return 1.5*Math.sqrt(o(e.copynumber))}).style("fill",function(e){return i[e.name]}).style("opacity",function(e){return 0===l.length?1:l.has(e.name)?1:.1}).on("mouseover",function(e){var t=e.name,n="black"
a[e.name]&&(t+=" : "+a[e.name],n=s[e.name]),u.transition().duration(100).style("opacity",.9),u.html(t).style("left",d3.event.pageX+"px").style("top",d3.event.pageY-30+"px").style("color",n)}).on("mouseout",function(){u.transition().duration(100).style("opacity",0)})}},i(m,"xDomain",[a],Object.getOwnPropertyDescriptor(m,"xDomain"),m),i(m,"yDomain",[s],Object.getOwnPropertyDescriptor(m,"yDomain"),m),i(m,"xScale",[l],Object.getOwnPropertyDescriptor(m,"xScale"),m),i(m,"yScale",[c],Object.getOwnPropertyDescriptor(m,"yScale"),m),i(m,"cnDomain",[u],Object.getOwnPropertyDescriptor(m,"cnDomain"),m),i(m,"margin",[d],Object.getOwnPropertyDescriptor(m,"margin"),m),i(m,"cnScale",[p],Object.getOwnPropertyDescriptor(m,"cnScale"),m),i(m,"onChartChange",[f],Object.getOwnPropertyDescriptor(m,"onChartChange"),m),m))}),define("flea-app/pods/components/mds-viewer/template",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.HTMLBars.template({id:"yBAcgVgz",block:'{"symbols":[],"statements":[[6,"g"],[10,"transform",[26,[[18,"innerGroupTransform"]]]],[9,"class","inner"],[7],[0,"\\n  "],[6,"g"],[9,"class","circles"],[7],[8],[0,"\\n\\n"],[4,"if",[[19,0,["legendLabels","length"]]],null,{"statements":[[0,"    "],[1,[25,"d3-legend",null,[["legendLabels","legendColors"],[[19,0,["legendLabels"]],[19,0,["legendColors"]]]]],false],[0,"\\n"]],"parameters":[]},null],[0,"\\n"],[8],[0,"\\n"]],"hasEval":false}',meta:{moduleName:"flea-app/pods/components/mds-viewer/template.hbs"}})}),define("flea-app/pods/components/phylotree-widget/component",["exports","ember-decorators/object"],function(e,t){function n(e,t,n,r,o){var i={}
return Object.keys(r).forEach(function(e){i[e]=r[e]}),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=n.slice().reverse().reduce(function(n,r){return r(e,t,n)||n},i),o&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(o):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i}Object.defineProperty(e,"__esModule",{value:!0})
var r,o,i,a,s,l,c,u,d,p,f,m,g=Ember.run.once
e.default=Ember.Component.extend((r=(0,t.computed)("copynumbers","minRadius","maxRadius"),o=(0,t.computed)("seqNameToNodeName"),i=(0,t.computed)("seqNameToTimePointColor","seqNameToMotifColor"),a=(0,t.observes)("tree","seqNameToMotif"),s=(0,t.observes)("sortState"),l=(0,t.observes)("heightScale"),c=(0,t.observes)("nodeNamer"),u=(0,t.observes)("nodeColorizer"),d=(0,t.observes)("showCopynumber","nodeSpan"),p=(0,t.observes)("overlapNodes"),f=(0,t.observes)("radialLayout"),m={tagName:"svg",attributeBindings:["width","height"],treeWidget:null,width:800,height:600,tree:null,copynumbers:null,showCopynumber:!1,overlapNodes:!0,seqNameToNodeName:null,seqNameToTimePointColor:null,seqNameToMotifColor:null,seqNameToMotif:null,radialLayout:!1,minRadius:.1,maxRadius:10,heightScale:1,nodeSpan:function(e,t,n){var r=d3.max(R.values(e)),o=d3.scale.sqrt().domain([0,r]).range([t,n])
return function(t){return o(t.name in e?e[t.name]:1)}},nodeNamer:function(e){return e?function(t){return Ember.isPresent(e[t.name])?e[t.name]:""}:function(e){return e.name}},nodeColorizer:function(e,t){return function(n,r){Ember.isPresent(e)?n.selectAll("circle").style("fill",e[r.name]).style("opacity",.4):n.selectAll("circle").style("fill","LightGray").style("opacity",.4),Ember.isPresent(t)?(n.selectAll("text").style("fill",t[r.name]),d3_phylotree_is_leafnode(r)||n.selectAll("circle").style("fill",t[r.name]).style("opacity",.9)):n.selectAll("text").style("fill","Black")}},didInsertElement:function(){this._super.apply(this,arguments)
var e=d3.select("#"+this.get("elementId")),t=d3.layout.phylotree().svg(e).separation(function(){return 0}).style_nodes(this.get("nodeColorizer")).branch_name(this.get("nodeNamer"))
t.options({"is-radial":this.get("radialLayout")},!1),t.options({"shift-nodes":!1},!1),t.options({"overlap-bubbles":this.get("overlapNodes")},!1),this.get("showCopynumber")?(t.node_span(this.get("nodeSpan")),t.options({"draw-size-bubbles":!0},!1)):(t.node_span("equal"),t.options({"draw-size-bubbles":!1},!1)),t.options({selectable:!1},!1),t.options({"internal-names":!0},!1),this.set("treeWidget",t),g(this,"newTree")},newTree:function(){var e=this.get("tree"),t=this.get("seqNameToMotif"),n=this.get("treeWidget")
n(e),n.get_nodes().forEach(function(e){d3_add_custom_menu(e,function(e){return e.name+" : "+t[e.name]},function(){},d3.layout.phylotree.is_leafnode)}),this.sort()},sort:function(){var e=this.get("sortState")
"ascending"===e?this.sortNodes(!0):"descending"===e?this.sortNodes(!1):this.sortOriginal()},sortNodes:function(e){var t=this.get("treeWidget")
t.traverse_and_compute(function(e){var t=1
e.children&&e.children.length&&(t+=d3.max(e.children,function(e){return e.count_depth})),e.count_depth=t}),t.resort_children(function(t,n){return(t.count_depth-n.count_depth)*(e?1:-1)})},sortOriginal:function(){this.get("treeWidget").resort_children(function(e,t){return e.original_child_order-t.original_child_order})},updateSpacing:function(){var e=this.get("heightScale"),t=this.get("treeWidget")
t.options({"height-scale":+e},!1),t.placenodes(),t.update(!0)},updateNames:function(){var e=this.get("nodeNamer"),t=this.get("treeWidget")
t.branch_name(e),t.update()},updateColors:function(){var e=this.get("nodeColorizer"),t=this.get("treeWidget")
t.style_nodes(e),t.refresh()},updateCopynumber:function(){var e=this.get("showCopynumber"),t=this.get("nodeSpan"),n=this.get("treeWidget")
e?(n.node_span(t),n.options({"draw-size-bubbles":!0},!1)):(n.node_span("equal"),n.options({"draw-size-bubbles":!1},!1)),n.placenodes(),n.update(!0)},updateOverlap:function(){var e=this.get("overlapNodes"),t=this.get("treeWidget")
t.options({"overlap-bubbles":e},!1),t.placenodes(),t.update(!0)},updateLayout:function(){var e=this.get("radialLayout"),t=this.get("treeWidget")
t.options({"is-radial":e},!1),t.placenodes(),t.update(!0)}},n(m,"nodeSpan",[r],Object.getOwnPropertyDescriptor(m,"nodeSpan"),m),n(m,"nodeNamer",[o],Object.getOwnPropertyDescriptor(m,"nodeNamer"),m),n(m,"nodeColorizer",[i],Object.getOwnPropertyDescriptor(m,"nodeColorizer"),m),n(m,"newTree",[a],Object.getOwnPropertyDescriptor(m,"newTree"),m),n(m,"sort",[s],Object.getOwnPropertyDescriptor(m,"sort"),m),n(m,"updateSpacing",[l],Object.getOwnPropertyDescriptor(m,"updateSpacing"),m),n(m,"updateNames",[c],Object.getOwnPropertyDescriptor(m,"updateNames"),m),n(m,"updateColors",[u],Object.getOwnPropertyDescriptor(m,"updateColors"),m),n(m,"updateCopynumber",[d],Object.getOwnPropertyDescriptor(m,"updateCopynumber"),m),n(m,"updateOverlap",[p],Object.getOwnPropertyDescriptor(m,"updateOverlap"),m),n(m,"updateLayout",[f],Object.getOwnPropertyDescriptor(m,"updateLayout"),m),m))}),define("flea-app/pods/components/protein-plots/component",["exports","ember-decorators/object","ember-prop-types","flea-app/mixins/d3-plot-mixin","flea-app/utils/utils","flea-app/mixins/width-mixin"],function(e,t,n,r,o,i){function a(e,t,n,r,o){var i={}
return Object.keys(r).forEach(function(e){i[e]=r[e]}),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=n.slice().reverse().reduce(function(n,r){return r(e,t,n)||n},i),o&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(o):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i}Object.defineProperty(e,"__esModule",{value:!0})
var s,l,c,u,d=Ember.run.once
e.default=Ember.Component.extend(r.default,i.default,(s=(0,t.computed)("margins","nPlots","heightEach","labelHeight"),l=(0,t.observes)("names.[]","data1","data2","selectedPositions","labels.[]","width","height","heightEach","margins","yMax","labelHeight"),c=(0,t.computed)("data1","data2"),u={propTypes:{names:n.PropTypes.EmberObject.isRequired,data1:n.PropTypes.EmberObject.isRequired,data2:n.PropTypes.EmberObject.isRequired,selectedPostions:n.PropTypes.array,labels:n.PropTypes.EmberObject.isRequired,url:n.PropTypes.string.isRequired,alnToRefCoords:n.PropTypes.EmberObject.isRequired,refToFirstAlnCoords:n.PropTypes.EmberObject.isRequired},getDefaultProps:function(){return{selectedPostions:[]}},heightEach:80,labelHeight:25,tick:100,yticks:5,margins:{top:20,right:20,bottom:50,left:30},height:function(e,t,n,r){return e.top+e.bottom+t*n+r},onChartChange:function(){"inDOM"===this._state&&d(this,"_updateChart")},yMax:function(e,t){return[d3.max(R.flatten(e)),d3.max(R.flatten(t))]},nPlots:Ember.computed.alias("names.length"),_updateChart:function(){try{this.__updateChart()}catch(e){if(!e||!e.name||"data consistency error"!==e.name)throw e
this._removeAll()}},_removeAll:function(){var e=d3.select("#"+this.get("elementId")).select(".inner")
e.selectAll("path").remove(),e.selectAll("g").remove(),e.selectAll("defs").remove()},__updateChart:function(){var e=this.get("names"),t=this.get("data1"),n=this.get("data2"),r=this.get("selectedPositions"),i=this.get("labels"),a=t[0].length,s=this.get("nPlots"),l=n.length>0
if(l&&t.length!==n.length)throw{name:"data consistency error",message:"data1 and data2 have different lengths"}
if(t.length!==e.length)throw{name:"data consistency error",message:"data1 and names have different lengths"}
for(var c=0;c<s;c++){if(t[c].length!==a)throw{name:"data consistency error",message:"data vector lengths are inconsistent"}
if(l&&n[c].length!==a)throw{name:"data consistency error",message:"data vector lengths are inconsistent"}}var u=this.get("innerWidth"),d=this.get("innerHeight"),p=this.get("heightEach"),f=this.get("url"),m=function(e){return b(e)}
this._removeAll()
var g=d3.select("#"+this.get("elementId")).select(".inner")
g.append("defs").append("clipPath").attr("id","clip").append("rect").attr("width",u).attr("height",d),g=g.append("g")
for(var b=d3.scale.linear().range([0,u]).domain([1,a]),h=d3.scale.linear().range([0,u]).domain([1,a]),v=d3.svg.brush().x(h).on("brush",function(){b.domain(v.empty()?h.domain():v.extent())
for(var e=0;e<D.length;e++)D[e].select("._pos_dS").attr("d",N[e][0]),l&&D[e].select("._pos_dN").attr("d",N[e][1]),D[e].selectAll(".selected_site").attr("cx",m)
g.select(".pos.x.axis").call(_)}),y=this.get("yMax"),O=d3.scale.linear().range([p,0]).domain([l?-y[1]:0,y[0]]),P=this.get("refToFirstAlnCoords"),x=this.get("alnToRefCoords"),w=this.get("tick"),j=(0,o.alignmentTicks)(x,P,w),_=d3.svg.axis().scale(b).orient("bottom").tickValues(j).tickFormat(function(e){return(0,o.oneIndex)(x[e])}),T=d3.svg.axis().scale(h).orient("top").tickValues(j).tickFormat(function(e){return(0,o.oneIndex)(x[e])}),M=d3.svg.axis().scale(b).orient("bottom").ticks(0).tickFormat(""),C=d3.svg.axis().scale(O).orient("right").ticks(this.get("yticks")),D=[],N=[],S=0;S<e.length;S++){var z=g.append("g").attr("transform","translate(0,"+p*S+")"),k=[]
k[0]=d3.svg.area().x(function(e,t){return b(t+1)}).y0(function(){return O(0)}).y1(function(e){return O(e)}).interpolate("step"),l&&(k[1]=d3.svg.area().x(function(e,t){return b(t+1)}).y0(function(e){return O(-e)}).y1(function(){return O(0)}).interpolate("step")),N.push(k),z.append("text").attr("transform","translate(0,"+O(0)+") rotate (-90)").attr("y","0").attr("dy","-0.5em").style("text-anchor",l?"middle":"start").text(e[S]),z.append("path").datum(t[S]).attr("class","_pos_dS").attr("clip-path","url("+f+"#clip)").attr("d",k[0]),z.append("g").attr("class","pos x axis").attr("transform","translate(0,"+p+")").call(M),z.append("g").attr("class","pos y axis").attr("transform","translate("+u+" ,0)").call(C),l&&z.append("path").datum(n[S]).attr("clip-path","url("+f+"#clip)").attr("class","_pos_dN").attr("d",k[1]),0===S?z.append("g").attr("class","x brush").call(v).selectAll("rect").attr("y",-6).attr("height",p+7):D.push(z),!R.isEmpty(r)&&S<r.length&&z.selectAll(".selected_site").data(r[S]).enter().append("circle").attr("cx",function(e){return b(e)}).attr("cy",function(){return O(0)}).attr("r",4).attr("class","selected_site").attr("clip-path","url("+f+"#clip)").append("title").text(function(e){return"Codon "+e})}g.append("g").attr("class","pos x_overall axis").call(T).append("text").attr("transform","translate(0,0)").attr("dy","-.4em").attr("dx",".25em").style("text-anchor","start").text("Site")
var E=this.get("labelHeight")
if(g.append("g").attr("class","pos x axis").attr("transform","translate(0,"+(d-E)+")").call(_).append("text").attr("transform","translate(0,0)").attr("dy","+1.1em").attr("dx",".25em").style("text-anchor","start").text("Site"),i.length>0){var q={x:0,y:d-E+10,spacer:15,margin:5,font:10,x_step:100},A=["#2E66FF","#FFB314"]
g.append("g").attr("class","protein_legend").attr("x",q.x).attr("y",q.y).attr("transform","translate("+q.x+","+q.y+")").selectAll("g").data(i).enter().append("g").each(function(e,t){var n=d3.select(this)
n.append("rect").attr("y",q.spacer).attr("x",t*(q.spacer+q.margin+q.x_step)).attr("width",q.spacer).attr("height",q.spacer).style("fill",A[t]),n.append("text").attr("y",2*q.spacer).attr("x",t*(q.spacer+q.margin+q.x_step)+q.spacer+q.font/4).style("fill",A[t]).text(e)})}}},a(u,"height",[s],Object.getOwnPropertyDescriptor(u,"height"),u),a(u,"onChartChange",[l],Object.getOwnPropertyDescriptor(u,"onChartChange"),u),a(u,"yMax",[c],Object.getOwnPropertyDescriptor(u,"yMax"),u),u))}),define("flea-app/pods/components/protein-plots/template",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.HTMLBars.template({id:"oPcwVP4B",block:'{"symbols":[],"statements":[[6,"g"],[10,"transform",[26,[[18,"innerGroupTransform"]]]],[10,"height",[26,[[18,"height"]]]],[9,"class","inner"],[7],[8],[0,"\\n"]],"hasEval":false}',meta:{moduleName:"flea-app/pods/components/protein-plots/template.hbs"}})}),define("flea-app/pods/components/pv-wrapper/component",["exports","ember-decorators/object","ember-prop-types","flea-app/mixins/width-height-mixin"],function(e,t,n,r){function o(e,t,n,r,o){var i={}
return Object.keys(r).forEach(function(e){i[e]=r[e]}),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=n.slice().reverse().reduce(function(n,r){return r(e,t,n)||n},i),o&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(o):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i}Object.defineProperty(e,"__esModule",{value:!0})
var i,a,s,l,c,u,d,p,f,m,g,b=Ember.Component,h=Ember.run.next,v=Ember.run.once
e.default=b.extend(r.default,(i=(0,t.computed)("hoveredResidue"),a=(0,t.observes)("viewer","structure","renderMode","renderOptions"),s=(0,t.computed)("selectedPositions.length"),l=(0,t.computed)("selectedPositions.length"),c=(0,t.observes)("renderMode","viewer","structure"),u=(0,t.observes)("data.[]","range.[]","structure","geometry","gradient"),d=(0,t.computed)("range"),p=(0,t.computed)("data.[]","range.[]"),f=(0,t.observes)("shouldLabelCoordinates"),m=(0,t.observes)("viewer","structure","gradient","normalizedData.[]","selectedPositions.[]"),g={structure:null,propTypes:{data:n.PropTypes.EmberObject,range:n.PropTypes.EmberObject,selectedPositions:n.PropTypes.EmberObject,shouldLabelCoordinates:n.PropTypes.bool},getDefaultProps:function(){return{data:[],range:[0,1],selectedPositions:[],shouldLabelCoordinates:!1}},viewer:null,geometry:null,hoveredResidue:null,hoveredLabel:function(e){return e?e.name()+" "+e.num():""},didInsertElement:function(){this._super.apply(this,arguments),h(this,this.get("setupView"))},doResize:function(){this._super.apply(this,arguments)
var e=this.get("viewer")
e&&e.resize(this.get("width"),this.get("height"))},setupView:function(){var e={width:this.get("width"),height:this.get("height"),antialias:!0,quality:"medium",fog:!0,background:"black"},t=pv.Viewer(this.$()[0],e)
this.set("viewer",t)},updateView:function(){v(this,"_updateView")},renderMode:function(e){return"tube"},renderOptions:function(e){return e>0?{radius:.2}:{radius:1.5}},_updateView:function(){var e=this.get("viewer"),t=this.get("structure")
if(e&&t){e.clear(),e.fitTo(t)
var n=e.renderAs("protein",t,this.get("renderMode"),this.get("renderOptions")),r=e.customMesh("missing"),o=!0,i=!1,a=void 0
try{for(var s,l=t.chains()[Symbol.iterator]();!(o=(s=l.next()).done);o=!0)(function(e){var t=e.residues(),n=t.map(function(e){return e.num()}),o=R.filter(function(e){return n[e]+1<n[e+1]},R.range(0,n.length-1)),i=!0,a=!1,s=void 0
try{for(var l,c=o[Symbol.iterator]();!(i=(l=c.next()).done);i=!0)(function(e){var o=t[e].atom(0).pos(),i=t[e+1].atom(0).pos(),a=Math.sqrt(Math.pow(i[0]-o[0],2)+Math.pow(i[1]-o[1],2)+Math.pow(i[2]-o[2],2)),s=n[e+1]-n[e]-1
if(a<4)return"continue"
for(var l=[(i[0]-o[0])/s,(i[1]-o[1])/s,(i[2]-o[2])/s],c=0;c<s;c++)(function(e){var t=R.map(function(t){return o[t]+(e+1)*l[t]},R.range(0,3)),n=[1,1,1,1]
pv.color.gradient(["yellow","green"]).colorAt(n,e/s),r.addSphere(t,2,{color:n})})(c)})(l.value)}catch(e){a=!0,s=e}finally{try{!i&&c.return&&c.return()}finally{if(a)throw s}}})(s.value)}catch(e){i=!0,a=e}finally{try{!o&&l.return&&l.return()}finally{if(i)throw a}}this.set("geometry",n),this.labelCoordinates(),this.updateColors(),this.drawSelected()}},mouseMove:function(e){var t=this.get("viewer")
if(t){var n=t.boundingClientRect(),r=t.pick({x:e.clientX-n.left,y:e.clientY-n.top})
if(null!==r&&null!==r.target())if(void 0!==r.node().structure){var o=r.target()
this.set("hoveredResidue",o.residue())
var i=r.node().structure().createEmptyView()
i.removeAtom(r.target(),!0)||i.addAtom(r.target()),r.node().setSelection(i),t.requestRedraw()}else this.set("hoveredResidue",null)
else this.set("hoveredResidue",null)}},updateRenderMode:function(){var e=this.get("viewer"),t=this.get("structure")
e.clear(),e.fitTo(t)
var n=e.renderAs("protein",t,this.get("renderMode"),this.get("renderOptions"))
this.set("geometry",n)},updateColors:function(){v(this,"_updateColors")},gradient:function(e){var t=pv.color.gradient(["white","darkred"])
return e[0]<0&&(t=pv.color.gradient(["darkblue","white","darkred"])),t},normalizedData:function(e,t){if(!e)return null
var n=d3.min(e),r=d3.max(e)
if(t[0]>n)throw{name:"RangeError",message:"range[0] too large"}
if(t[1]<r)throw{name:"RangeError",message:"range[1] too small"}
return R.map(function(e){return(e-t[0])/(t[1]-t[0])},e)},_updateColors:function(){var e=this.get("geometry"),t=this.get("structure")
if(null!==t){var n=this.get("normalizedData")
if(n){t.eachResidue(function(e){var t=e.num(),r=n[t-1]
r=void 0===r?0:r,e.customData=function(){return r}})
var r=this.get("gradient"),o=pv.color.byResidueProp("customData",r,[0,1])
e.colorBy(o),this.drawSelected(),this.get("viewer").requestRedraw()}}},labelCoordinates:function(){v(this,"_labelCoordinates")},_labelCoordinates:function(){var e=this.get("viewer")
if(e.rm("label*"),this.get("shouldLabelCoordinates")){var t=0,n={fontSize:12,fontColor:"yellow",backgroundColor:"black",backgroundAlpha:.9}
this.get("structure").eachResidue(function(r){var o=r.num()
if(o%10==0){var i="label_"+t
e.label(i,o,r.atom(0).pos(),n),t+=1}})}this.get("viewer").requestRedraw()},drawSelected:function(){v(this,"_drawSelected")},_drawSelected:function(){var e=this.get("viewer"),t=this.get("structure"),n=this.get("selectedPositions"),r=this.get("gradient"),o=this.get("normalizedData")
if(e&&t&&r&&n&&o){e.rm("selectedPositions")
var i=e.customMesh("selectedPositions")
t.eachResidue(function(e){var t=e.num()
if(n.includes(t-1)){var a=e.atom(0).pos(),s=[1,1,1,1],l=o[t-1]
l=void 0===l?0:l,r.colorAt(s,l),i.addSphere(a,2,{color:s})}})}}},o(g,"hoveredLabel",[i],Object.getOwnPropertyDescriptor(g,"hoveredLabel"),g),o(g,"updateView",[a],Object.getOwnPropertyDescriptor(g,"updateView"),g),o(g,"renderMode",[s],Object.getOwnPropertyDescriptor(g,"renderMode"),g),o(g,"renderOptions",[l],Object.getOwnPropertyDescriptor(g,"renderOptions"),g),o(g,"updateRenderMode",[c],Object.getOwnPropertyDescriptor(g,"updateRenderMode"),g),o(g,"updateColors",[u],Object.getOwnPropertyDescriptor(g,"updateColors"),g),o(g,"gradient",[d],Object.getOwnPropertyDescriptor(g,"gradient"),g),o(g,"normalizedData",[p],Object.getOwnPropertyDescriptor(g,"normalizedData"),g),o(g,"labelCoordinates",[f],Object.getOwnPropertyDescriptor(g,"labelCoordinates"),g),o(g,"drawSelected",[m],Object.getOwnPropertyDescriptor(g,"drawSelected"),g),g))}),define("flea-app/pods/components/pv-wrapper/template",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.HTMLBars.template({id:"cscQDkHj",block:'{"symbols":[],"statements":[[6,"div"],[9,"class","hovered-label"],[7],[0,"\\n  "],[1,[18,"hoveredLabel"],false],[0,"\\n"],[8],[0,"\\n"]],"hasEval":false}',meta:{moduleName:"flea-app/pods/components/pv-wrapper/template.hbs"}})}),define("flea-app/pods/components/sequence-range-controls/component",["exports","ember-decorators/object","ember-decorators/object/evented","ember-prop-types","flea-app/utils/utils"],function(e,t,n,r,o){function i(e,t,n,r,o){var i={}
return Object.keys(r).forEach(function(e){i[e]=r[e]}),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=n.slice().reverse().reduce(function(n,r){return r(e,t,n)||n},i),o&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(o):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i}Object.defineProperty(e,"__esModule",{value:!0})
var a,s,l,c,u=function(){function e(e,t){var n=[],r=!0,o=!1,i=void 0
try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{!r&&s.return&&s.return()}finally{if(o)throw i}}return n}return function(t,n){if(Array.isArray(t))return t
if(Symbol.iterator in Object(t))return e(t,n)
throw new TypeError("Invalid attempt to destructure non-iterable instance")}}()
e.default=Ember.Component.extend((a=(0,t.computed)("ranges","ranges.length","ranges.[]","ranges.[].[]"),s=(0,n.on)("init"),l=(0,t.observes)("computedText"),c={propTypes:{validRange:r.PropTypes.EmberObject,rangeText:r.PropTypes.string},getDefaultProps:function(){return{validRange:[],rangeText:""}},tagName:"",inputClass:"input-valid",computedText:function(e){return e.map(function(e){return(0,o.oneIndex)(e[0])+"-"+e[1]}).join(";")},updateText:function(){this.set("rangeText",this.get("computedText"))},toController:function(e){var t=this.get("validRange"),n=u(t,2),r=n[0],o=n[1]
e=e.map(function(e){var t=u(e,2),n=t[0],i=t[1]
return n<r&&(n=r),i>o&&(i=o),[n,i]}),R.all(R.map(function(e){return e[0]<e[1]},e))&&this.sendAction("setRanges",e)},moveRanges:function(e){for(var t=this.get("ranges"),n=this.get("validRange"),r=u(n,2),o=r[0],i=r[1],a=0;a<t.length;a++){var s=u(t[a],2),l=s[0],c=s[1]
o<=l+e&&l+e<=c+e&&c+e<=i&&(t[a][0]=l+e,t[a][1]=c+e)}this.toController(t)},setRange:function(e,t){var n=[[e,t]]
this.toController(n)},handleTextSubmit:function(){this.set("inputClass","input-valid")
var e=this.get("rangeText")
try{var t=e.split(";").map(function(e){var t=e.split("-")
if(2!==t.length)throw"wrong number of ranges"
return[+t[0]-1,+t[1]]})
this.toController(t)}catch(e){this.set("inputClass","input-invalid")}}},i(c,"computedText",[a],Object.getOwnPropertyDescriptor(c,"computedText"),c),i(c,"updateText",[s,l],Object.getOwnPropertyDescriptor(c,"updateText"),c),i(c,"moveRanges",[t.action],Object.getOwnPropertyDescriptor(c,"moveRanges"),c),i(c,"setRange",[t.action],Object.getOwnPropertyDescriptor(c,"setRange"),c),i(c,"handleTextSubmit",[t.action],Object.getOwnPropertyDescriptor(c,"handleTextSubmit"),c),c))}),define("flea-app/pods/components/sequence-range-controls/template",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.HTMLBars.template({id:"mkKy/RLY",block:'{"symbols":["region"],"statements":[[6,"div"],[9,"class","input-group-btn"],[7],[0,"\\n  "],[6,"button"],[9,"type","button"],[9,"class","btn btn-default btn-sm"],[9,"title","Jump left"],[3,"action",[[19,0,[]],"moveRanges",-5]],[7],[0,"\\n    "],[6,"i"],[7],[6,"i"],[9,"class","fa fa-fast-backward"],[9,"aria-hidden","true"],[7],[8],[8],[0,"\\n  "],[8],[0,"\\n"],[8],[0,"\\n"],[6,"div"],[9,"class","input-group-btn"],[7],[0,"\\n  "],[6,"button"],[9,"type","button"],[9,"class","btn btn-default btn-sm"],[9,"title","Move left"],[3,"action",[[19,0,[]],"moveRanges",-1]],[7],[0,"\\n    "],[6,"i"],[7],[6,"i"],[9,"class","fa fa-backward"],[9,"aria-hidden","true"],[7],[8],[8],[0,"\\n  "],[8],[0,"\\n"],[8],[0,"\\n"],[6,"span"],[9,"class","input-group-addon"],[7],[0,"Range"],[8],[0,"\\n"],[1,[25,"input",null,[["type","class","value","placeholder","autofocus","focus-out","insert-newline"],["string",[25,"concat",["form-control"," ",[25,"if",[[19,0,["inputClass"]],[25,"-normalize-class",["inputClass",[19,0,["inputClass"]]],null]],null]," "],null],[19,0,["rangeText"]],"reference coordinate range (e.g. 160-200)","autofocus","handleTextSubmit","handleTextSubmit"]]],false],[0,"\\n"],[6,"div"],[9,"class","input-group-btn"],[7],[0,"\\n  "],[6,"button"],[9,"type","button"],[9,"class","btn btn-default btn-sm"],[9,"title","Move right"],[3,"action",[[19,0,[]],"moveRanges",1]],[7],[0,"\\n    "],[6,"i"],[7],[6,"i"],[9,"class","fa fa-forward"],[9,"aria-hidden","true"],[7],[8],[8],[0,"\\n  "],[8],[0,"\\n"],[8],[0,"\\n"],[6,"div"],[9,"class","input-group-btn"],[7],[0,"\\n  "],[6,"button"],[9,"type","button"],[9,"class","btn btn-default btn-sm"],[9,"title","Jump right"],[3,"action",[[19,0,[]],"moveRanges",5]],[7],[0,"\\n    "],[6,"i"],[7],[6,"i"],[9,"class","fa fa-fast-forward"],[9,"aria-hidden","true"],[7],[8],[8],[0,"\\n  "],[8],[0,"\\n"],[8],[0,"\\n"],[4,"if",[[19,0,["predefinedRegions"]]],null,{"statements":[[0,"  "],[6,"div"],[9,"class","input-group-btn"],[7],[0,"\\n    "],[6,"button"],[9,"type","button"],[9,"class","btn btn-default dropdown-toggle"],[9,"data-toggle","dropdown"],[7],[0,"Predefined\\n      "],[6,"span"],[9,"class","caret"],[7],[8],[8],[0,"\\n    "],[6,"ul"],[9,"class","dropdown-menu"],[7],[0,"\\n"],[4,"each",[[19,0,["predefinedRegions"]]],null,{"statements":[[0,"\\t"],[6,"li"],[7],[0,"\\n\\t  "],[6,"a"],[9,"class","seq-predef"],[3,"action",[[19,0,[]],"setRange",[19,1,["start"]],[19,1,["stop"]]]],[7],[0,"\\n            "],[1,[19,1,["name"]],false],[0,"\\n\\t  "],[8],[0,"\\n\\t"],[8],[0,"\\n"]],"parameters":[1]},null],[0,"    "],[8],[0,"\\n  "],[8],[0,"\\n"]],"parameters":[]},null]],"hasEval":false}',meta:{moduleName:"flea-app/pods/components/sequence-range-controls/template.hbs"}})}),define("flea-app/pods/components/sequence-viewer/component",["exports","ember-decorators/object","ember-prop-types","flea-app/utils/utils"],function(e,t,n,r){function o(e,t,n,r,o){var i={}
return Object.keys(r).forEach(function(e){i[e]=r[e]}),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=n.slice().reverse().reduce(function(n,r){return r(e,t,n)||n},i),o&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(o):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i}Object.defineProperty(e,"__esModule",{value:!0})
var i,a,s
e.default=Ember.Component.extend((i=(0,t.computed)("alnRanges","alnToRef","selectedPositions.[]"),a=(0,t.computed)("positiveSelection","alnRanges.[]"),s={propTypes:{groupedSequences:n.PropTypes.EmberObject.isRequired,alnToRef:n.PropTypes.EmberObject.isRequired,selectedPositions:n.PropTypes.EmberObject,nCols:n.PropTypes.number},getDefaultProps:function(){return{selectedPositions:[],nCols:1e3}},selectDefault:!1,didInsertElement:function(){this._super.apply(this,arguments),this.$("#wrapped-table").on("scroll",function(){var e="translate(0,"+this.scrollTop+"px)"
this.querySelector("thead").style.transform=e})},refHTML:function(e,t,n){for(var o=[],i=0;i<e.length;i++){for(var a=-1,s=e[i][0],l=e[i][1],c=s;c<l;c++){var u=(0,r.oneIndex)(t[c]),d=""
d=u<10?"  "+u:u<100?" "+u:""+u,a===u&&(d=" - ")
var p="ref_coord"
n.includes(c)&&(p+=" selected_position"),d=d.split("").join("<br/>"),d+="<br/>",o.push({_class:p,dataCoord:c,html:d}),a=u}e.length>1&&i<e.length-1&&o.push({_class:"ref_coord seperator",dataCoord:"",html:"|<br/>|<br/>|"})}return o},visiblePositiveSites:function(e,t){var n=R.anyPass(R.map(function(e){return function(t){return e[0]<=t&&t<e[1]}},t)),r=R.compose(R.uniq,R.flatten,R.prop("Combined"))(e)
return R.filter(n,r)},sendSelected:function(e){this.sendAction("setSelectedPositions",e)},togglePosition:function(e){e=+e
var t=this.get("selectedPositions"),n=t.indexOf(e)
n>-1?t.splice(n,1):t.push(e),this.sendSelected(t.slice())},clearPositions:function(){this.sendSelected([])},selectPositiveClicked:function(){var e=this.get("visiblePositiveSites")
this.sendSelected(e)}},o(s,"refHTML",[i],Object.getOwnPropertyDescriptor(s,"refHTML"),s),o(s,"visiblePositiveSites",[a],Object.getOwnPropertyDescriptor(s,"visiblePositiveSites"),s),o(s,"togglePosition",[t.action],Object.getOwnPropertyDescriptor(s,"togglePosition"),s),o(s,"clearPositions",[t.action],Object.getOwnPropertyDescriptor(s,"clearPositions"),s),o(s,"selectPositiveClicked",[t.action],Object.getOwnPropertyDescriptor(s,"selectPositiveClicked"),s),s))}),define("flea-app/pods/components/sequence-viewer/template",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.HTMLBars.template({id:"u4X2pR4e",block:'{"symbols":["group","seq","index","aa","aa","elt"],"statements":[[6,"div"],[9,"id","wrapped-table"],[7],[0,"  "],[2," for fixed header; see https://stackoverflow.com/a/25902860 "],[0,"\\n  "],[6,"table"],[9,"class","table table-condensed nostretch sequence-viewer-table"],[9,"id","sequence-viewer-table"],[7],[0,"\\n    "],[6,"thead"],[7],[0,"\\n      "],[6,"tr"],[7],[0,"\\n        "],[6,"th"],[9,"class","seq-cell seq-col-1"],[7],[0,"ref. coord."],[6,"br"],[7],[8],[0,"\\n          "],[6,"div"],[7],[0,"\\n            "],[6,"button"],[9,"title","Select positive sites"],[9,"type","button"],[9,"class","btn btn-default btn-sm"],[3,"action",[[19,0,[]],"selectPositiveClicked"]],[7],[6,"i"],[7],[6,"i"],[9,"class","fa fa-plus"],[9,"aria-hidden","true"],[7],[8],[8],[8],[0,"\\n            "],[6,"button"],[9,"title","Clear sites"],[9,"type","button"],[9,"class","btn btn-default btn-sm"],[3,"action",[[19,0,[]],"clearPositions"]],[7],[6,"i"],[7],[6,"i"],[9,"class","fa fa-remove"],[9,"aria-hidden","true"],[7],[8],[8],[8],[0,"\\n          "],[8],[0,"\\n        "],[8],[0,"\\n"],[4,"each",[[19,0,["refHTML"]]],null,{"statements":[[0,"          "],[6,"th"],[9,"class","seq-cell ref-coords"],[7],[0,"\\n            "],[6,"span"],[10,"class",[26,[[19,6,["_class"]]]]],[10,"data-coord",[26,[[19,6,["dataCoord"]]]]],[3,"action",[[19,0,[]],"togglePosition",[19,6,["dataCoord"]]]],[7],[0,"\\n              "],[1,[19,6,["html"]],true],[0,"\\n            "],[8],[0,"\\n          "],[8],[0,"\\n"]],"parameters":[6]},null],[0,"        "],[6,"th"],[9,"class","seq-cell copynumber-cell"],[7],[8],[0,"\\n        "],[6,"th"],[9,"class","seq-cell abundance-cell"],[7],[8],[0,"\\n      "],[8],[0,"\\n"],[4,"if",[[19,0,["reference"]]],null,{"statements":[[0,"        "],[6,"tr"],[7],[0,"\\n          "],[6,"th"],[9,"class","seq-cell seq-cell-title"],[7],[0,"\\n            Reference\\n          "],[8],[0,"\\n"],[4,"each",[[19,0,["reference"]]],null,{"statements":[[0,"\\t    "],[6,"th"],[10,"class",[26,["aa aa",[19,5,[]]]]],[7],[0,"\\n              "],[1,[19,5,[]],false],[0,"\\n\\t    "],[8],[0,"\\n"]],"parameters":[5]},null],[0,"          "],[6,"th"],[9,"class","seq-cell copynumber-cell"],[7],[8],[0,"\\n          "],[6,"th"],[9,"class","seq-cell abundance-cell"],[7],[8],[0,"\\n        "],[8],[0,"\\n"]],"parameters":[]},null],[0,"      "],[6,"tr"],[7],[0,"\\n        "],[6,"th"],[9,"class","seq-cell seq-cell-title"],[7],[0,"MRCA"],[8],[0,"\\n"],[4,"each",[[19,0,["mrca"]]],null,{"statements":[[0,"\\t  "],[6,"th"],[10,"class",[26,["aa aa",[19,4,[]]]]],[7],[0,"\\n            "],[1,[19,4,[]],false],[0,"\\n\\t  "],[8],[0,"\\n"]],"parameters":[4]},null],[0,"        "],[6,"th"],[9,"class","seq-cell copynumber-cell"],[7],[8],[0,"\\n        "],[6,"th"],[9,"class","seq-cell abundance-cell"],[7],[8],[0,"\\n      "],[8],[0,"\\n    "],[8],[0,"\\n    "],[6,"tbody"],[7],[0,"\\n"],[4,"each",[[19,0,["groupedSequences"]]],null,{"statements":[[4,"each",[[19,1,["sequences"]]],null,{"statements":[[0,"          "],[6,"tr"],[7],[0,"\\n            "],[6,"td"],[9,"class","seq-cell seq-group-label"],[7],[0,"\\n"],[4,"if",[[25,"eq",[[19,3,[]],0],null]],null,{"statements":[[0,"\\t\\t"],[1,[19,1,["label"]],false],[0,"\\n"]],"parameters":[]},null],[0,"\\t    "],[8],[0,"\\n\\t    "],[1,[19,2,["htmlRow"]],true],[0,"\\n            "],[6,"td"],[9,"class","seq-cell copynumber-cell"],[7],[0,"\\n"],[4,"bootstrap-popover",null,[["title","dataContent","placement"],["",[19,2,["html"]],"right"]],{"statements":[[0,"                "],[1,[19,2,["copyNumber"]],false],[0,"\\n"]],"parameters":[]},null],[0,"            "],[8],[0,"\\n            "],[6,"td"],[9,"class","seq-cell abundance-cell"],[7],[0,"\\n              "],[1,[25,"format-percent",[[19,2,["percent"]]],null],false],[0,"%\\n            "],[8],[0,"\\n          "],[8],[0,"\\n"]],"parameters":[2,3]},null],[0,"          "],[6,"tr"],[7],[0,"\\n            "],[6,"td"],[10,"colspan",[26,[[18,"nCols"]]]],[7],[0,"\\n\\t    "],[8],[0,"\\n          "],[8],[0,"\\n"]],"parameters":[1]},null],[0,"    "],[8],[0,"\\n  "],[8],[0,"\\n"],[8],[0,"\\n"]],"hasEval":false}',meta:{moduleName:"flea-app/pods/components/sequence-viewer/template.hbs"}})}),define("flea-app/pods/components/timeseries-plot/component",["exports","flea-app/utils/utils","flea-app/mixins/d3-plot-mixin","flea-app/mixins/width-height-mixin","ember-decorators/object"],function(e,t,n,r,o){function i(e,t,n,r,o){var i={}
return Object.keys(r).forEach(function(e){i[e]=r[e]}),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=n.slice().reverse().reduce(function(n,r){return r(e,t,n)||n},i),o&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(o):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i}Object.defineProperty(e,"__esModule",{value:!0})
var a,s,l,c,u,d,p,f,m,g,b,h,v=Ember.run.once
e.default=Ember.Component.extend(n.default,r.default,(a=(0,o.computed)("data","data2"),s=(0,o.computed)("data.[]"),l=(0,o.computed)("dates.[]"),c=(0,o.computed)("xDomain","innerWidth"),u=(0,o.computed)("data.[]","ymin","innerHeight"),d=(0,o.computed)("data2.[]","ymin","innerHeight"),p=(0,o.computed)("xScale","yScale","interpolation"),f=(0,o.computed)("xScale","yScale2","interpolation"),m=(0,o.computed)("tickMap"),g=(0,o.computed)("userColors","seriesNames"),b=(0,o.observes)("data.[]","data2.[]","d3Line","d3Line2","xScale","yScale","yScale2"),h={interpolation:"linear",ymin:null,data:[],data2:[],userColors:null,tickMap:{},margins:{top:20,right:50,bottom:60,left:50},seriesNames:function(e,t){var n=e.map(function(e){return e.name}),r=t.map(function(e){return e.name})
return n.concat(r)},dates:function(e){var t=e.map(function(e){return e.values.map(function(e){return e.x})})
return t=d3.set(d3.merge(t)).values(),t=t.map(function(e){return new Date(e)})},xDomain:function(e){return d3.extent(e)},xScale:function(e,t){return e=e.map(function(e){return new Date(e)}),d3.time.scale().domain(e).range([0,t])},_yScale:function(e,t,n){var r=d3.max(e,function(e){return d3.max(e.values,function(e){return e.y})})
return null===t&&(t=d3.min(e,function(e){return d3.min(e.values,function(e){return e.y})})),t===r&&(r+=1,t=Math.max(0,t-1)),d3.scale.linear().range([n,0]).domain([t,r])},yScale:function(e,t,n){return this._yScale(e,t,n)},yScale2:function(e,t,n){return this._yScale(e,t,n)},d3Line:function(e,t,n){return d3.svg.line().x(function(t){return e(t.x)}).y(function(e){return t(e.y)}).interpolate(n)},d3Line2:function(e,t,n){return d3.svg.line().x(function(t){return e(t.x)}).y(function(e){return t(e.y)}).interpolate(n)},xAxisFormat:function(e){return function(n){return(0,t.mapIfPresent)(e,n)}},xTickValues:Ember.computed.alias("dates"),yAxisFormat:d3.format(".00"),seriesColors:function(e,t){return null!==e?e:((e=t.length<=10?d3.scale.category10():d3.scale.category20()).domain(t),e)},_updateData:function(e,t,n){var r=d3.select("#"+this.get("elementId")).select(".inner"),o=this.get("seriesColors"),i=r.select(n).selectAll("path").data(e,function(e){return e.name})
i.enter().append("path").attr("class","timeseries_line"),i.attr("d",function(e){return t(e.values)}).style("stroke",function(e){return o(e.name)}),i.exit().remove()},_updateChart:function(){this._updateData(this.get("data"),this.get("d3Line"),".lines"),this._updateData(this.get("data2"),this.get("d3Line2"),".lines2")},onChartChange:function(){"inDOM"===this._state&&v(this,"_updateChart")}},i(h,"seriesNames",[a],Object.getOwnPropertyDescriptor(h,"seriesNames"),h),i(h,"dates",[s],Object.getOwnPropertyDescriptor(h,"dates"),h),i(h,"xDomain",[l],Object.getOwnPropertyDescriptor(h,"xDomain"),h),i(h,"xScale",[c],Object.getOwnPropertyDescriptor(h,"xScale"),h),i(h,"yScale",[u],Object.getOwnPropertyDescriptor(h,"yScale"),h),i(h,"yScale2",[d],Object.getOwnPropertyDescriptor(h,"yScale2"),h),i(h,"d3Line",[p],Object.getOwnPropertyDescriptor(h,"d3Line"),h),i(h,"d3Line2",[f],Object.getOwnPropertyDescriptor(h,"d3Line2"),h),i(h,"xAxisFormat",[m],Object.getOwnPropertyDescriptor(h,"xAxisFormat"),h),i(h,"seriesColors",[g],Object.getOwnPropertyDescriptor(h,"seriesColors"),h),i(h,"onChartChange",[b],Object.getOwnPropertyDescriptor(h,"onChartChange"),h),h))}),define("flea-app/pods/components/timeseries-plot/template",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.HTMLBars.template({id:"eYAHsxHc",block:'{"symbols":[],"statements":[[6,"g"],[10,"transform",[26,[[18,"innerGroupTransform"]]]],[9,"class","inner"],[7],[0,"\\n\\n  "],[1,[25,"graph-axis",null,[["class","transform","scale","tickFormat","tickValues","tickSize","tickPadding","rotate"],["x axis",[19,0,["xAxisTransform"]],[19,0,["xScale"]],[19,0,["xAxisFormat"]],[19,0,["xTickValues"]],12,3,45]]],false],[0,"\\n\\n  "],[1,[25,"graph-axis",null,[["class","orient","scale","tickFormat"],["y axis","left",[19,0,["yScale"]],[19,0,["yAxisFormat"]]]]],false],[0,"\\n\\n"],[4,"if",[[19,0,["data2"]]],null,{"statements":[[0,"    "],[1,[25,"graph-axis",null,[["class","transform","orient","scale","tickFormat"],["y axis",[19,0,["yAxisTransform"]],"right",[19,0,["yScale2"]],[19,0,["yAxisFormat"]]]]],false],[0,"\\n"]],"parameters":[]},null],[0,"\\n  "],[6,"g"],[9,"class","lines"],[7],[8],[0,"\\n  "],[6,"g"],[9,"class","lines2"],[7],[8],[0,"\\n\\n  "],[1,[25,"d3-legend",null,[["legendLabels","legendColors"],[[19,0,["seriesNames"]],[19,0,["seriesColors"]]]]],false],[0,"\\n"],[8],[0,"\\n"]],"hasEval":false}',meta:{moduleName:"flea-app/pods/components/timeseries-plot/template.hbs"}})}),define("flea-app/pods/session/controller",["exports","flea-app/config/environment","ember-decorators/object"],function(e,t,n){Object.defineProperty(e,"__esModule",{value:!0})
var r,o
e.default=Ember.Controller.extend((r=(0,n.computed)("model.session_id"),o={fleaMode:t.default.fleaMode,downloadURL:function(e){return t.default.apiURL+"zips/"+e+".zip"}},function(e,t,n,r,o){var i={}
Object.keys(r).forEach(function(e){i[e]=r[e]}),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=n.slice().reverse().reduce(function(n,r){return r(e,t,n)||n},i),o&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(o):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null)}(o,"downloadURL",[r],Object.getOwnPropertyDescriptor(o,"downloadURL"),o),o))}),define("flea-app/pods/session/error/template",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.HTMLBars.template({id:"95o3XRcQ",block:'{"symbols":[],"statements":[[6,"div"],[9,"class","error-pane"],[7],[0,"\\n  "],[6,"div"],[9,"class","error-title"],[7],[0,"\\n    Something went wrong.\\n  "],[8],[0,"\\n  "],[6,"div"],[9,"class","error-message"],[7],[0,"\\n    This message will be more informative in the future. Maybe some data is missing?\\n  "],[8],[0,"\\n"],[8],[0,"\\n"]],"hasEval":false}',meta:{moduleName:"flea-app/pods/session/error/template.hbs"}})}),define("flea-app/pods/session/index/route",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.Route.extend({redirect:function(){this.transitionTo("session.mds")}})}),define("flea-app/pods/session/loading/template",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.HTMLBars.template({id:"FDEnNJQ7",block:'{"symbols":[],"statements":[[6,"div"],[9,"class","loading-pane"],[7],[0,"\\n  "],[6,"div"],[9,"class","loading-message"],[7],[0,"\\n    Fetching data from server\\n  "],[8],[0,"\\n\\n  "],[6,"div"],[9,"class","spinner"],[7],[0,"\\n    "],[6,"div"],[9,"class","rect1"],[7],[8],[0,"\\n    "],[6,"div"],[9,"class","rect2"],[7],[8],[0,"\\n    "],[6,"div"],[9,"class","rect3"],[7],[8],[0,"\\n    "],[6,"div"],[9,"class","rect4"],[7],[8],[0,"\\n    "],[6,"div"],[9,"class","rect5"],[7],[8],[0,"\\n  "],[8],[0,"\\n"],[8],[0,"\\n"]],"hasEval":false}',meta:{moduleName:"flea-app/pods/session/loading/template.hbs"}})}),define("flea-app/pods/session/mds/controller",["exports","ember-decorators/object","ember-awesome-macros","flea-app/mixins/color-label-mixin"],function(e,t,n,r){Object.defineProperty(e,"__esModule",{value:!0})
var o,i
e.default=Ember.Controller.extend(r.default,(o=(0,t.computed)("pattern"),i={pattern:"",colorByMotif:!1,selectedColorMap:(0,n.conditional)("colorByMotif","seqNameToMotifColor","seqNameToTimePointColor"),highlightedNodes:function(e){if(!e)return[]
for(var t=e.split(/[ ,]+/).filter(Boolean),n=this.get("model.sequences.observed"),r=[],o=0;o<n.length;o++)for(var i=0;i<t.length;i++)n[o].name.search(t[i])>=0&&r.push(n[o].name)
return new Set(r)}},function(e,t,n,r,o){var i={}
Object.keys(r).forEach(function(e){i[e]=r[e]}),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=n.slice().reverse().reduce(function(n,r){return r(e,t,n)||n},i),o&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(o):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null)}(i,"highlightedNodes",[o],Object.getOwnPropertyDescriptor(i,"highlightedNodes"),i),i))}),define("flea-app/pods/session/mds/route",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.Route.extend({model:function(){var e=this.modelFor("session").session_id
return this.store.find("session",e)}})}),define("flea-app/pods/session/mds/template",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.HTMLBars.template({id:"QkZGCeS1",block:'{"symbols":[],"statements":[[6,"div"],[9,"class","row"],[7],[0,"\\n  "],[6,"div"],[9,"class","col-md-12 pull-right"],[7],[0,"\\n    "],[6,"div"],[9,"class","input-group input-group-sm"],[7],[0,"\\n      "],[1,[25,"input",null,[["type","class","id","value","placeholder","autofocus"],["text",[25,"concat",["form-control mds-input"," ",[25,"if",[[19,0,["patternClass"]],[25,"-normalize-class",["patternClass",[19,0,["patternClass"]]],null]],null]," "],null],"mds-input",[19,0,["pattern"]],"Names to highlight","autofocus"]]],false],[0,"\\n      "],[6,"span"],[9,"class","input-group-addon"],[9,"id","mds-interpolate"],[9,"title","Interpolate colors by date"],[7],[0,"\\n        Interpolate colors\\n        "],[1,[25,"input",null,[["type","checked"],["checkbox",[19,0,["rankColors"]]]]],false],[0,"\\n      "],[8],[0,"\\n      "],[6,"span"],[9,"class","input-group-addon"],[9,"id","mds-motif"],[9,"title","Color by motif"],[7],[0,"\\n        Color by motif\\n        "],[1,[25,"input",null,[["type","checked"],["checkbox",[19,0,["colorByMotif"]]]]],false],[0,"\\n      "],[8],[0,"\\n\\n    "],[8],[0,"\\n  "],[8],[0,"\\n"],[8],[0,"\\n\\n"],[6,"div"],[9,"class","row"],[7],[0,"\\n  "],[6,"div"],[9,"class","col-md-12"],[9,"id","_mds_viewer"],[7],[0,"\\n    "],[1,[25,"mds-viewer",null,[["data","nameToNodeLabel","nameToNodeColor","nameToMotifColor","nameToMotif","legendLabels","legendColors","highlightedNodes"],[[19,0,["model","sequences","observed"]],[19,0,["seqNameToNodeName"]],[19,0,["selectedColorMap"]],[19,0,["seqNameToMotifColor"]],[19,0,["model","sequences","nameToMotif"]],[19,0,["sortedVisitCodes"]],[19,0,["colorScaleVisitCode"]],[19,0,["highlightedNodes"]]]]],false],[0,"\\n  "],[8],[0,"\\n"],[8],[0,"\\n"]],"hasEval":false}',meta:{moduleName:"flea-app/pods/session/mds/template.hbs"}})}),define("flea-app/pods/session/protein/controller",["exports","ember-decorators/object","ember-awesome-macros","ember-macro-helpers/raw","flea-app/config/environment","flea-app/utils/utils"],function(e,t,n,r,o,i){function a(e,t,n,r,o){var i={}
return Object.keys(r).forEach(function(e){i[e]=r[e]}),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=n.slice().reverse().reduce(function(n,r){return r(e,t,n)||n},i),o&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(o):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i}Object.defineProperty(e,"__esModule",{value:!0})
var s,l,c,u,d,p,f,m,g,b,h,v,y,O,P
e.default=Ember.Controller.extend((s=(0,t.computed)("application.rootURL","application.currentPath","session.session_id"),l=(0,t.computed)("model.proteinMetrics.data.[]"),c=(0,t.computed)("model.proteinMetrics.data.[]","selectedMetricName"),u=(0,t.computed)("selectedMetric"),d=(0,t.computed)("selectedMetric","timepoints"),p=(0,t.computed)("selectedMetric","timepoints"),f=(0,t.computed)("data1","data2"),m=(0,t.computed)("structureData","selectedTimepointIdx","model.coordinates.refToFirstAlnCoords"),g=(0,t.computed)("structureData"),b=(0,t.computed)("model.sequences.selectedPositions","model.coordinates.alnToRefCoords"),h=(0,t.computed)("model.dates.sortedDates"),v=(0,t.computed)("model.dates.sortedVisitCodes"),y=(0,t.computed)("model.proteinMetrics.positiveSelection","timepoints","markPositive"),O=(0,t.computed)("timepointNames.length"),P={showMarkPositive:o.default.fleaMode,markPositive:!0,labelCoordinates:!1,selectedTimepointIdx:0,selectedMetricName:"JS divergence",application:Ember.inject.controller(),session:Ember.inject.controller(),currentPath:function(e,t,n){return t=t.replace("session",n).replace(".","/"),e+t},metricNames:function(e){var t=R.pluck("name",e.single),n=R.pluck("name",e.paired)
return R.concat(t,n)},selectedMetric:function(e,t){var n=e.single,r=e.paired,o=R.find(function(e){return e.name===t},n)
return o||((o=R.find(function(e){return e.name===t},r))||{})},plotLabels:function(e){return e.paired?R.pluck("name",e.data):[e.name]},data1:function(e,t){var n=[]
n=e.paired?e.data[0].data:e.data
var r=R.map(function(e){return R.find(function(t){return(0,i.maybe_parse_date)(t.date).toString()===e.toString()},n)},t)
return R.pluck("values",r)},data2:function(e,t){if(e.paired){var n=e.data[1].data,r=R.map(function(e){return R.find(function(t){return(0,i.maybe_parse_date)(t.date).toString()===e.toString()},n)},t)
return R.pluck("values",r)}return{}},structureData:function(e,t){if(t.length>0){var n=function(e,t){return Math.log(e)-Math.log(t)},r=R.zipWith(n)
return R.zipWith(r,e,t)}return e},selectedStructureData:function(e,t,n){var r=e[t]
return r?R.map(function(e){return r[e]||0},n):null},structureDataRange:function(e){var t=d3.min(e,function(e){return d3.min(e)}),n=d3.max(e,function(e){return d3.max(e)})
if(t<0&&n>0){var r=Math.max(Math.abs(t),n)
t=-r,n=r}return[t,n]},selectedReferencePositions:function(e,t){var n=R.map(function(e){return t[e]},e)
return R.uniq(n)},timepoints:function(e){return(e=R.map(R.identity,e)).unshift("Combined"),e},timepointNames:function(e){return(e=R.map(R.identity,e)).unshift("Combined"),e},selectedTimepointName:n.array.objectAt("timepointNames","selectedTimepointIdx"),positiveSelectionPositions:function(e,t,n){return!n||R.isEmpty(e)?R.map(function(e){return[]},t):R.map(function(t){return e[t]},t)},ticks:function(e){return R.range(0,e)}},a(P,"currentPath",[s],Object.getOwnPropertyDescriptor(P,"currentPath"),P),a(P,"metricNames",[l],Object.getOwnPropertyDescriptor(P,"metricNames"),P),a(P,"selectedMetric",[c],Object.getOwnPropertyDescriptor(P,"selectedMetric"),P),a(P,"plotLabels",[u],Object.getOwnPropertyDescriptor(P,"plotLabels"),P),a(P,"data1",[d],Object.getOwnPropertyDescriptor(P,"data1"),P),a(P,"data2",[p],Object.getOwnPropertyDescriptor(P,"data2"),P),a(P,"structureData",[f],Object.getOwnPropertyDescriptor(P,"structureData"),P),a(P,"selectedStructureData",[m],Object.getOwnPropertyDescriptor(P,"selectedStructureData"),P),a(P,"structureDataRange",[g],Object.getOwnPropertyDescriptor(P,"structureDataRange"),P),a(P,"selectedReferencePositions",[b],Object.getOwnPropertyDescriptor(P,"selectedReferencePositions"),P),a(P,"timepoints",[h],Object.getOwnPropertyDescriptor(P,"timepoints"),P),a(P,"timepointNames",[v],Object.getOwnPropertyDescriptor(P,"timepointNames"),P),a(P,"positiveSelectionPositions",[y],Object.getOwnPropertyDescriptor(P,"positiveSelectionPositions"),P),a(P,"ticks",[O],Object.getOwnPropertyDescriptor(P,"ticks"),P),P))}),define("flea-app/pods/session/protein/route",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.Route.extend({model:function(){var e=this.modelFor("session").session_id
return this.store.find("session",e)}})}),define("flea-app/pods/session/protein/template",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.HTMLBars.template({id:"0k7FG/Sa",block:'{"symbols":["metric"],"statements":[[6,"div"],[9,"class","row"],[7],[0,"\\n  "],[6,"div"],[9,"class","col-sm-12"],[7],[0,"\\n    "],[6,"div"],[9,"class","pv-viewer"],[7],[0,"\\n"],[4,"if",[[19,0,["selectedTimepointName"]]],null,{"statements":[[0,"\\t"],[6,"span"],[9,"class","pv-title"],[7],[1,[18,"selectedTimepointName"],false],[8],[0,"\\n"]],"parameters":[]},null],[0,"      "],[1,[25,"pv-wrapper",null,[["structure","data","range","selectedPositions","shouldLabelCoordinates"],[[19,0,["model","pdb"]],[19,0,["selectedStructureData"]],[19,0,["structureDataRange"]],[19,0,["selectedReferencePositions"]],[19,0,["labelCoordinates"]]]]],false],[0,"\\n    "],[8],[0,"\\n  "],[8],[0,"\\n"],[8],[0,"\\n\\n"],[6,"div"],[9,"class","row"],[7],[0,"\\n  "],[6,"div"],[9,"class","form-horizontal control-group timepoint-slider"],[7],[0,"\\n    "],[6,"div"],[9,"class","col-sm-3 timepoint-label"],[7],[0,"\\n      "],[6,"output"],[7],[0,"Select time point:"],[8],[0,"\\n    "],[8],[0,"\\n    "],[6,"div"],[9,"class","col-sm-6"],[7],[0,"\\n      "],[1,[25,"ui-slider",null,[["defaultValue","value","ticks","ticksLabels","step","tooltip","min","max","focus","naturalArrowKeys","immediateResponse"],[0,[19,0,["selectedTimepointIdx"]],[19,0,["ticks"]],[19,0,["timepointNames"]],1,"hide",0,[19,0,["ticks","length"]],true,true,true]]],false],[0,"\\n    "],[8],[0,"\\n    "],[6,"div"],[9,"class","col-sm-3"],[7],[0,"\\n    "],[8],[0,"\\n  "],[8],[0,"\\n"],[8],[0,"\\n\\n"],[6,"div"],[9,"class","row"],[7],[0,"\\n  "],[6,"div"],[9,"class","col-sm-1"],[7],[0,"\\n  "],[8],[0,"\\n  "],[6,"div"],[9,"class","col-sm-10"],[7],[0,"\\n    "],[6,"div"],[9,"class","input-group input-group-sm"],[7],[0,"\\n      "],[6,"span"],[9,"class","input-group-addon"],[7],[0,"\\n        "],[6,"label"],[9,"for","protein_regions"],[7],[0,"Metric to plot"],[8],[0,"\\n"],[4,"power-select",null,[["options","selected","placeholder","onchange"],[[19,0,["metricNames"]],[19,0,["selectedMetricName"]],"Select metric",[25,"action",[[19,0,[]],[25,"mut",[[19,0,["selectedMetricName"]]],null]],null]]],{"statements":[[0,"\\t  "],[1,[19,1,[]],false],[0,"\\n"]],"parameters":[1]},null],[0,"      "],[8],[0,"\\n      "],[6,"span"],[9,"class","input-group-addon"],[7],[0,"\\n\\t"],[6,"label"],[7],[0,"Label coordinates"],[8],[0,"\\n\\t"],[1,[25,"input",null,[["type","name","checked"],["checkbox","labelCoordinates",[19,0,["labelCoordinates"]]]]],false],[0,"\\n      "],[8],[0,"\\n"],[4,"if",[[19,0,["showMarkPositive"]]],null,{"statements":[[0,"\\t"],[6,"span"],[9,"class","input-group-addon"],[7],[0,"\\n          "],[6,"label"],[7],[0,"Mark positively selected sites"],[8],[0,"\\n          "],[1,[25,"input",null,[["type","name","checked"],["checkbox","markPositive",[19,0,["markPositive"]]]]],false],[0,"\\n\\t"],[8],[0,"\\n"]],"parameters":[]},null],[0,"    "],[8],[0,"\\n  "],[8],[0,"\\n  "],[6,"div"],[9,"class","col-sm-1"],[7],[0,"\\n  "],[8],[0,"\\n"],[8],[0,"\\n\\n"],[6,"div"],[9,"class","row"],[7],[0,"\\n  "],[6,"div"],[9,"class","col-sm-12"],[9,"id","_protein_plots"],[7],[0,"\\n    "],[1,[25,"protein-plots",null,[["names","data1","data2","selectedPositions","labels","url","alnToRefCoords","refToFirstAlnCoords"],[[19,0,["timepointNames"]],[19,0,["data1"]],[19,0,["data2"]],[19,0,["positiveSelectionPositions"]],[19,0,["plotLabels"]],[19,0,["currentPath"]],[19,0,["model","coordinates","alnToRefCoords"]],[19,0,["model","coordinates","refToFirstAlnCoords"]]]]],false],[0,"\\n  "],[8],[0,"\\n"],[8],[0,"\\n"]],"hasEval":false}',meta:{moduleName:"flea-app/pods/session/protein/template.hbs"}})}),define("flea-app/pods/session/route",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.Route.extend({model:function(e){return Ember.RSVP.hash({session_id:e.session_id})}})}),define("flea-app/pods/session/sequences/controller",["exports","ember-decorators/object","ember-awesome-macros","ember-macro-helpers/raw","flea-app/config/environment","flea-app/mixins/color-label-mixin","flea-app/utils/utils","flea-app/utils/parser"],function(e,t,n,r,o,i,a,s){function l(e,t,n,r,o){var i={}
return Object.keys(r).forEach(function(e){i[e]=r[e]}),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=n.slice().reverse().reduce(function(n,r){return r(e,t,n)||n},i),o&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(o):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i}function c(e){for(var t=0;t<e.length;t++){for(var n=e[t].sequences,r=0,o=0;o<n.length;o++)r+=n[o].copyNumber
for(var i=0;i<n.length;i++)n[i].percent=100*n[i].copyNumber/r}return e}function u(e,t){for(var n=0;n<e.length;n++){var r=e[n].sequences.filter(function(e){return e.percent>=t})
e[n].sequences=r}return e}function d(e){var t=R.groupBy(function(e){return e.sequence},e),n=[],r=!0,o=!1,i=void 0
try{for(var a,s=Object.keys(t)[Symbol.iterator]();!(r=(a=s.next()).done);r=!0){for(var l=t[a.value],c=[],u=0,d=0;d<l.length;d++)c.push(l[d].names[0]),u+=l[d].copyNumber
n.push({sequence:l[0].sequence,names:c,copyNumber:u})}}catch(e){o=!0,i=e}finally{try{!r&&s.return&&s.return()}finally{if(o)throw i}}return n}function p(e){for(var t=0;t<e.length;t++)for(var n=e[t].sequences,r=0;r<n.length;r++)n[r].html=(0,a.htmlTable1D)(n[r].names,["Sequence ID"])
return e}function f(e,t,n){for(var r=0;r<e.length;r++)for(var o=e[r].sequences,i=function(e){for(var r=o[e],i=(0,a.regexRanges)(t,r.sequence),s=new Set,l=0;l<i.length;l++)for(var c=i[l],u=c[0];u<=c[1];u++)s.add(u)
var d=r.sequence.split("").map(function(e,t){var r=s.has(t)
return m(e,n[t],r)})
r.htmlRow=d.join("")},s=0;s<o.length;s++)i(s)
return e}function m(e,t,n){var r="|"===(e=e.toUpperCase())?"seperator":"-"===e?"aa aaGap":"aa aa"+e
return n&&(r+=" pngs"),e=e===t&&"-"!==e?".":e,Ember.String.htmlSafe('<td class="'+r+'">'+e+"</td>")}Object.defineProperty(e,"__esModule",{value:!0})
var g,b,h,v,y,O,P,x,w,j,_,T,M,C,D=function(){function e(e,t){var n=[],r=!0,o=!1,i=void 0
try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{!r&&s.return&&s.return()}finally{if(o)throw i}}return n}return function(t,n){if(Array.isArray(t))return t
if(Symbol.iterator in Object(t))return e(t,n)
throw new TypeError("Invalid attempt to destructure non-iterable instance")}}()
e.default=Ember.Controller.extend(i.default,(g=(0,t.computed)("pattern"),b=(0,t.computed)("model.coordinates.alnToRefCoords.length"),h=(0,t.computed)("model.sequences.mrca","alnRanges"),v=(0,t.computed)("model.sequences.reference","model.coordinates.alnToRefCoords"),y=(0,t.computed)("alignedReference","alnRanges"),O=(0,t.computed)("model.sequences.observed.[]","model.dates.dateToName","alnRanges","mrcaSlice","regex","threshold"),P=(0,t.computed)("ranges"),x=(0,t.computed)("ranges","model.coordinates.refToFirstAlnCoords","model.coordinates.refToLastAlnCoords"),w=(0,t.computed)("model.sequences.observed.[]","model.sequences.nameToMotif.[]"),j=(0,t.computed)("aaTrajectories","maxMotifs"),_=(0,t.computed)("cappedTrajectories","_oldKeys","colorScaleMotif","model.dates.sortedVisitCodes","chartType"),T=(0,t.computed)("model.dates.sortedVisitCodes"),M=(0,t.computed)("model.predefinedRegions","model.coordinates.refRange"),C={ranges:[[159,200]],_pattern:"N[^P][ST]",pattern:"N[^P][ST]",patternDefault:"N[^P][ST]",_regex:"",patternClass:"input-valid",_threshold:1,threshold:1,showMarkPositive:o.default.fleaMode,markPositive:!0,defaultMaxMotifs:10,_maxMotifs:10,maxMotifs:10,barChart:!1,chartType:(0,n.conditional)("barChart",(0,r.default)("bar"),(0,r.default)("spline")),_oldKeys:[],regex:function(e){if(this.set("patternClass","input-valid"),0===e.length)return".^"
try{for(var t=[],n=s.default.parse(e),r=0;r<n.length;r++){var o=n[r]
if("amino"===o.type)t.push(o.value+o.postmod)
else{var i=o.value
"^"===o.premod&&(i+="\\|\\-"),t.push("["+o.premod+i+"]"+o.postmod)}}t=t.join("-*"),new RegExp(t,"g"),this.set("_regex",t)}catch(e){this.set("patternClass","input-invalid")}return this.get("_regex")},validAlnRange:function(e){return[0,e]},toSlices:function(e,t){return t.map(function(t){return e.slice(t[0],t[1])}).join("|")},mrcaSlice:function(e,t){return this.toSlices(e.sequence,t)},alignedReference:function(e,t){for(var n=e.get("sequence"),r=[],o=0;o<t.length;o++)t[o]&&t[o]===t[o-1]?r.push("-"):r.push(n[o])
return r.join("")},refSlice:function(e,t){return 0===e.length?"":this.toSlices(e,t)},mrcaSplit:n.string.split("mrcaSlice",(0,r.default)("")),refSplit:n.string.split("refSlice",(0,r.default)("")),groupedSequences:function(e,t,n,r,o,i){var s=this,l=[],m=R.groupBy(function(e){return e.get("date")},e),g=!0,b=!1,h=void 0
try{for(var v,y=Object.keys(m)[Symbol.iterator]();!(g=(v=y.next()).done);g=!0){var O=v.value,P=m[O].map(function(e){return{sequence:s.toSlices(e.sequence,n),copyNumber:e.copynumber,names:[e.name]}});(P=d(P)).sort(function(e,t){return t.copyNumber-e.copyNumber})
var x=new Date(O)
l.push({date:x,label:(0,a.mapIfPresent)(t,x),sequences:P})}}catch(e){b=!0,h=e}finally{try{!g&&y.return&&y.return()}finally{if(b)throw h}}return l.sort(function(e,t){return e.date-t.date}),l.forEach(function(e){e.date=(0,a.format_date)(e.date)}),l=c(l),l=u(l,i),l=p(l),l=f(l,o,r)},sortedRanges:function(e){return e.sort(function(e,t){return e[0]-t[0]}),e},alnRanges:function(e,t,n){(0,a.checkRanges)(e,this.get("model.coordinates.refRange"))
var r=e.map(function(e){return[(0,a.transformIndex)(e[0],t,!1),(0,a.transformIndex)(e[1],n,!0)]})
return(0,a.checkRanges)(r,this.get("validAlnRange")),r},aaTrajectories:function(e,t){for(var n={},r={},o=0;o<e.length;o++){var i=e[o],a=t[i.get("name")],s=i.get("date"),l=i.get("copynumber")
n.hasOwnProperty(a)||(n[a]={}),n[a].hasOwnProperty(s)||(n[a][s]=0),n[a][s]+=l,r.hasOwnProperty(s)||(r[s]=0),r[s]+=l}var c=[],u=!0,d=!1,p=void 0
try{for(var f,m=Object.keys(n)[Symbol.iterator]();!(u=(f=m.next()).done);u=!0){var g=f.value,b=[],h=!0,v=!1,y=void 0
try{for(var O,P=Object.keys(r)[Symbol.iterator]();!(h=(O=P.next()).done);h=!0){var x=O.value,w=0
n[g].hasOwnProperty(x)&&(w=n[g][x]/r[x]),b.push({x:new Date(x),y:w})}}catch(e){v=!0,y=e}finally{try{!h&&P.return&&P.return()}finally{if(v)throw y}}c.push({name:g,values:b})}}catch(e){d=!0,p=e}finally{try{!u&&m.return&&m.return()}finally{if(d)throw p}}return c},cappedTrajectories:function(e,t){var n=R.reverse(R.sortBy(function(e){return R.sum(R.pluck("y",R.values(e.values)))},e))
if(n.length>t){var r=n.slice(0,t),o=R.map(function(e){return{x:e.x,y:0}},n[t].values)
n.slice(t).forEach(function(e){e.values.forEach(function(e){R.find(function(t){return t.x.getTime()===e.x.getTime()},o).y+=e.y})}),r.push({name:"Others",values:o}),n=r}return n},trajectoryData:function(e,t,n,r,o){var i=R.pluck("name",e)
this.set("_oldKeys",i)
var a=e.map(function(e){var t=e.values
t.sort(function(e,t){return e.x-t.x})
var n=t.map(function(e){return e.y})
return n.unshift(e.name),n}),s=R.zipObj(i,R.map(n,i)),l=["x"].concat(r)
a.push(l)
var c={x:"x",columns:a,unload:t,type:o,colors:s}
return"bar"===o&&(c.groups=[i]),c},trajectoryAxis:function(e){return{x:{type:"category",categories:e}}},transition:{duration:0},tooltip:{format:{value:d3.format(".4f")}},validPredefinedRegions:function(e,t){var n=D(t,2),r=n[0],o=n[1]
return e.filter(function(e){return e.start>=r&&e.stop<=o})},doPattern:function(){this.set("pattern",this.get("_pattern"))},doThreshold:function(){var e=this.get("_threshold")
""===e&&(e=0),(e=+e)>=0&&e<=100&&(this.set("_threshold",e),this.set("threshold",e))},doMaxMotifs:function(){var e=this.get("_maxMotifs")
""===e&&(e=this.get("defaultMaxMotifs")),(e=+e)>=1&&e<=100&&(this.set("_maxMotifs",e),this.set("maxMotifs",e))},resetPattern:function(){this.set("_pattern",this.get("patternDefault")),this.set("pattern",this.get("patternDefault"))},updateAlnRange:function(e,t){(0,a.checkRange)(t,this.get("validAlnRange"))
var n=this.get("model.coordinates.alnToRefCoords"),r=this.get("sortedRanges").slice(0)
r[e]=[(0,a.transformIndex)(t[0],n,!1),(0,a.transformIndex)(t[1],n,!0)],r.sort(function(e,t){return e[0]-t[0]}),this.set("ranges",r)},setRanges:function(e){(0,a.checkRanges)(e,this.get("model.coordinates.refRange")),this.set("ranges",e)},addRange:function(e){(0,a.checkRange)(e,this.get("model.coordinates.refRange"))
var t=this.get("sortedRanges").slice(0)
t.push(e),this.set("ranges",t)},rmRange:function(e){var t=this.get("sortedRanges")
this.set("ranges",t.filter(function(t,n){return n!==e}))},setSelectedPositions:function(e){var t=this.get("validAlnRange")[1]
e&&R.all(R.map(function(e){return e>=0&&e<t}),e)&&this.set("model.sequences.selectedPositions",e)}},l(C,"regex",[g],Object.getOwnPropertyDescriptor(C,"regex"),C),l(C,"validAlnRange",[b],Object.getOwnPropertyDescriptor(C,"validAlnRange"),C),l(C,"mrcaSlice",[h],Object.getOwnPropertyDescriptor(C,"mrcaSlice"),C),l(C,"alignedReference",[v],Object.getOwnPropertyDescriptor(C,"alignedReference"),C),l(C,"refSlice",[y],Object.getOwnPropertyDescriptor(C,"refSlice"),C),l(C,"groupedSequences",[O],Object.getOwnPropertyDescriptor(C,"groupedSequences"),C),l(C,"sortedRanges",[P],Object.getOwnPropertyDescriptor(C,"sortedRanges"),C),l(C,"alnRanges",[x],Object.getOwnPropertyDescriptor(C,"alnRanges"),C),l(C,"aaTrajectories",[w],Object.getOwnPropertyDescriptor(C,"aaTrajectories"),C),l(C,"cappedTrajectories",[j],Object.getOwnPropertyDescriptor(C,"cappedTrajectories"),C),l(C,"trajectoryData",[_],Object.getOwnPropertyDescriptor(C,"trajectoryData"),C),l(C,"trajectoryAxis",[T],Object.getOwnPropertyDescriptor(C,"trajectoryAxis"),C),l(C,"validPredefinedRegions",[M],Object.getOwnPropertyDescriptor(C,"validPredefinedRegions"),C),l(C,"doPattern",[t.action],Object.getOwnPropertyDescriptor(C,"doPattern"),C),l(C,"doThreshold",[t.action],Object.getOwnPropertyDescriptor(C,"doThreshold"),C),l(C,"doMaxMotifs",[t.action],Object.getOwnPropertyDescriptor(C,"doMaxMotifs"),C),l(C,"resetPattern",[t.action],Object.getOwnPropertyDescriptor(C,"resetPattern"),C),l(C,"updateAlnRange",[t.action],Object.getOwnPropertyDescriptor(C,"updateAlnRange"),C),l(C,"setRanges",[t.action],Object.getOwnPropertyDescriptor(C,"setRanges"),C),l(C,"addRange",[t.action],Object.getOwnPropertyDescriptor(C,"addRange"),C),l(C,"rmRange",[t.action],Object.getOwnPropertyDescriptor(C,"rmRange"),C),l(C,"setSelectedPositions",[t.action],Object.getOwnPropertyDescriptor(C,"setSelectedPositions"),C),C))}),define("flea-app/pods/session/sequences/route",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.Route.extend({model:function(){var e=this.modelFor("session").session_id
return this.store.find("session",e)}})})
define("flea-app/pods/session/sequences/template",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.HTMLBars.template({id:"Z54ajdPG",block:'{"symbols":[],"statements":[[6,"div"],[9,"class","row"],[7],[0,"\\n  "],[6,"div"],[9,"class","col-md-12"],[7],[0,"\\n    "],[6,"div"],[9,"class","input-group input-group-sm"],[7],[0,"\\n      "],[1,[25,"sequence-range-controls",null,[["ranges","validRange","predefinedRegions","setRanges"],[[19,0,["sortedRanges"]],[19,0,["model","coordinates","refRange"]],[19,0,["validPredefinedRegions"]],"setRanges"]]],false],[0,"\\n      "],[1,[25,"input",null,[["type","class","value","placeholder","autofocus","focus-out","insert-newline"],["text",[25,"concat",["form-control"," ",[25,"if",[[19,0,["patternClass"]],[25,"-normalize-class",["patternClass",[19,0,["patternClass"]]],null]],null]," "],null],[19,0,["_pattern"]],"Pattern to highlight","autofocus","doPattern","doPattern"]]],false],[0,"\\n      "],[6,"div"],[9,"class","input-group-btn"],[7],[0,"\\n        "],[6,"button"],[9,"type","button"],[9,"class","btn btn-default btn-sm"],[9,"title","Reset pattern"],[3,"action",[[19,0,[]],"resetPattern"]],[7],[0,"\\n          "],[6,"i"],[7],[6,"i"],[9,"class","fa fa-undo"],[9,"aria-hidden","true"],[7],[8],[8],[0,"\\n        "],[8],[0,"\\n      "],[8],[0,"\\n      "],[6,"span"],[9,"class","input-group-addon"],[7],[0,"Threshold %"],[8],[0,"\\n      "],[1,[25,"input",null,[["type","class","value","min","max","step","placeholder","autofocus","focus-out","insert-newline","size"],["number","form-control",[19,0,["_threshold"]],"0","100","0.01","%","autofocus","doThreshold","doThreshold","1"]]],false],[0,"\\n"],[4,"if",[[19,0,["showMarkPositive"]]],null,{"statements":[[0,"\\t"],[6,"span"],[9,"class","input-group-addon"],[7],[0,"\\n          Mark selected sites\\n          "],[1,[25,"input",null,[["type","name","checked"],["checkbox","markPositive",[19,0,["markPositive"]]]]],false],[0,"\\n\\t"],[8],[0,"\\n"]],"parameters":[]},null],[0,"      "],[6,"span"],[9,"class","input-group-addon"],[7],[0,"\\n        Bar chart\\n        "],[1,[25,"input",null,[["type","name","checked"],["checkbox","barChart",[19,0,["barChart"]]]]],false],[0,"\\n      "],[8],[0,"\\n      "],[6,"span"],[9,"class","input-group-addon"],[7],[0,"Motifs"],[8],[0,"\\n      "],[1,[25,"input",null,[["type","class","value","min","max","step","placeholder","autofocus","focus-out","insert-newline","size"],["number","form-control",[19,0,["_maxMotifs"]],"1","100","1","10","autofocus","doMaxMotifs","doMaxMotifs","1"]]],false],[0,"\\n    "],[8],[0,"\\n  "],[8],[0,"\\n"],[8],[0,"\\n"],[6,"br"],[7],[8],[0,"\\n"],[6,"div"],[9,"class","row"],[7],[0,"\\n  "],[6,"div"],[9,"class","col-md-12 trajectoryPlot"],[7],[0,"\\n"],[4,"if",[[19,0,["model","sequences","selectedPositions"]]],null,{"statements":[[0,"      "],[1,[25,"c3-chart",null,[["data","axis","transition","tooltip"],[[19,0,["trajectoryData"]],[19,0,["trajectoryAxis"]],[19,0,["transition"]],[19,0,["tooltip"]]]]],false],[0,"\\n"]],"parameters":[]},null],[0,"  "],[8],[0,"\\n"],[8],[0,"\\n\\n"],[6,"div"],[9,"class","row"],[7],[0,"\\n  "],[6,"div"],[9,"class","col-md-12"],[9,"id","_alignment_overview"],[7],[0,"\\n    "],[1,[25,"alignment-overview",null,[["alnRanges","validAlnRange","markPositive","positiveSelection","selectedPositions","predefinedRegions","alnToRefCoords","refToFirstAlnCoords","refToLastAlnCoords","updateRange","setRanges","addRange","rmRange"],[[19,0,["alnRanges"]],[19,0,["validAlnRange"]],[19,0,["markPositive"]],[19,0,["model","proteinMetrics","positiveSelection","Combined"]],[19,0,["model","sequences","selectedPositions"]],[19,0,["validPredefinedRegions"]],[19,0,["model","coordinates","alnToRefCoords"]],[19,0,["model","coordinates","refToFirstAlnCoords"]],[19,0,["model","coordinates","refToLastAlnCoords"]],"updateAlnRange","setRanges","addRange","rmRange"]]],false],[0,"\\n  "],[8],[0,"\\n"],[8],[0,"\\n\\n"],[6,"div"],[9,"class","row"],[7],[0,"\\n  "],[6,"div"],[9,"class","col-md-12"],[9,"id","_sequence_viewer"],[7],[0,"\\n    "],[1,[25,"sequence-viewer",null,[["groupedSequences","alnRanges","mrca","reference","selectedPositions","alnToRef","positiveSelection","regex","setSelectedPositions"],[[19,0,["groupedSequences"]],[19,0,["alnRanges"]],[19,0,["mrcaSplit"]],[19,0,["refSplit"]],[19,0,["model","sequences","selectedPositions"]],[19,0,["model","coordinates","alnToRefCoords"]],[19,0,["model","proteinMetrics","positiveSelection"]],[19,0,["regex"]],"setSelectedPositions"]]],false],[0,"\\n  "],[8],[0,"\\n"],[8],[0,"\\n"]],"hasEval":false}',meta:{moduleName:"flea-app/pods/session/sequences/template.hbs"}})}),define("flea-app/pods/session/template",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.HTMLBars.template({id:"YWKfae29",block:'{"symbols":[],"statements":[[6,"div"],[9,"class","container-fluid"],[9,"id","allofit"],[7],[0,"\\n  "],[6,"nav"],[9,"class","navbar navbar-default"],[9,"role","navigation"],[7],[0,"\\n    "],[6,"div"],[9,"class","navbar-header"],[7],[0,"\\n      "],[6,"button"],[9,"type","button"],[9,"class","navbar-toggle"],[9,"data-toggle","collapse"],[9,"data-target",".navbar-collapse"],[7],[0,"\\n\\t"],[6,"span"],[9,"class","icon-bar"],[7],[8],[0,"\\n\\t"],[6,"span"],[9,"class","icon-bar"],[7],[8],[0,"\\n\\t"],[6,"span"],[9,"class","icon-bar"],[7],[8],[0,"\\n      "],[8],[0,"\\n    "],[8],[0,"\\n    "],[6,"div"],[9,"class","navbar-collapse collapse"],[7],[0,"\\n      "],[6,"ul"],[9,"class","nav navbar-nav navbar-left"],[7],[0,"\\n"],[4,"if",[[19,0,["fleaMode"]]],null,{"statements":[[0,"\\t  "],[6,"li"],[7],[4,"link-to",["session.mds",[19,0,["model","session_id"]]],[["data-toggle"],["tab"]],{"statements":[[0,"MDS"]],"parameters":[]},null],[8],[0,"\\n\\t  "],[6,"li"],[7],[4,"link-to",["session.trajectory",[19,0,["model","session_id"]]],[["data-toggle"],["tab"]],{"statements":[[0,"Evolutionary trajectory"]],"parameters":[]},null],[8],[0,"\\n"]],"parameters":[]},null],[0,"\\t"],[6,"li"],[7],[4,"link-to",["session.protein",[19,0,["model","session_id"]]],[["data-toggle"],["tab"]],{"statements":[[0,"Protein"]],"parameters":[]},null],[8],[0,"\\n\\t"],[6,"li"],[7],[4,"link-to",["session.sequences",[19,0,["model","session_id"]]],[["data-toggle"],["tab"]],{"statements":[[0,"Sequences"]],"parameters":[]},null],[8],[0,"\\n"],[4,"if",[[19,0,["fleaMode"]]],null,{"statements":[[0,"\\t  "],[6,"li"],[7],[4,"link-to",["session.trees",[19,0,["model","session_id"]]],[["data-toggle"],["tab"]],{"statements":[[0,"Trees"]],"parameters":[]},null],[8],[0,"\\n"]],"parameters":[]},null],[0,"      "],[8],[0,"\\n      "],[6,"ul"],[9,"class","nav navbar-nav navbar-right"],[7],[0,"\\n\\t"],[6,"li"],[7],[0,"\\n\\t  "],[6,"p"],[9,"class","navbar-btn"],[7],[0,"\\n\\t    "],[6,"a"],[10,"href",[18,"downloadURL"],null],[9,"class","btn btn-default"],[7],[6,"i"],[9,"class","fa fa-download"],[9,"aria-hidden","true"],[7],[8],[0,"Download zip"],[8],[0,"\\n\\t  "],[8],[0,"\\n\\t"],[8],[0,"\\n      "],[8],[0,"\\n    "],[8],[0,"\\n  "],[8],[0,"\\n\\n  "],[1,[18,"outlet"],false],[0,"\\n\\n"],[8],[0,"\\n"]],"hasEval":false}',meta:{moduleName:"flea-app/pods/session/template.hbs"}})}),define("flea-app/pods/session/trajectory/controller",["exports","ember-decorators/object","flea-app/utils/utils"],function(e,t,n){function r(e,t,n,r,o){var i={}
return Object.keys(r).forEach(function(e){i[e]=r[e]}),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=n.slice().reverse().reduce(function(n,r){return r(e,t,n)||n},i),o&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(o):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i}Object.defineProperty(e,"__esModule",{value:!0})
var o,i,a,s,l,c,u,d,p,f,m,g,b,h,v
e.default=Ember.Controller.extend((o=(0,t.computed)("model.regionMetrics"),i=(0,t.computed)("model.regionMetrics"),a=(0,t.computed)("model.regionMetrics"),s=(0,t.computed)("selectedRegionNames.[]","selectedEvoNames.[]"),l=(0,t.computed)("selectedRegionNames.[]","selectedPhenoNames.[]"),c=(0,t.computed)("model.regionMetrics.[]","selectedRegionNamesForEvo.[]","selectedEvoNames.[]"),u=(0,t.computed)("model.regionMetrics.[]","selectedRegionNamesForPheno.[]","selectedPhenoNames.[]"),d=(0,t.computed)("model.regionMetrics.[]","selectedRegionNamesForPheno.[]","selectedPhenoNames.[]"),p=(0,t.computed)("selectedRegionNames.[]","selectedEvoNames.length"),f=(0,t.computed)("selectedRegionNames.[]","selectedPhenoNames.length"),m=(0,t.computed)("selectedPhenoNames.[]"),g=(0,t.computed)("selectedEvoMetrics.[]"),b=(0,t.computed)("selectedPhenoMetric1.[]","selectedPhenoMetric2.length"),h=(0,t.computed)("selectedPhenoMetric2.[]"),v={selectedRegionNames:["gp160"],selectedEvoNames:["dS divergence","dN divergence","Total divergence","Total diversity"],selectedPhenoNames:["Length","PNGS"],initialized:!1,regionNames:function(e){return R.uniq(R.pluck("name",e))},evoNames:function(e){return R.pluck("name",e[0].evo_metrics)},phenoNames:function(e){return R.pluck("name",e[0].pheno_metrics)},selectedMetrics:function(e,t,n,r){var o=R.filter(function(e){return R.contains(e.name,t)},e),i=R.map(function(e){var t={name:e.name,date:e.date}
return t[r]=R.filter(function(e){return R.contains(e.name,n)},e[r]),t},o)
return R.any(function(e){return 0===e[r].length},i)?[]:i},selectedRegionNamesForEvo:function(e,t){return t.length>1&&e.length>1?R.take(1,e):e},selectedRegionNamesForPheno:function(e,t){return t.length>1&&e.length>1?R.take(1,e):e},selectedEvoMetrics:function(e,t,n){return this.selectedMetrics(e,t,n,"evo_metrics")},selectedPhenoMetric1:function(e,t,n){return 0===n.length?[]:this.selectedMetrics(e,t,[n[0]],"pheno_metrics")},selectedPhenoMetric2:function(e,t,n){return n.length<2?[]:this.selectedMetrics(e,t,[n[1]],"pheno_metrics")},firstEvoRegion:function(e,t){return t>1&&e.length>1?e[0]:""},firstPhenoRegion:function(e,t){return t>1&&e.length>1?e[0]:""},excludedPhenoMetricNames:function(e){return R.drop(2,e)},getData:function(e,t,r){if(0===e.length)return[]
var o=R.flatten(R.map(function(e){return R.map(function(t){return{region:e.name,date:e.date,metric:t.name,value:t.value}},e[t])},e)),i=(R.uniq(R.pluck("name",e)),R.pipe(R.view(R.lensIndex(0)),R.prop(t),R.pluck("name"))),a=R.uniq(i(e)).length>1||r,s=a?R.prop("metric"):R.prop("region"),l=a?"metric":"region",c=R.groupBy(R.prop(l),o),u=R.mapObjIndexed(function(e,t){return{name:s(e[0]),values:R.map(function(e){return{x:(0,n.parse_date)(e.date),y:e.value}},e)}},c)
return R.values(u)},evoData:function(e){return this.getData(e,"evo_metrics",!1)},phenoData1:function(e,t){var n=t>1
return this.getData(e,"pheno_metrics",n)},phenoData2:function(e){return this.getData(e,"pheno_metrics",!0)}},r(v,"regionNames",[o],Object.getOwnPropertyDescriptor(v,"regionNames"),v),r(v,"evoNames",[i],Object.getOwnPropertyDescriptor(v,"evoNames"),v),r(v,"phenoNames",[a],Object.getOwnPropertyDescriptor(v,"phenoNames"),v),r(v,"selectedRegionNamesForEvo",[s],Object.getOwnPropertyDescriptor(v,"selectedRegionNamesForEvo"),v),r(v,"selectedRegionNamesForPheno",[l],Object.getOwnPropertyDescriptor(v,"selectedRegionNamesForPheno"),v),r(v,"selectedEvoMetrics",[c],Object.getOwnPropertyDescriptor(v,"selectedEvoMetrics"),v),r(v,"selectedPhenoMetric1",[u],Object.getOwnPropertyDescriptor(v,"selectedPhenoMetric1"),v),r(v,"selectedPhenoMetric2",[d],Object.getOwnPropertyDescriptor(v,"selectedPhenoMetric2"),v),r(v,"firstEvoRegion",[p],Object.getOwnPropertyDescriptor(v,"firstEvoRegion"),v),r(v,"firstPhenoRegion",[f],Object.getOwnPropertyDescriptor(v,"firstPhenoRegion"),v),r(v,"excludedPhenoMetricNames",[m],Object.getOwnPropertyDescriptor(v,"excludedPhenoMetricNames"),v),r(v,"evoData",[g],Object.getOwnPropertyDescriptor(v,"evoData"),v),r(v,"phenoData1",[b],Object.getOwnPropertyDescriptor(v,"phenoData1"),v),r(v,"phenoData2",[h],Object.getOwnPropertyDescriptor(v,"phenoData2"),v),v))}),define("flea-app/pods/session/trajectory/route",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.Route.extend({model:function(){var e=this.modelFor("session").session_id
return this.store.find("session",e)}})}),define("flea-app/pods/session/trajectory/template",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.HTMLBars.template({id:"zj2phDQ+",block:'{"symbols":["phenoMetric","evoMetric","region"],"statements":[[4,"if",[[19,0,["model","disabled"]]],null,{"statements":[[0,"  "],[6,"div"],[9,"class","error-pane"],[7],[0,"\\n    "],[6,"div"],[9,"class","error-title"],[7],[0,"\\n      Evolutionary data not available\\n    "],[8],[0,"\\n    "],[6,"div"],[9,"class","error-message"],[7],[0,"\\n      This analysis was disabled in the pipeline.\\n    "],[8],[0,"\\n  "],[8],[0,"\\n"]],"parameters":[]},{"statements":[[0,"  "],[6,"div"],[9,"class","form-inline"],[7],[0,"\\n    "],[6,"div"],[9,"class","form-group"],[7],[0,"\\n      "],[6,"label"],[9,"for","evo_regions"],[7],[0,"Region(s) to plot"],[8],[0,"\\n    "],[8],[0,"\\n    "],[6,"div"],[9,"class","form-group"],[7],[0,"\\n"],[4,"power-select-multiple",null,[["options","selected","searchPlaceholder","searchField","onchange","closeOnSelect"],[[19,0,["regionNames"]],[19,0,["selectedRegionNames"]],"Select region(s)","name",[25,"action",[[19,0,[]],[25,"mut",[[19,0,["selectedRegionNames"]]],null]],null],false]],{"statements":[[0,"\\t"],[1,[19,3,[]],false],[0,"\\n"]],"parameters":[3]},null],[0,"    "],[8],[0,"\\n\\n    "],[6,"div"],[9,"class","form-group"],[7],[0,"\\n      "],[6,"label"],[9,"for","evo_metrics"],[7],[0,"Evolutionary metrics"],[8],[0,"\\n    "],[8],[0,"\\n    "],[6,"div"],[9,"class","form-group"],[7],[0,"\\n"],[4,"power-select-multiple",null,[["options","selected","searchPlaceholder","searchField","onchange","closeOnSelect"],[[19,0,["evoNames"]],[19,0,["selectedEvoNames"]],"Select metric(s)","name",[25,"action",[[19,0,[]],[25,"mut",[[19,0,["selectedEvoNames"]]],null]],null],false]],{"statements":[[0,"\\t"],[1,[19,2,[]],false],[0,"\\n"]],"parameters":[2]},null],[0,"    "],[8],[0,"\\n\\n"],[4,"if",[[19,0,["firstEvoRegion"]]],null,{"statements":[[0,"      "],[6,"div"],[9,"class","form-group"],[7],[0,"\\n\\t"],[6,"label"],[9,"class","text-error"],[7],[0,"(Only showing "],[1,[18,"firstEvoRegion"],false],[0,")"],[8],[0,"\\n      "],[8],[0,"\\n"]],"parameters":[]},null],[0,"\\n  "],[8],[0,"\\n\\n  "],[6,"div"],[9,"class","row"],[7],[0,"\\n    "],[6,"div"],[9,"class","col-md-12"],[9,"id","_timeseries_plot"],[7],[0,"\\n      "],[1,[25,"timeseries-plot",null,[["data","ymin","tickMap"],[[19,0,["evoData"]],0,[19,0,["model","dates","dateToName"]]]]],false],[0,"\\n    "],[8],[0,"\\n  "],[8],[0,"\\n\\n  "],[6,"div"],[9,"class","form-inline"],[7],[0,"\\n    "],[6,"div"],[9,"class","form-group"],[7],[0,"\\n      "],[6,"label"],[9,"for","_pheno_metrics"],[7],[0,"Phenotype metrics"],[8],[0,"\\n    "],[8],[0,"\\n    "],[6,"div"],[9,"class","form-group"],[7],[0,"\\n"],[4,"power-select-multiple",null,[["options","selected","searchPlaceholder","searchField","onchange","closeOnSelect"],[[19,0,["phenoNames"]],[19,0,["selectedPhenoNames"]],"Select metric(s)","name",[25,"action",[[19,0,[]],[25,"mut",[[19,0,["selectedPhenoNames"]]],null]],null],false]],{"statements":[[0,"\\t"],[1,[19,1,[]],false],[0,"\\n"]],"parameters":[1]},null],[0,"    "],[8],[0,"\\n"],[4,"if",[[19,0,["firstPhenoRegion"]]],null,{"statements":[[0,"      "],[6,"div"],[9,"class","form-group"],[7],[0,"\\n\\t"],[6,"label"],[9,"class","text-error"],[7],[0,"(Only showing "],[1,[18,"firstPhenoRegion"],false],[0,")"],[8],[0,"\\n      "],[8],[0,"\\n"]],"parameters":[]},null],[4,"if",[[19,0,["excludedPhenoMetricNames"]]],null,{"statements":[[0,"      "],[6,"div"],[9,"class","form-group"],[7],[0,"\\n\\t"],[6,"label"],[9,"class","text-error"],[7],[0,"(Not showing "],[1,[18,"excludedPhenoMetricNames"],false],[0,")"],[8],[0,"\\n      "],[8],[0,"\\n"]],"parameters":[]},null],[0,"  "],[8],[0,"\\n\\n  "],[6,"div"],[9,"class","row"],[7],[0,"\\n    "],[6,"div"],[9,"class","col-md-12"],[9,"id","_timeseries_plot"],[7],[0,"\\n      "],[1,[25,"timeseries-plot",null,[["data","data2","tickMap"],[[19,0,["phenoData1"]],[19,0,["phenoData2"]],[19,0,["model","dates","dateToName"]]]]],false],[0,"\\n    "],[8],[0,"\\n  "],[8],[0,"\\n"]],"parameters":[]}]],"hasEval":false}',meta:{moduleName:"flea-app/pods/session/trajectory/template.hbs"}})}),define("flea-app/pods/session/trees/controller",["exports","flea-app/mixins/color-label-mixin","ember-decorators/object"],function(e,t,n){function r(e,t,n,r,o){var i={}
return Object.keys(r).forEach(function(e){i[e]=r[e]}),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=n.slice().reverse().reduce(function(n,r){return r(e,t,n)||n},i),o&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(o):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i}Object.defineProperty(e,"__esModule",{value:!0})
var o,i
e.default=Ember.Controller.extend(t.default,(o=(0,n.computed)("model.sequences.observed.[]"),i={showCopynumber:!0,overlapNodes:!0,radialLayout:!0,sortState:"ascending",heightScale:1,hideCopynumber:Ember.computed.not("showCopynumber"),seqNameToCopynumber:function(e){return R.zipObj(R.pluck("name",e),R.pluck("copynumber",e))},setSortState:function(e){this.set("sortState",e)}},r(i,"seqNameToCopynumber",[o],Object.getOwnPropertyDescriptor(i,"seqNameToCopynumber"),i),r(i,"setSortState",[n.action],Object.getOwnPropertyDescriptor(i,"setSortState"),i),i))}),define("flea-app/pods/session/trees/route",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.Route.extend({model:function(){var e=this.modelFor("session").session_id
return this.store.find("session",e)}})}),define("flea-app/pods/session/trees/template",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.HTMLBars.template({id:"Qx8Kc5By",block:'{"symbols":["nodeNameType"],"statements":[[6,"div"],[9,"class","row"],[7],[0,"\\n  "],[6,"div"],[9,"class","col-md-2"],[7],[0,"\\n    "],[6,"div"],[9,"class","btn-toolbar"],[9,"role","toolbar"],[7],[0,"\\n      "],[6,"div"],[9,"class","btn-group"],[7],[0,"\\n        "],[6,"button"],[9,"type","button"],[9,"class","btn btn-default btn-sm"],[9,"id","sort_ascending"],[9,"title","Sort deepest clades to the bottom"],[3,"action",[[19,0,[]],"setSortState","ascending"]],[7],[0,"\\n          "],[6,"i"],[7],[6,"i"],[9,"class","fa fa-sort-amount-asc"],[9,"aria-hidden","true"],[7],[8],[8],[0,"\\n        "],[8],[0,"\\n        "],[6,"button"],[9,"type","button"],[9,"class","btn btn-default btn-sm"],[9,"id","sort_descending"],[9,"title","Sort deepest clades to the top"],[3,"action",[[19,0,[]],"setSortState","descending"]],[7],[0,"\\n          "],[6,"i"],[7],[6,"i"],[9,"class","fa fa-sort-amount-desc"],[9,"aria-hidden","true"],[7],[8],[8],[0,"\\n        "],[8],[0,"\\n        "],[6,"button"],[9,"type","button"],[9,"class","btn btn-default btn-sm"],[9,"id","sort_original"],[9,"title","Restore original order"],[3,"action",[[19,0,[]],"setSortState","original"]],[7],[0,"\\n          "],[6,"i"],[7],[6,"i"],[9,"class","fa fa-sort"],[9,"aria-hidden","true"],[7],[8],[8],[0,"\\n        "],[8],[0,"\\n      "],[8],[0,"\\n    "],[8],[0,"\\n  "],[8],[0,"\\n  "],[6,"div"],[9,"class","col-md-3"],[7],[0,"\\n    "],[1,[25,"ui-slider",null,[["value","step","tooltip","min","max","focus","naturalArrowKeys","immediateResponse"],[[19,0,["heightScale"]],0.1,"hide",0,1,false,false,false]]],false],[0,"\\n  "],[8],[0,"\\n  "],[6,"div"],[9,"class","col-md-7 pull-right"],[7],[0,"\\n    "],[6,"div"],[9,"class","input-group input-group-sm"],[7],[0,"\\n      "],[6,"span"],[9,"class","input-group-addon"],[9,"title","Show copynumber"],[7],[0,"\\n        Show copynumber\\n        "],[1,[25,"input",null,[["type","checked"],["checkbox",[19,0,["showCopynumber"]]]]],false],[0,"\\n      "],[8],[0,"\\n      "],[6,"span"],[9,"class","input-group-addon"],[9,"title","Overlap nodes"],[7],[0,"\\n        Overlap nodes\\n        "],[1,[25,"input",null,[["type","checked","disabled"],["checkbox",[19,0,["overlapNodes"]],[19,0,["hideCopynumber"]]]]],false],[0,"\\n      "],[8],[0,"\\n      "],[6,"span"],[9,"class","input-group-addon"],[9,"title","Change to radial layout"],[7],[0,"\\n        Radial layout\\n        "],[1,[25,"input",null,[["type","checked"],["checkbox",[19,0,["radialLayout"]]]]],false],[0,"\\n      "],[8],[0,"\\n      "],[6,"span"],[9,"class","input-group-addon"],[9,"title","Interpolate colors by date"],[7],[0,"\\n        Interpolate colors\\n        "],[1,[25,"input",null,[["type","checked"],["checkbox",[19,0,["rankColors"]]]]],false],[0,"\\n      "],[8],[0,"\\n      "],[6,"span"],[9,"class","input-group-addon"],[7],[0,"\\n        Node names\\n      "],[8],[0,"\\n      "],[6,"span"],[9,"class","input-group-addon"],[7],[0,"\\n"],[4,"power-select",null,[["options","selected","placeholder","onchange"],[[19,0,["nodeNameTypes"]],[19,0,["nodeNameType"]],"Node label",[25,"action",[[19,0,[]],[25,"mut",[[19,0,["nodeNameType"]]],null]],null]]],{"statements":[[0,"\\t  "],[1,[19,1,[]],false],[0,"\\n"]],"parameters":[1]},null],[0,"      "],[8],[0,"\\n    "],[8],[0,"\\n  "],[8],[0,"\\n"],[8],[0,"\\n\\n"],[6,"div"],[9,"class","row"],[7],[0,"\\n  "],[6,"div"],[9,"class","col-md-12"],[9,"id","_tree_enclosure"],[7],[0,"\\n    "],[1,[25,"phylotree-widget",null,[["tree","copynumbers","sortState","do_copy_number","seqNameToNodeName","seqNameToTimePointColor","seqNameToMotifColor","seqNameToMotif","radialLayout","showCopynumber","overlapNodes","heightScale"],[[19,0,["model","tree"]],[19,0,["seqNameToCopynumber"]],[19,0,["sortState"]],true,[19,0,["seqNameToNodeName"]],[19,0,["seqNameToTimePointColor"]],[19,0,["seqNameToMotifColor"]],[19,0,["model","sequences","nameToMotif"]],[19,0,["radialLayout"]],[19,0,["showCopynumber"]],[19,0,["overlapNodes"]],[19,0,["heightScale"]]]]],false],[0,"\\n  "],[8],[0,"\\n"],[8],[0,"\\n"]],"hasEval":false}',meta:{moduleName:"flea-app/pods/session/trees/template.hbs"}})}),define("flea-app/pods/store/model",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0})
var t=Ember.getOwner,n={}
e.default=Ember.Object.extend({find:function(e,r){var o=r+e
return n[o]?n[o]:t(this).lookup("adapter:"+e).find(r).then(function(e){return n[o]=e,e})}})}),define("flea-app/resolver",["exports","ember-resolver"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=t.default}),define("flea-app/router",["exports","flea-app/config/environment"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0})
var n=Ember.Router.extend({location:t.default.locationType,rootURL:t.default.rootURL})
n.map(function(){this.route("session",{path:"/results/:session_id"},function(){t.default.fleaMode&&(this.route("mds",{path:"/mds"}),this.route("trajectory",{path:"/trajectory"}),this.route("trees",{path:"/trees"})),this.route("protein",{path:"/protein"}),this.route("sequences",{path:"/sequences"})})}),e.default=n}),define("flea-app/services/ajax",["exports","ember-ajax/services/ajax"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}})}),define("flea-app/services/resize",["exports","ember-resize/services/resize"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}})}),define("flea-app/services/text-measurer",["exports","ember-text-measurer/services/text-measurer"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}})}),define("flea-app/templates/application",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.HTMLBars.template({id:"dYIn4Prp",block:'{"symbols":[],"statements":[[1,[18,"welcome-page"],false],[0,"\\n"],[0,"\\n"],[1,[18,"outlet"],false],[0,"\\n"]],"hasEval":false}',meta:{moduleName:"flea-app/templates/application.hbs"}})}),define("flea-app/utils/parser",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0})
var t=function(){function e(e,t,n,r,o,i){this.message=e,this.expected=t,this.found=n,this.offset=r,this.line=o,this.column=i,this.name="SyntaxError"}return function(e,t){function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n}(e,Error),{SyntaxError:e,parse:function(t){function n(e){return z!==e&&(z>e&&(z=0,k={line:1,column:1,seenCR:!1}),function(e,n,r){var o,i
for(o=z;o<r;o++)"\n"===(i=t.charAt(o))?(e.seenCR||e.line++,e.column=1,e.seenCR=!1):"\r"===i||"\u2028"===i||"\u2029"===i?(e.line++,e.column=1,e.seenCR=!0):(e.column++,e.seenCR=!1)}(k,0,e),z=e),k}function r(e){N<E||(N>E&&(E=N,q=[]),q.push(e))}function o(r,o,i){var a=n(i),s=i<t.length?t.charAt(i):null
return null!==o&&function(e){var t=1
for(e.sort(function(e,t){return e.description<t.description?-1:e.description>t.description?1:0});t<e.length;)e[t-1]===e[t]?e.splice(t,1):t++}(o),new e(null!==r?r:function(e,t){var n,r,o,i=new Array(e.length)
for(o=0;o<e.length;o++)i[o]=e[o].description
return n=e.length>1?i.slice(0,-1).join(", ")+" or "+i[e.length-1]:i[0],r=t?'"'+function(e){function n(e){return e.charCodeAt(0).toString(16).toUpperCase()}return t.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\x08/g,"\\b").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\f/g,"\\f").replace(/\r/g,"\\r").replace(/[\x00-\x07\x0B\x0E\x0F]/g,function(e){return"\\x0"+n(e)}).replace(/[\x10-\x1F\x80-\xFF]/g,function(e){return"\\x"+n(e)}).replace(/[\u0180-\u0FFF]/g,function(e){return"\\u0"+n(e)}).replace(/[\u1080-\uFFFF]/g,function(e){return"\\u"+n(e)})}()+'"':"end of input","Expected "+n+" but "+r+" found."}(o,s),o,s,i,a.line,a.column)}function i(){var e,t
if(e=[],(t=a())!==f)for(;t!==f;)e.push(t),t=a()
else e=b
return e}function a(){var e
return(e=s())===f&&(e=l()),e}function s(){var e,n,o
return e=N,h.test(t.charAt(N))?(n=t.charAt(N),N++):(n=f,0===A&&r(v)),n!==f&&(o=u())!==f?(S=e,e=n=y(n,o)):(N=e,e=b),e}function l(){var e,n,o,i,a,s
if(e=N,91===t.charCodeAt(N)?(n=O,N++):(n=f,0===A&&r(P)),n!==f)if((o=c())!==f){if(i=[],h.test(t.charAt(N))?(a=t.charAt(N),N++):(a=f,0===A&&r(v)),a!==f)for(;a!==f;)i.push(a),h.test(t.charAt(N))?(a=t.charAt(N),N++):(a=f,0===A&&r(v))
else i=b
i!==f?(93===t.charCodeAt(N)?(a=x,N++):(a=f,0===A&&r(w)),a!==f&&(s=u())!==f?(S=e,e=n=j(o,i,s)):(N=e,e=b)):(N=e,e=b)}else N=e,e=b
else N=e,e=b
return e}function c(){var e,n
return e=N,_.test(t.charAt(N))?(n=t.charAt(N),N++):(n=f,0===A&&r(T)),n===f&&(n=R),n!==f&&(S=e,n=M(n)),e=n}function u(){var e,n
return e=N,C.test(t.charAt(N))?(n=t.charAt(N),N++):(n=f,0===A&&r(D)),n===f&&(n=R),n!==f&&(S=e,n=M(n)),e=n}var d,p=arguments.length>1?arguments[1]:{},f={},m={start:i},g=i,b=f,h=/^[A-Z]/,v={type:"class",value:"[A-Z]",description:"[A-Z]"},y=function(e,t){return{type:"amino",value:e,postmod:t}},O="[",P={type:"literal",value:"[",description:'"["'},x="]",w={type:"literal",value:"]",description:'"]"'},j=function(e,t,n){return{type:"include",value:t.join(""),premod:e,postmod:n}},R=null,_=/^[\S\s]/,T={type:"class",value:"[^]",description:"[^]"},M=function(e){return e||""},C=/^[*+]/,D={type:"class",value:"[*+]",description:"[*+]"},N=0,S=0,z=0,k={line:1,column:1,seenCR:!1},E=0,q=[],A=0
if("startRule"in p){if(!(p.startRule in m))throw new Error("Can't start parsing from rule \""+p.startRule+'".')
g=m[p.startRule]}if((d=g())!==f&&N===t.length)return d
throw d!==f&&N<t.length&&r({type:"end",description:"end of input"}),o(null,q,E)}}}()
e.default=t}),define("flea-app/utils/utils",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0})
var t=function(){function e(e,t){var n=[],r=!0,o=!1,i=void 0
try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{!r&&s.return&&s.return()}finally{if(o)throw i}}return n}return function(t,n){if(Array.isArray(t))return t
if(Symbol.iterator in Object(t))return e(t,n)
throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),n=function(e){return Object.prototype.toString.call(e).slice(8,-1)},r=(e.isDate=function(e){return"Object"===n(e)},e.isString=function(e){return"String"===n(e)},e.parse_date=d3.time.format("%Y%m%d").parse),o=(e.format_date=d3.time.format("%B %Y"),e.maybe_parse_date=function(e){return r(e)||e},e.htmlTable1D=function(e,t){return o(e.map(function(e){return[e]}),t)},e.htmlTable=function(e,t){if(0===e.length)return"<table></table>"
var n='<table class="table-striped table table-hover">'
if(t){n+="<thead>",n+="<trow>"
for(var r=0;r<t.length;r++)n+="<th>",n+=t[r],n+="</th>"
n+="</trow>",n+="</thead>"}n+="<tbody>"
for(var o=0;o<e.length;o++){n+="<tr>"
for(var i=0;i<e[o].length;i++)n+="<td>",n+=e[o][i],n+="</td>"
n+="</tr>"}return n+="</tbody>",n+="</table>"}),i=(e.regexRanges=function(e,t){var n=[]
if(!e)return n
for(var r=void 0,o=new RegExp(e,"g");null!==(r=o.exec(t));)n.push([r.index,r.index+r[0].length-1])
return n},e.sumArray=function(e,t){var n=0
t||(t=function(e){return e})
for(var r=0;r<e.length;r++)n+=t(e[r])
return n},e.transformIndex=function(e,t,n){var r=void 0
return n&&(e-=1),r=e>=t.length?t[t.length-1]:t[e],n&&(r+=1),r},e.checkRange=function(e,n){var r=t(e,2),o=r[0],i=r[1],a=t(n,2),s=a[0],l=a[1]
if(o<s||o>l)throw"invalid start position"
if(i<s||i>l)throw"invalid stop position"
if(o>=i)throw"invalid range"}),a=(e.checkRanges=function(e,t){for(var n=0;n<e.length;n++)i(e[n],t)},e.oneIndex=function(e){if(e<0)throw"invalid index"
return e+1},e.zeroIndex=function(e){if(e<1)throw"invalid index"
return e-1})
e.alignmentTicks=function(e,t,n){var r=e[0],o=e[e.length-1],i=R.map(R.multiply(n),R.range(Math.ceil(r/n),1+Math.floor(o/n)))
return 0===i[0]&&(i[0]=1),(i=i.map(function(e){return a(e)}))[0]!==r&&i.unshift(r),i[i.length-1]!==o&&i.push(o),i.map(function(e){return t[e]})},e.refToAlnCoords=function(e,t){for(var n=new Array(t),r=new Array(t),o=-1,i=0;i<e.length;i++){var a=e[i]
if(r[a]=i,a!==o&&(n[a]=i),o>-1)for(var s=o+1;s<a;s++)n[s]=i,r[s]=i-1
o=a}return[n,r]},e.mapIfPresent=function(e,t){return t in e?e[t]:t},e.insertNested=function(e,t,n){for(var r=0;r<t.length-1;r++){var o=t[r]
o in e||(e[o]={}),e=e[o]}e[t[t.length-1]]=n},e.seqNameToProperty=function(e,t){return e?R.zipObj(R.pluck("name",e),R.pluck(t,e)):{}}}),define("flea-app/config/environment",[],function(){try{var e="flea-app/config/environment",t=document.querySelector('meta[name="'+e+'"]').getAttribute("content"),n={default:JSON.parse(unescape(t))}
return Object.defineProperty(n,"__esModule",{value:!0}),n}catch(t){throw new Error('Could not read config from meta tag with name "'+e+'".')}}),runningTests||require("flea-app/app").default.create({name:"flea-app",version:"0.0.0+18fe11a3"})
